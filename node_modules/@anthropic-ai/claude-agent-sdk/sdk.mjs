#!/usr/bin/env node
// (c) Anthropic PBC. All rights reserved. Use is subject to the Legal Agreements outlined here: https://code.claude.com/docs/en/legal-and-compliance.

// Version: 0.2.49

// Want to see the unminified source? We're hiring!
// https://job-boards.greenhouse.io/anthropic/jobs/4816199008
var JK=Object.create;var{getPrototypeOf:GK,defineProperty:GQ,getOwnPropertyNames:HK}=Object;var BK=Object.prototype.hasOwnProperty;var V7=(Q,X,Y)=>{Y=Q!=null?JK(GK(Q)):{};let $=X||!Q||!Q.__esModule?GQ(Y,"default",{value:Q,enumerable:!0}):Y;for(let W of HK(Q))if(!BK.call($,W))GQ($,W,{get:()=>Q[W],enumerable:!0});return $};var P=(Q,X)=>()=>(X||Q((X={exports:{}}).exports,X),X.exports);var q7=(Q,X)=>{for(var Y in X)GQ(Q,Y,{get:X[Y],enumerable:!0,configurable:!0,set:($)=>X[Y]=()=>$})};var zK=Symbol.dispose||Symbol.for("Symbol.dispose"),KK=Symbol.asyncDispose||Symbol.for("Symbol.asyncDispose"),$0=(Q,X,Y)=>{if(X!=null){if(typeof X!=="object"&&typeof X!=="function")throw TypeError('Object expected to be assigned to "using" declaration');var $;if(Y)$=X[KK];if($===void 0)$=X[zK];if(typeof $!=="function")throw TypeError("Object not disposable");Q.push([Y,$,X])}else if(Y)Q.push([Y]);return X},W0=(Q,X,Y)=>{var $=typeof SuppressedError==="function"?SuppressedError:function(G,H,B,z){return z=Error(B),z.name="SuppressedError",z.error=G,z.suppressed=H,z},W=(G)=>X=Y?new $(G,X,"An error was suppressed during disposal"):(Y=!0,G),J=(G)=>{while(G=Q.pop())try{var H=G[1]&&G[1].call(G[2]);if(G[0])return Promise.resolve(H).then(J,(B)=>(W(B),J()))}catch(B){W(B)}if(Y)throw X};return J()};var l4=P((YG)=>{Object.defineProperty(YG,"__esModule",{value:!0});YG.regexpCode=YG.getEsmExportName=YG.getProperty=YG.safeStringify=YG.stringify=YG.strConcat=YG.addCodeArg=YG.str=YG._=YG.nil=YG._Code=YG.Name=YG.IDENTIFIER=YG._CodeOrName=void 0;class A8{}YG._CodeOrName=A8;YG.IDENTIFIER=/^[a-z$_][a-z$_0-9]*$/i;class m6 extends A8{constructor(Q){super();if(!YG.IDENTIFIER.test(Q))throw Error("CodeGen: name must be a valid identifier");this.str=Q}toString(){return this.str}emptyStr(){return!1}get names(){return{[this.str]:1}}}YG.Name=m6;class e0 extends A8{constructor(Q){super();this._items=typeof Q==="string"?[Q]:Q}toString(){return this.str}emptyStr(){if(this._items.length>1)return!1;let Q=this._items[0];return Q===""||Q==='""'}get str(){var Q;return(Q=this._str)!==null&&Q!==void 0?Q:this._str=this._items.reduce((X,Y)=>`${X}${Y}`,"")}get names(){var Q;return(Q=this._names)!==null&&Q!==void 0?Q:this._names=this._items.reduce((X,Y)=>{if(Y instanceof m6)X[Y.str]=(X[Y.str]||0)+1;return X},{})}}YG._Code=e0;YG.nil=new e0("");function QG(Q,...X){let Y=[Q[0]],$=0;while($<X.length)eY(Y,X[$]),Y.push(Q[++$]);return new e0(Y)}YG._=QG;var sY=new e0("+");function XG(Q,...X){let Y=[u4(Q[0])],$=0;while($<X.length)Y.push(sY),eY(Y,X[$]),Y.push(sY,u4(Q[++$]));return MN(Y),new e0(Y)}YG.str=XG;function eY(Q,X){if(X instanceof e0)Q.push(...X._items);else if(X instanceof m6)Q.push(X);else Q.push(RN(X))}YG.addCodeArg=eY;function MN(Q){let X=1;while(X<Q.length-1){if(Q[X]===sY){let Y=AN(Q[X-1],Q[X+1]);if(Y!==void 0){Q.splice(X-1,3,Y);continue}Q[X++]="+"}X++}}function AN(Q,X){if(X==='""')return Q;if(Q==='""')return X;if(typeof Q=="string"){if(X instanceof m6||Q[Q.length-1]!=='"')return;if(typeof X!="string")return`${Q.slice(0,-1)}${X}"`;if(X[0]==='"')return Q.slice(0,-1)+X.slice(1);return}if(typeof X=="string"&&X[0]==='"'&&!(Q instanceof m6))return`"${Q}${X.slice(1)}`;return}function jN(Q,X){return X.emptyStr()?Q:Q.emptyStr()?X:XG`${Q}${X}`}YG.strConcat=jN;function RN(Q){return typeof Q=="number"||typeof Q=="boolean"||Q===null?Q:u4(Array.isArray(Q)?Q.join(","):Q)}function IN(Q){return new e0(u4(Q))}YG.stringify=IN;function u4(Q){return JSON.stringify(Q).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")}YG.safeStringify=u4;function EN(Q){return typeof Q=="string"&&YG.IDENTIFIER.test(Q)?new e0(`.${Q}`):QG`[${Q}]`}YG.getProperty=EN;function bN(Q){if(typeof Q=="string"&&YG.IDENTIFIER.test(Q))return new e0(`${Q}`);throw Error(`CodeGen: invalid export name: ${Q}, use explicit $id name mapping`)}YG.getEsmExportName=bN;function PN(Q){return new e0(Q.toString())}YG.regexpCode=PN});var $$=P((GG)=>{Object.defineProperty(GG,"__esModule",{value:!0});GG.ValueScope=GG.ValueScopeName=GG.Scope=GG.varKinds=GG.UsedValueState=void 0;var g0=l4();class WG extends Error{constructor(Q){super(`CodeGen: "code" for ${Q} not defined`);this.value=Q.value}}var R8;(function(Q){Q[Q.Started=0]="Started",Q[Q.Completed=1]="Completed"})(R8||(GG.UsedValueState=R8={}));GG.varKinds={const:new g0.Name("const"),let:new g0.Name("let"),var:new g0.Name("var")};class X${constructor({prefixes:Q,parent:X}={}){this._names={},this._prefixes=Q,this._parent=X}toName(Q){return Q instanceof g0.Name?Q:this.name(Q)}name(Q){return new g0.Name(this._newName(Q))}_newName(Q){let X=this._names[Q]||this._nameGroup(Q);return`${Q}${X.index++}`}_nameGroup(Q){var X,Y;if(((Y=(X=this._parent)===null||X===void 0?void 0:X._prefixes)===null||Y===void 0?void 0:Y.has(Q))||this._prefixes&&!this._prefixes.has(Q))throw Error(`CodeGen: prefix "${Q}" is not allowed in this scope`);return this._names[Q]={prefix:Q,index:0}}}GG.Scope=X$;class Y$ extends g0.Name{constructor(Q,X){super(X);this.prefix=Q}setValue(Q,{property:X,itemIndex:Y}){this.value=Q,this.scopePath=g0._`.${new g0.Name(X)}[${Y}]`}}GG.ValueScopeName=Y$;var uN=g0._`\n`;class JG extends X${constructor(Q){super(Q);this._values={},this._scope=Q.scope,this.opts={...Q,_n:Q.lines?uN:g0.nil}}get(){return this._scope}name(Q){return new Y$(Q,this._newName(Q))}value(Q,X){var Y;if(X.ref===void 0)throw Error("CodeGen: ref must be passed in value");let $=this.toName(Q),{prefix:W}=$,J=(Y=X.key)!==null&&Y!==void 0?Y:X.ref,G=this._values[W];if(G){let z=G.get(J);if(z)return z}else G=this._values[W]=new Map;G.set(J,$);let H=this._scope[W]||(this._scope[W]=[]),B=H.length;return H[B]=X.ref,$.setValue(X,{property:W,itemIndex:B}),$}getValue(Q,X){let Y=this._values[Q];if(!Y)return;return Y.get(X)}scopeRefs(Q,X=this._values){return this._reduceValues(X,(Y)=>{if(Y.scopePath===void 0)throw Error(`CodeGen: name "${Y}" has no value`);return g0._`${Q}${Y.scopePath}`})}scopeCode(Q=this._values,X,Y){return this._reduceValues(Q,($)=>{if($.value===void 0)throw Error(`CodeGen: name "${$}" has no value`);return $.value.code},X,Y)}_reduceValues(Q,X,Y={},$){let W=g0.nil;for(let J in Q){let G=Q[J];if(!G)continue;let H=Y[J]=Y[J]||new Map;G.forEach((B)=>{if(H.has(B))return;H.set(B,R8.Started);let z=X(B);if(z){let K=this.opts.es5?GG.varKinds.var:GG.varKinds.const;W=g0._`${W}${K} ${B} = ${z};${this.opts._n}`}else if(z=$===null||$===void 0?void 0:$(B))W=g0._`${W}${z}${this.opts._n}`;else throw new WG(B);H.set(B,R8.Completed)})}return W}}GG.ValueScope=JG});var p=P((h0)=>{Object.defineProperty(h0,"__esModule",{value:!0});h0.or=h0.and=h0.not=h0.CodeGen=h0.operators=h0.varKinds=h0.ValueScopeName=h0.ValueScope=h0.Scope=h0.Name=h0.regexpCode=h0.stringify=h0.getProperty=h0.nil=h0.strConcat=h0.str=h0._=void 0;var t=l4(),Q1=$$(),c1=l4();Object.defineProperty(h0,"_",{enumerable:!0,get:function(){return c1._}});Object.defineProperty(h0,"str",{enumerable:!0,get:function(){return c1.str}});Object.defineProperty(h0,"strConcat",{enumerable:!0,get:function(){return c1.strConcat}});Object.defineProperty(h0,"nil",{enumerable:!0,get:function(){return c1.nil}});Object.defineProperty(h0,"getProperty",{enumerable:!0,get:function(){return c1.getProperty}});Object.defineProperty(h0,"stringify",{enumerable:!0,get:function(){return c1.stringify}});Object.defineProperty(h0,"regexpCode",{enumerable:!0,get:function(){return c1.regexpCode}});Object.defineProperty(h0,"Name",{enumerable:!0,get:function(){return c1.Name}});var Z8=$$();Object.defineProperty(h0,"Scope",{enumerable:!0,get:function(){return Z8.Scope}});Object.defineProperty(h0,"ValueScope",{enumerable:!0,get:function(){return Z8.ValueScope}});Object.defineProperty(h0,"ValueScopeName",{enumerable:!0,get:function(){return Z8.ValueScopeName}});Object.defineProperty(h0,"varKinds",{enumerable:!0,get:function(){return Z8.varKinds}});h0.operators={GT:new t._Code(">"),GTE:new t._Code(">="),LT:new t._Code("<"),LTE:new t._Code("<="),EQ:new t._Code("==="),NEQ:new t._Code("!=="),NOT:new t._Code("!"),OR:new t._Code("||"),AND:new t._Code("&&"),ADD:new t._Code("+")};class p1{optimizeNodes(){return this}optimizeNames(Q,X){return this}}class BG extends p1{constructor(Q,X,Y){super();this.varKind=Q,this.name=X,this.rhs=Y}render({es5:Q,_n:X}){let Y=Q?Q1.varKinds.var:this.varKind,$=this.rhs===void 0?"":` = ${this.rhs}`;return`${Y} ${this.name}${$};`+X}optimizeNames(Q,X){if(!Q[this.name.str])return;if(this.rhs)this.rhs=p6(this.rhs,Q,X);return this}get names(){return this.rhs instanceof t._CodeOrName?this.rhs.names:{}}}class G$ extends p1{constructor(Q,X,Y){super();this.lhs=Q,this.rhs=X,this.sideEffects=Y}render({_n:Q}){return`${this.lhs} = ${this.rhs};`+Q}optimizeNames(Q,X){if(this.lhs instanceof t.Name&&!Q[this.lhs.str]&&!this.sideEffects)return;return this.rhs=p6(this.rhs,Q,X),this}get names(){let Q=this.lhs instanceof t.Name?{}:{...this.lhs.names};return S8(Q,this.rhs)}}class zG extends G${constructor(Q,X,Y,$){super(Q,Y,$);this.op=X}render({_n:Q}){return`${this.lhs} ${this.op}= ${this.rhs};`+Q}}class KG extends p1{constructor(Q){super();this.label=Q,this.names={}}render({_n:Q}){return`${this.label}:`+Q}}class VG extends p1{constructor(Q){super();this.label=Q,this.names={}}render({_n:Q}){return`break${this.label?` ${this.label}`:""};`+Q}}class qG extends p1{constructor(Q){super();this.error=Q}render({_n:Q}){return`throw ${this.error};`+Q}get names(){return this.error.names}}class UG extends p1{constructor(Q){super();this.code=Q}render({_n:Q}){return`${this.code};`+Q}optimizeNodes(){return`${this.code}`?this:void 0}optimizeNames(Q,X){return this.code=p6(this.code,Q,X),this}get names(){return this.code instanceof t._CodeOrName?this.code.names:{}}}class C8 extends p1{constructor(Q=[]){super();this.nodes=Q}render(Q){return this.nodes.reduce((X,Y)=>X+Y.render(Q),"")}optimizeNodes(){let{nodes:Q}=this,X=Q.length;while(X--){let Y=Q[X].optimizeNodes();if(Array.isArray(Y))Q.splice(X,1,...Y);else if(Y)Q[X]=Y;else Q.splice(X,1)}return Q.length>0?this:void 0}optimizeNames(Q,X){let{nodes:Y}=this,$=Y.length;while($--){let W=Y[$];if(W.optimizeNames(Q,X))continue;pN(Q,W.names),Y.splice($,1)}return Y.length>0?this:void 0}get names(){return this.nodes.reduce((Q,X)=>K6(Q,X.names),{})}}class d1 extends C8{render(Q){return"{"+Q._n+super.render(Q)+"}"+Q._n}}class LG extends C8{}class m4 extends d1{}m4.kind="else";class E1 extends d1{constructor(Q,X){super(X);this.condition=Q}render(Q){let X=`if(${this.condition})`+super.render(Q);if(this.else)X+="else "+this.else.render(Q);return X}optimizeNodes(){super.optimizeNodes();let Q=this.condition;if(Q===!0)return this.nodes;let X=this.else;if(X){let Y=X.optimizeNodes();X=this.else=Array.isArray(Y)?new m4(Y):Y}if(X){if(Q===!1)return X instanceof E1?X:X.nodes;if(this.nodes.length)return this;return new E1(wG(Q),X instanceof E1?[X]:X.nodes)}if(Q===!1||!this.nodes.length)return;return this}optimizeNames(Q,X){var Y;if(this.else=(Y=this.else)===null||Y===void 0?void 0:Y.optimizeNames(Q,X),!(super.optimizeNames(Q,X)||this.else))return;return this.condition=p6(this.condition,Q,X),this}get names(){let Q=super.names;if(S8(Q,this.condition),this.else)K6(Q,this.else.names);return Q}}E1.kind="if";class c6 extends d1{}c6.kind="for";class FG extends c6{constructor(Q){super();this.iteration=Q}render(Q){return`for(${this.iteration})`+super.render(Q)}optimizeNames(Q,X){if(!super.optimizeNames(Q,X))return;return this.iteration=p6(this.iteration,Q,X),this}get names(){return K6(super.names,this.iteration.names)}}class NG extends c6{constructor(Q,X,Y,$){super();this.varKind=Q,this.name=X,this.from=Y,this.to=$}render(Q){let X=Q.es5?Q1.varKinds.var:this.varKind,{name:Y,from:$,to:W}=this;return`for(${X} ${Y}=${$}; ${Y}<${W}; ${Y}++)`+super.render(Q)}get names(){let Q=S8(super.names,this.from);return S8(Q,this.to)}}class W$ extends c6{constructor(Q,X,Y,$){super();this.loop=Q,this.varKind=X,this.name=Y,this.iterable=$}render(Q){return`for(${this.varKind} ${this.name} ${this.loop} ${this.iterable})`+super.render(Q)}optimizeNames(Q,X){if(!super.optimizeNames(Q,X))return;return this.iterable=p6(this.iterable,Q,X),this}get names(){return K6(super.names,this.iterable.names)}}class I8 extends d1{constructor(Q,X,Y){super();this.name=Q,this.args=X,this.async=Y}render(Q){return`${this.async?"async ":""}function ${this.name}(${this.args})`+super.render(Q)}}I8.kind="func";class E8 extends C8{render(Q){return"return "+super.render(Q)}}E8.kind="return";class DG extends d1{render(Q){let X="try"+super.render(Q);if(this.catch)X+=this.catch.render(Q);if(this.finally)X+=this.finally.render(Q);return X}optimizeNodes(){var Q,X;return super.optimizeNodes(),(Q=this.catch)===null||Q===void 0||Q.optimizeNodes(),(X=this.finally)===null||X===void 0||X.optimizeNodes(),this}optimizeNames(Q,X){var Y,$;return super.optimizeNames(Q,X),(Y=this.catch)===null||Y===void 0||Y.optimizeNames(Q,X),($=this.finally)===null||$===void 0||$.optimizeNames(Q,X),this}get names(){let Q=super.names;if(this.catch)K6(Q,this.catch.names);if(this.finally)K6(Q,this.finally.names);return Q}}class b8 extends d1{constructor(Q){super();this.error=Q}render(Q){return`catch(${this.error})`+super.render(Q)}}b8.kind="catch";class P8 extends d1{render(Q){return"finally"+super.render(Q)}}P8.kind="finally";class OG{constructor(Q,X={}){this._values={},this._blockStarts=[],this._constants={},this.opts={...X,_n:X.lines?`
`:""},this._extScope=Q,this._scope=new Q1.Scope({parent:Q}),this._nodes=[new LG]}toString(){return this._root.render(this.opts)}name(Q){return this._scope.name(Q)}scopeName(Q){return this._extScope.name(Q)}scopeValue(Q,X){let Y=this._extScope.value(Q,X);return(this._values[Y.prefix]||(this._values[Y.prefix]=new Set)).add(Y),Y}getScopeValue(Q,X){return this._extScope.getValue(Q,X)}scopeRefs(Q){return this._extScope.scopeRefs(Q,this._values)}scopeCode(){return this._extScope.scopeCode(this._values)}_def(Q,X,Y,$){let W=this._scope.toName(X);if(Y!==void 0&&$)this._constants[W.str]=Y;return this._leafNode(new BG(Q,W,Y)),W}const(Q,X,Y){return this._def(Q1.varKinds.const,Q,X,Y)}let(Q,X,Y){return this._def(Q1.varKinds.let,Q,X,Y)}var(Q,X,Y){return this._def(Q1.varKinds.var,Q,X,Y)}assign(Q,X,Y){return this._leafNode(new G$(Q,X,Y))}add(Q,X){return this._leafNode(new zG(Q,h0.operators.ADD,X))}code(Q){if(typeof Q=="function")Q();else if(Q!==t.nil)this._leafNode(new UG(Q));return this}object(...Q){let X=["{"];for(let[Y,$]of Q){if(X.length>1)X.push(",");if(X.push(Y),Y!==$||this.opts.es5)X.push(":"),(0,t.addCodeArg)(X,$)}return X.push("}"),new t._Code(X)}if(Q,X,Y){if(this._blockNode(new E1(Q)),X&&Y)this.code(X).else().code(Y).endIf();else if(X)this.code(X).endIf();else if(Y)throw Error('CodeGen: "else" body without "then" body');return this}elseIf(Q){return this._elseNode(new E1(Q))}else(){return this._elseNode(new m4)}endIf(){return this._endBlockNode(E1,m4)}_for(Q,X){if(this._blockNode(Q),X)this.code(X).endFor();return this}for(Q,X){return this._for(new FG(Q),X)}forRange(Q,X,Y,$,W=this.opts.es5?Q1.varKinds.var:Q1.varKinds.let){let J=this._scope.toName(Q);return this._for(new NG(W,J,X,Y),()=>$(J))}forOf(Q,X,Y,$=Q1.varKinds.const){let W=this._scope.toName(Q);if(this.opts.es5){let J=X instanceof t.Name?X:this.var("_arr",X);return this.forRange("_i",0,t._`${J}.length`,(G)=>{this.var(W,t._`${J}[${G}]`),Y(W)})}return this._for(new W$("of",$,W,X),()=>Y(W))}forIn(Q,X,Y,$=this.opts.es5?Q1.varKinds.var:Q1.varKinds.const){if(this.opts.ownProperties)return this.forOf(Q,t._`Object.keys(${X})`,Y);let W=this._scope.toName(Q);return this._for(new W$("in",$,W,X),()=>Y(W))}endFor(){return this._endBlockNode(c6)}label(Q){return this._leafNode(new KG(Q))}break(Q){return this._leafNode(new VG(Q))}return(Q){let X=new E8;if(this._blockNode(X),this.code(Q),X.nodes.length!==1)throw Error('CodeGen: "return" should have one node');return this._endBlockNode(E8)}try(Q,X,Y){if(!X&&!Y)throw Error('CodeGen: "try" without "catch" and "finally"');let $=new DG;if(this._blockNode($),this.code(Q),X){let W=this.name("e");this._currNode=$.catch=new b8(W),X(W)}if(Y)this._currNode=$.finally=new P8,this.code(Y);return this._endBlockNode(b8,P8)}throw(Q){return this._leafNode(new qG(Q))}block(Q,X){if(this._blockStarts.push(this._nodes.length),Q)this.code(Q).endBlock(X);return this}endBlock(Q){let X=this._blockStarts.pop();if(X===void 0)throw Error("CodeGen: not in self-balancing block");let Y=this._nodes.length-X;if(Y<0||Q!==void 0&&Y!==Q)throw Error(`CodeGen: wrong number of nodes: ${Y} vs ${Q} expected`);return this._nodes.length=X,this}func(Q,X=t.nil,Y,$){if(this._blockNode(new I8(Q,X,Y)),$)this.code($).endFunc();return this}endFunc(){return this._endBlockNode(I8)}optimize(Q=1){while(Q-- >0)this._root.optimizeNodes(),this._root.optimizeNames(this._root.names,this._constants)}_leafNode(Q){return this._currNode.nodes.push(Q),this}_blockNode(Q){this._currNode.nodes.push(Q),this._nodes.push(Q)}_endBlockNode(Q,X){let Y=this._currNode;if(Y instanceof Q||X&&Y instanceof X)return this._nodes.pop(),this;throw Error(`CodeGen: not in block "${X?`${Q.kind}/${X.kind}`:Q.kind}"`)}_elseNode(Q){let X=this._currNode;if(!(X instanceof E1))throw Error('CodeGen: "else" without "if"');return this._currNode=X.else=Q,this}get _root(){return this._nodes[0]}get _currNode(){let Q=this._nodes;return Q[Q.length-1]}set _currNode(Q){let X=this._nodes;X[X.length-1]=Q}}h0.CodeGen=OG;function K6(Q,X){for(let Y in X)Q[Y]=(Q[Y]||0)+(X[Y]||0);return Q}function S8(Q,X){return X instanceof t._CodeOrName?K6(Q,X.names):Q}function p6(Q,X,Y){if(Q instanceof t.Name)return $(Q);if(!W(Q))return Q;return new t._Code(Q._items.reduce((J,G)=>{if(G instanceof t.Name)G=$(G);if(G instanceof t._Code)J.push(...G._items);else J.push(G);return J},[]));function $(J){let G=Y[J.str];if(G===void 0||X[J.str]!==1)return J;return delete X[J.str],G}function W(J){return J instanceof t._Code&&J._items.some((G)=>G instanceof t.Name&&X[G.str]===1&&Y[G.str]!==void 0)}}function pN(Q,X){for(let Y in X)Q[Y]=(Q[Y]||0)-(X[Y]||0)}function wG(Q){return typeof Q=="boolean"||typeof Q=="number"||Q===null?!Q:t._`!${J$(Q)}`}h0.not=wG;var dN=MG(h0.operators.AND);function iN(...Q){return Q.reduce(dN)}h0.and=iN;var nN=MG(h0.operators.OR);function rN(...Q){return Q.reduce(nN)}h0.or=rN;function MG(Q){return(X,Y)=>X===t.nil?Y:Y===t.nil?X:t._`${J$(X)} ${Q} ${J$(Y)}`}function J$(Q){return Q instanceof t.Name?Q:t._`(${Q})`}});var e=P((ZG)=>{Object.defineProperty(ZG,"__esModule",{value:!0});ZG.checkStrictMode=ZG.getErrorPath=ZG.Type=ZG.useFunc=ZG.setEvaluated=ZG.evaluatedPropsToName=ZG.mergeEvaluated=ZG.eachItem=ZG.unescapeJsonPointer=ZG.escapeJsonPointer=ZG.escapeFragment=ZG.unescapeFragment=ZG.schemaRefOrVal=ZG.schemaHasRulesButRef=ZG.schemaHasRules=ZG.checkUnknownRules=ZG.alwaysValidSchema=ZG.toHash=void 0;var Y0=p(),sN=l4();function eN(Q){let X={};for(let Y of Q)X[Y]=!0;return X}ZG.toHash=eN;function QD(Q,X){if(typeof X=="boolean")return X;if(Object.keys(X).length===0)return!0;return IG(Q,X),!EG(X,Q.self.RULES.all)}ZG.alwaysValidSchema=QD;function IG(Q,X=Q.schema){let{opts:Y,self:$}=Q;if(!Y.strictSchema)return;if(typeof X==="boolean")return;let W=$.RULES.keywords;for(let J in X)if(!W[J])SG(Q,`unknown keyword: "${J}"`)}ZG.checkUnknownRules=IG;function EG(Q,X){if(typeof Q=="boolean")return!Q;for(let Y in Q)if(X[Y])return!0;return!1}ZG.schemaHasRules=EG;function XD(Q,X){if(typeof Q=="boolean")return!Q;for(let Y in Q)if(Y!=="$ref"&&X.all[Y])return!0;return!1}ZG.schemaHasRulesButRef=XD;function YD({topSchemaRef:Q,schemaPath:X},Y,$,W){if(!W){if(typeof Y=="number"||typeof Y=="boolean")return Y;if(typeof Y=="string")return Y0._`${Y}`}return Y0._`${Q}${X}${(0,Y0.getProperty)($)}`}ZG.schemaRefOrVal=YD;function $D(Q){return bG(decodeURIComponent(Q))}ZG.unescapeFragment=$D;function WD(Q){return encodeURIComponent(B$(Q))}ZG.escapeFragment=WD;function B$(Q){if(typeof Q=="number")return`${Q}`;return Q.replace(/~/g,"~0").replace(/\//g,"~1")}ZG.escapeJsonPointer=B$;function bG(Q){return Q.replace(/~1/g,"/").replace(/~0/g,"~")}ZG.unescapeJsonPointer=bG;function JD(Q,X){if(Array.isArray(Q))for(let Y of Q)X(Y);else X(Q)}ZG.eachItem=JD;function jG({mergeNames:Q,mergeToName:X,mergeValues:Y,resultToName:$}){return(W,J,G,H)=>{let B=G===void 0?J:G instanceof Y0.Name?(J instanceof Y0.Name?Q(W,J,G):X(W,J,G),G):J instanceof Y0.Name?(X(W,G,J),J):Y(J,G);return H===Y0.Name&&!(B instanceof Y0.Name)?$(W,B):B}}ZG.mergeEvaluated={props:jG({mergeNames:(Q,X,Y)=>Q.if(Y0._`${Y} !== true && ${X} !== undefined`,()=>{Q.if(Y0._`${X} === true`,()=>Q.assign(Y,!0),()=>Q.assign(Y,Y0._`${Y} || {}`).code(Y0._`Object.assign(${Y}, ${X})`))}),mergeToName:(Q,X,Y)=>Q.if(Y0._`${Y} !== true`,()=>{if(X===!0)Q.assign(Y,!0);else Q.assign(Y,Y0._`${Y} || {}`),z$(Q,Y,X)}),mergeValues:(Q,X)=>Q===!0?!0:{...Q,...X},resultToName:PG}),items:jG({mergeNames:(Q,X,Y)=>Q.if(Y0._`${Y} !== true && ${X} !== undefined`,()=>Q.assign(Y,Y0._`${X} === true ? true : ${Y} > ${X} ? ${Y} : ${X}`)),mergeToName:(Q,X,Y)=>Q.if(Y0._`${Y} !== true`,()=>Q.assign(Y,X===!0?!0:Y0._`${Y} > ${X} ? ${Y} : ${X}`)),mergeValues:(Q,X)=>Q===!0?!0:Math.max(Q,X),resultToName:(Q,X)=>Q.var("items",X)})};function PG(Q,X){if(X===!0)return Q.var("props",!0);let Y=Q.var("props",Y0._`{}`);if(X!==void 0)z$(Q,Y,X);return Y}ZG.evaluatedPropsToName=PG;function z$(Q,X,Y){Object.keys(Y).forEach(($)=>Q.assign(Y0._`${X}${(0,Y0.getProperty)($)}`,!0))}ZG.setEvaluated=z$;var RG={};function GD(Q,X){return Q.scopeValue("func",{ref:X,code:RG[X.code]||(RG[X.code]=new sN._Code(X.code))})}ZG.useFunc=GD;var H$;(function(Q){Q[Q.Num=0]="Num",Q[Q.Str=1]="Str"})(H$||(ZG.Type=H$={}));function HD(Q,X,Y){if(Q instanceof Y0.Name){let $=X===H$.Num;return Y?$?Y0._`"[" + ${Q} + "]"`:Y0._`"['" + ${Q} + "']"`:$?Y0._`"/" + ${Q}`:Y0._`"/" + ${Q}.replace(/~/g, "~0").replace(/\\//g, "~1")`}return Y?(0,Y0.getProperty)(Q).toString():"/"+B$(Q)}ZG.getErrorPath=HD;function SG(Q,X,Y=Q.opts.strictSchema){if(!Y)return;if(X=`strict mode: ${X}`,Y===!0)throw Error(X);Q.self.logger.warn(X)}ZG.checkStrictMode=SG});var b1=P((kG)=>{Object.defineProperty(kG,"__esModule",{value:!0});var C0=p(),ED={data:new C0.Name("data"),valCxt:new C0.Name("valCxt"),instancePath:new C0.Name("instancePath"),parentData:new C0.Name("parentData"),parentDataProperty:new C0.Name("parentDataProperty"),rootData:new C0.Name("rootData"),dynamicAnchors:new C0.Name("dynamicAnchors"),vErrors:new C0.Name("vErrors"),errors:new C0.Name("errors"),this:new C0.Name("this"),self:new C0.Name("self"),scope:new C0.Name("scope"),json:new C0.Name("json"),jsonPos:new C0.Name("jsonPos"),jsonLen:new C0.Name("jsonLen"),jsonPart:new C0.Name("jsonPart")};kG.default=ED});var c4=P((xG)=>{Object.defineProperty(xG,"__esModule",{value:!0});xG.extendErrors=xG.resetErrorsCount=xG.reportExtraError=xG.reportError=xG.keyword$DataError=xG.keywordError=void 0;var a=p(),v8=e(),T0=b1();xG.keywordError={message:({keyword:Q})=>a.str`must pass "${Q}" keyword validation`};xG.keyword$DataError={message:({keyword:Q,schemaType:X})=>X?a.str`"${Q}" keyword must be ${X} ($data)`:a.str`"${Q}" keyword is invalid ($data)`};function PD(Q,X=xG.keywordError,Y,$){let{it:W}=Q,{gen:J,compositeRule:G,allErrors:H}=W,B=TG(Q,X,Y);if($!==null&&$!==void 0?$:G||H)vG(J,B);else _G(W,a._`[${B}]`)}xG.reportError=PD;function SD(Q,X=xG.keywordError,Y){let{it:$}=Q,{gen:W,compositeRule:J,allErrors:G}=$,H=TG(Q,X,Y);if(vG(W,H),!(J||G))_G($,T0.default.vErrors)}xG.reportExtraError=SD;function ZD(Q,X){Q.assign(T0.default.errors,X),Q.if(a._`${T0.default.vErrors} !== null`,()=>Q.if(X,()=>Q.assign(a._`${T0.default.vErrors}.length`,X),()=>Q.assign(T0.default.vErrors,null)))}xG.resetErrorsCount=ZD;function CD({gen:Q,keyword:X,schemaValue:Y,data:$,errsCount:W,it:J}){if(W===void 0)throw Error("ajv implementation error");let G=Q.name("err");Q.forRange("i",W,T0.default.errors,(H)=>{if(Q.const(G,a._`${T0.default.vErrors}[${H}]`),Q.if(a._`${G}.instancePath === undefined`,()=>Q.assign(a._`${G}.instancePath`,(0,a.strConcat)(T0.default.instancePath,J.errorPath))),Q.assign(a._`${G}.schemaPath`,a.str`${J.errSchemaPath}/${X}`),J.opts.verbose)Q.assign(a._`${G}.schema`,Y),Q.assign(a._`${G}.data`,$)})}xG.extendErrors=CD;function vG(Q,X){let Y=Q.const("err",X);Q.if(a._`${T0.default.vErrors} === null`,()=>Q.assign(T0.default.vErrors,a._`[${Y}]`),a._`${T0.default.vErrors}.push(${Y})`),Q.code(a._`${T0.default.errors}++`)}function _G(Q,X){let{gen:Y,validateName:$,schemaEnv:W}=Q;if(W.$async)Y.throw(a._`new ${Q.ValidationError}(${X})`);else Y.assign(a._`${$}.errors`,X),Y.return(!1)}var V6={keyword:new a.Name("keyword"),schemaPath:new a.Name("schemaPath"),params:new a.Name("params"),propertyName:new a.Name("propertyName"),message:new a.Name("message"),schema:new a.Name("schema"),parentSchema:new a.Name("parentSchema")};function TG(Q,X,Y){let{createErrors:$}=Q.it;if($===!1)return a._`{}`;return kD(Q,X,Y)}function kD(Q,X,Y={}){let{gen:$,it:W}=Q,J=[vD(W,Y),_D(Q,Y)];return TD(Q,X,J),$.object(...J)}function vD({errorPath:Q},{instancePath:X}){let Y=X?a.str`${Q}${(0,v8.getErrorPath)(X,v8.Type.Str)}`:Q;return[T0.default.instancePath,(0,a.strConcat)(T0.default.instancePath,Y)]}function _D({keyword:Q,it:{errSchemaPath:X}},{schemaPath:Y,parentSchema:$}){let W=$?X:a.str`${X}/${Q}`;if(Y)W=a.str`${W}${(0,v8.getErrorPath)(Y,v8.Type.Str)}`;return[V6.schemaPath,W]}function TD(Q,{params:X,message:Y},$){let{keyword:W,data:J,schemaValue:G,it:H}=Q,{opts:B,propertyName:z,topSchemaRef:K,schemaPath:q}=H;if($.push([V6.keyword,W],[V6.params,typeof X=="function"?X(Q):X||a._`{}`]),B.messages)$.push([V6.message,typeof Y=="function"?Y(Q):Y]);if(B.verbose)$.push([V6.schema,G],[V6.parentSchema,a._`${K}${q}`],[T0.default.data,J]);if(z)$.push([V6.propertyName,z])}});var uG=P((hG)=>{Object.defineProperty(hG,"__esModule",{value:!0});hG.boolOrEmptySchema=hG.topBoolOrEmptySchema=void 0;var fD=c4(),uD=p(),lD=b1(),mD={message:"boolean schema is false"};function cD(Q){let{gen:X,schema:Y,validateName:$}=Q;if(Y===!1)gG(Q,!1);else if(typeof Y=="object"&&Y.$async===!0)X.return(lD.default.data);else X.assign(uD._`${$}.errors`,null),X.return(!0)}hG.topBoolOrEmptySchema=cD;function pD(Q,X){let{gen:Y,schema:$}=Q;if($===!1)Y.var(X,!1),gG(Q);else Y.var(X,!0)}hG.boolOrEmptySchema=pD;function gG(Q,X){let{gen:Y,data:$}=Q,W={gen:Y,keyword:"false schema",data:$,schema:!1,schemaCode:!1,schemaValue:!1,params:{},it:Q};(0,fD.reportError)(W,mD,void 0,X)}});var V$=P((lG)=>{Object.defineProperty(lG,"__esModule",{value:!0});lG.getRules=lG.isJSONType=void 0;var iD=["string","number","integer","boolean","null","object","array"],nD=new Set(iD);function rD(Q){return typeof Q=="string"&&nD.has(Q)}lG.isJSONType=rD;function oD(){let Q={number:{type:"number",rules:[]},string:{type:"string",rules:[]},array:{type:"array",rules:[]},object:{type:"object",rules:[]}};return{types:{...Q,integer:!0,boolean:!0,null:!0},rules:[{rules:[]},Q.number,Q.string,Q.array,Q.object],post:{rules:[]},all:{},keywords:{}}}lG.getRules=oD});var q$=P((dG)=>{Object.defineProperty(dG,"__esModule",{value:!0});dG.shouldUseRule=dG.shouldUseGroup=dG.schemaHasRulesForType=void 0;function aD({schema:Q,self:X},Y){let $=X.RULES.types[Y];return $&&$!==!0&&cG(Q,$)}dG.schemaHasRulesForType=aD;function cG(Q,X){return X.rules.some((Y)=>pG(Q,Y))}dG.shouldUseGroup=cG;function pG(Q,X){var Y;return Q[X.keyword]!==void 0||((Y=X.definition.implements)===null||Y===void 0?void 0:Y.some(($)=>Q[$]!==void 0))}dG.shouldUseRule=pG});var p4=P((tG)=>{Object.defineProperty(tG,"__esModule",{value:!0});tG.reportTypeError=tG.checkDataTypes=tG.checkDataType=tG.coerceAndCheckDataType=tG.getJSONTypes=tG.getSchemaTypes=tG.DataType=void 0;var QO=V$(),XO=q$(),YO=c4(),c=p(),nG=e(),d6;(function(Q){Q[Q.Correct=0]="Correct",Q[Q.Wrong=1]="Wrong"})(d6||(tG.DataType=d6={}));function $O(Q){let X=rG(Q.type);if(X.includes("null")){if(Q.nullable===!1)throw Error("type: null contradicts nullable: false")}else{if(!X.length&&Q.nullable!==void 0)throw Error('"nullable" cannot be used without "type"');if(Q.nullable===!0)X.push("null")}return X}tG.getSchemaTypes=$O;function rG(Q){let X=Array.isArray(Q)?Q:Q?[Q]:[];if(X.every(QO.isJSONType))return X;throw Error("type must be JSONType or JSONType[]: "+X.join(","))}tG.getJSONTypes=rG;function WO(Q,X){let{gen:Y,data:$,opts:W}=Q,J=JO(X,W.coerceTypes),G=X.length>0&&!(J.length===0&&X.length===1&&(0,XO.schemaHasRulesForType)(Q,X[0]));if(G){let H=L$(X,$,W.strictNumbers,d6.Wrong);Y.if(H,()=>{if(J.length)GO(Q,X,J);else F$(Q)})}return G}tG.coerceAndCheckDataType=WO;var oG=new Set(["string","number","integer","boolean","null"]);function JO(Q,X){return X?Q.filter((Y)=>oG.has(Y)||X==="array"&&Y==="array"):[]}function GO(Q,X,Y){let{gen:$,data:W,opts:J}=Q,G=$.let("dataType",c._`typeof ${W}`),H=$.let("coerced",c._`undefined`);if(J.coerceTypes==="array")$.if(c._`${G} == 'object' && Array.isArray(${W}) && ${W}.length == 1`,()=>$.assign(W,c._`${W}[0]`).assign(G,c._`typeof ${W}`).if(L$(X,W,J.strictNumbers),()=>$.assign(H,W)));$.if(c._`${H} !== undefined`);for(let z of Y)if(oG.has(z)||z==="array"&&J.coerceTypes==="array")B(z);$.else(),F$(Q),$.endIf(),$.if(c._`${H} !== undefined`,()=>{$.assign(W,H),HO(Q,H)});function B(z){switch(z){case"string":$.elseIf(c._`${G} == "number" || ${G} == "boolean"`).assign(H,c._`"" + ${W}`).elseIf(c._`${W} === null`).assign(H,c._`""`);return;case"number":$.elseIf(c._`${G} == "boolean" || ${W} === null
              || (${G} == "string" && ${W} && ${W} == +${W})`).assign(H,c._`+${W}`);return;case"integer":$.elseIf(c._`${G} === "boolean" || ${W} === null
              || (${G} === "string" && ${W} && ${W} == +${W} && !(${W} % 1))`).assign(H,c._`+${W}`);return;case"boolean":$.elseIf(c._`${W} === "false" || ${W} === 0 || ${W} === null`).assign(H,!1).elseIf(c._`${W} === "true" || ${W} === 1`).assign(H,!0);return;case"null":$.elseIf(c._`${W} === "" || ${W} === 0 || ${W} === false`),$.assign(H,null);return;case"array":$.elseIf(c._`${G} === "string" || ${G} === "number"
              || ${G} === "boolean" || ${W} === null`).assign(H,c._`[${W}]`)}}}function HO({gen:Q,parentData:X,parentDataProperty:Y},$){Q.if(c._`${X} !== undefined`,()=>Q.assign(c._`${X}[${Y}]`,$))}function U$(Q,X,Y,$=d6.Correct){let W=$===d6.Correct?c.operators.EQ:c.operators.NEQ,J;switch(Q){case"null":return c._`${X} ${W} null`;case"array":J=c._`Array.isArray(${X})`;break;case"object":J=c._`${X} && typeof ${X} == "object" && !Array.isArray(${X})`;break;case"integer":J=G(c._`!(${X} % 1) && !isNaN(${X})`);break;case"number":J=G();break;default:return c._`typeof ${X} ${W} ${Q}`}return $===d6.Correct?J:(0,c.not)(J);function G(H=c.nil){return(0,c.and)(c._`typeof ${X} == "number"`,H,Y?c._`isFinite(${X})`:c.nil)}}tG.checkDataType=U$;function L$(Q,X,Y,$){if(Q.length===1)return U$(Q[0],X,Y,$);let W,J=(0,nG.toHash)(Q);if(J.array&&J.object){let G=c._`typeof ${X} != "object"`;W=J.null?G:c._`!${X} || ${G}`,delete J.null,delete J.array,delete J.object}else W=c.nil;if(J.number)delete J.integer;for(let G in J)W=(0,c.and)(W,U$(G,X,Y,$));return W}tG.checkDataTypes=L$;var BO={message:({schema:Q})=>`must be ${Q}`,params:({schema:Q,schemaValue:X})=>typeof Q=="string"?c._`{type: ${Q}}`:c._`{type: ${X}}`};function F$(Q){let X=zO(Q);(0,YO.reportError)(X,BO)}tG.reportTypeError=F$;function zO(Q){let{gen:X,data:Y,schema:$}=Q,W=(0,nG.schemaRefOrVal)(Q,$,"type");return{gen:X,keyword:"type",data:Y,schema:$.type,schemaCode:W,schemaValue:W,parentSchema:$,params:{},it:Q}}});var X3=P((eG)=>{Object.defineProperty(eG,"__esModule",{value:!0});eG.assignDefaults=void 0;var i6=p(),NO=e();function DO(Q,X){let{properties:Y,items:$}=Q.schema;if(X==="object"&&Y)for(let W in Y)sG(Q,W,Y[W].default);else if(X==="array"&&Array.isArray($))$.forEach((W,J)=>sG(Q,J,W.default))}eG.assignDefaults=DO;function sG(Q,X,Y){let{gen:$,compositeRule:W,data:J,opts:G}=Q;if(Y===void 0)return;let H=i6._`${J}${(0,i6.getProperty)(X)}`;if(W){(0,NO.checkStrictMode)(Q,`default is ignored for: ${H}`);return}let B=i6._`${H} === undefined`;if(G.useDefaults==="empty")B=i6._`${B} || ${H} === null || ${H} === ""`;$.if(B,i6._`${H} = ${(0,i6.stringify)(Y)}`)}});var n0=P((W3)=>{Object.defineProperty(W3,"__esModule",{value:!0});W3.validateUnion=W3.validateArray=W3.usePattern=W3.callValidateCode=W3.schemaProperties=W3.allSchemaProperties=W3.noPropertyInData=W3.propertyInData=W3.isOwnProperty=W3.hasPropFunc=W3.reportMissingProp=W3.checkMissingProp=W3.checkReportMissingProp=void 0;var B0=p(),N$=e(),i1=b1(),OO=e();function wO(Q,X){let{gen:Y,data:$,it:W}=Q;Y.if(O$(Y,$,X,W.opts.ownProperties),()=>{Q.setParams({missingProperty:B0._`${X}`},!0),Q.error()})}W3.checkReportMissingProp=wO;function MO({gen:Q,data:X,it:{opts:Y}},$,W){return(0,B0.or)(...$.map((J)=>(0,B0.and)(O$(Q,X,J,Y.ownProperties),B0._`${W} = ${J}`)))}W3.checkMissingProp=MO;function AO(Q,X){Q.setParams({missingProperty:X},!0),Q.error()}W3.reportMissingProp=AO;function Y3(Q){return Q.scopeValue("func",{ref:Object.prototype.hasOwnProperty,code:B0._`Object.prototype.hasOwnProperty`})}W3.hasPropFunc=Y3;function D$(Q,X,Y){return B0._`${Y3(Q)}.call(${X}, ${Y})`}W3.isOwnProperty=D$;function jO(Q,X,Y,$){let W=B0._`${X}${(0,B0.getProperty)(Y)} !== undefined`;return $?B0._`${W} && ${D$(Q,X,Y)}`:W}W3.propertyInData=jO;function O$(Q,X,Y,$){let W=B0._`${X}${(0,B0.getProperty)(Y)} === undefined`;return $?(0,B0.or)(W,(0,B0.not)(D$(Q,X,Y))):W}W3.noPropertyInData=O$;function $3(Q){return Q?Object.keys(Q).filter((X)=>X!=="__proto__"):[]}W3.allSchemaProperties=$3;function RO(Q,X){return $3(X).filter((Y)=>!(0,N$.alwaysValidSchema)(Q,X[Y]))}W3.schemaProperties=RO;function IO({schemaCode:Q,data:X,it:{gen:Y,topSchemaRef:$,schemaPath:W,errorPath:J},it:G},H,B,z){let K=z?B0._`${Q}, ${X}, ${$}${W}`:X,q=[[i1.default.instancePath,(0,B0.strConcat)(i1.default.instancePath,J)],[i1.default.parentData,G.parentData],[i1.default.parentDataProperty,G.parentDataProperty],[i1.default.rootData,i1.default.rootData]];if(G.opts.dynamicRef)q.push([i1.default.dynamicAnchors,i1.default.dynamicAnchors]);let U=B0._`${K}, ${Y.object(...q)}`;return B!==B0.nil?B0._`${H}.call(${B}, ${U})`:B0._`${H}(${U})`}W3.callValidateCode=IO;var EO=B0._`new RegExp`;function bO({gen:Q,it:{opts:X}},Y){let $=X.unicodeRegExp?"u":"",{regExp:W}=X.code,J=W(Y,$);return Q.scopeValue("pattern",{key:J.toString(),ref:J,code:B0._`${W.code==="new RegExp"?EO:(0,OO.useFunc)(Q,W)}(${Y}, ${$})`})}W3.usePattern=bO;function PO(Q){let{gen:X,data:Y,keyword:$,it:W}=Q,J=X.name("valid");if(W.allErrors){let H=X.let("valid",!0);return G(()=>X.assign(H,!1)),H}return X.var(J,!0),G(()=>X.break()),J;function G(H){let B=X.const("len",B0._`${Y}.length`);X.forRange("i",0,B,(z)=>{Q.subschema({keyword:$,dataProp:z,dataPropType:N$.Type.Num},J),X.if((0,B0.not)(J),H)})}}W3.validateArray=PO;function SO(Q){let{gen:X,schema:Y,keyword:$,it:W}=Q;if(!Array.isArray(Y))throw Error("ajv implementation error");if(Y.some((B)=>(0,N$.alwaysValidSchema)(W,B))&&!W.opts.unevaluated)return;let G=X.let("valid",!1),H=X.name("_valid");X.block(()=>Y.forEach((B,z)=>{let K=Q.subschema({keyword:$,schemaProp:z,compositeRule:!0},H);if(X.assign(G,B0._`${G} || ${H}`),!Q.mergeValidEvaluated(K,H))X.if((0,B0.not)(G))})),Q.result(G,()=>Q.reset(),()=>Q.error(!0))}W3.validateUnion=SO});var K3=P((B3)=>{Object.defineProperty(B3,"__esModule",{value:!0});B3.validateKeywordUsage=B3.validSchemaType=B3.funcKeywordCode=B3.macroKeywordCode=void 0;var x0=p(),q6=b1(),lO=n0(),mO=c4();function cO(Q,X){let{gen:Y,keyword:$,schema:W,parentSchema:J,it:G}=Q,H=X.macro.call(G.self,W,J,G),B=H3(Y,$,H);if(G.opts.validateSchema!==!1)G.self.validateSchema(H,!0);let z=Y.name("valid");Q.subschema({schema:H,schemaPath:x0.nil,errSchemaPath:`${G.errSchemaPath}/${$}`,topSchemaRef:B,compositeRule:!0},z),Q.pass(z,()=>Q.error(!0))}B3.macroKeywordCode=cO;function pO(Q,X){var Y;let{gen:$,keyword:W,schema:J,parentSchema:G,$data:H,it:B}=Q;iO(B,X);let z=!H&&X.compile?X.compile.call(B.self,J,G,B):X.validate,K=H3($,W,z),q=$.let("valid");Q.block$data(q,U),Q.ok((Y=X.valid)!==null&&Y!==void 0?Y:q);function U(){if(X.errors===!1){if(L(),X.modifying)G3(Q);N(()=>Q.error())}else{let w=X.async?V():F();if(X.modifying)G3(Q);N(()=>dO(Q,w))}}function V(){let w=$.let("ruleErrs",null);return $.try(()=>L(x0._`await `),(A)=>$.assign(q,!1).if(x0._`${A} instanceof ${B.ValidationError}`,()=>$.assign(w,x0._`${A}.errors`),()=>$.throw(A))),w}function F(){let w=x0._`${K}.errors`;return $.assign(w,null),L(x0.nil),w}function L(w=X.async?x0._`await `:x0.nil){let A=B.opts.passContext?q6.default.this:q6.default.self,R=!(("compile"in X)&&!H||X.schema===!1);$.assign(q,x0._`${w}${(0,lO.callValidateCode)(Q,K,A,R)}`,X.modifying)}function N(w){var A;$.if((0,x0.not)((A=X.valid)!==null&&A!==void 0?A:q),w)}}B3.funcKeywordCode=pO;function G3(Q){let{gen:X,data:Y,it:$}=Q;X.if($.parentData,()=>X.assign(Y,x0._`${$.parentData}[${$.parentDataProperty}]`))}function dO(Q,X){let{gen:Y}=Q;Y.if(x0._`Array.isArray(${X})`,()=>{Y.assign(q6.default.vErrors,x0._`${q6.default.vErrors} === null ? ${X} : ${q6.default.vErrors}.concat(${X})`).assign(q6.default.errors,x0._`${q6.default.vErrors}.length`),(0,mO.extendErrors)(Q)},()=>Q.error())}function iO({schemaEnv:Q},X){if(X.async&&!Q.$async)throw Error("async keyword in sync schema")}function H3(Q,X,Y){if(Y===void 0)throw Error(`keyword "${X}" failed to compile`);return Q.scopeValue("keyword",typeof Y=="function"?{ref:Y}:{ref:Y,code:(0,x0.stringify)(Y)})}function nO(Q,X,Y=!1){return!X.length||X.some(($)=>$==="array"?Array.isArray(Q):$==="object"?Q&&typeof Q=="object"&&!Array.isArray(Q):typeof Q==$||Y&&typeof Q>"u")}B3.validSchemaType=nO;function rO({schema:Q,opts:X,self:Y,errSchemaPath:$},W,J){if(Array.isArray(W.keyword)?!W.keyword.includes(J):W.keyword!==J)throw Error("ajv implementation error");let G=W.dependencies;if(G===null||G===void 0?void 0:G.some((H)=>!Object.prototype.hasOwnProperty.call(Q,H)))throw Error(`parent schema must have dependencies of ${J}: ${G.join(",")}`);if(W.validateSchema){if(!W.validateSchema(Q[J])){let B=`keyword "${J}" value is invalid at path "${$}": `+Y.errorsText(W.validateSchema.errors);if(X.validateSchema==="log")Y.logger.error(B);else throw Error(B)}}}B3.validateKeywordUsage=rO});var L3=P((q3)=>{Object.defineProperty(q3,"__esModule",{value:!0});q3.extendSubschemaMode=q3.extendSubschemaData=q3.getSubschema=void 0;var q1=p(),V3=e();function sO(Q,{keyword:X,schemaProp:Y,schema:$,schemaPath:W,errSchemaPath:J,topSchemaRef:G}){if(X!==void 0&&$!==void 0)throw Error('both "keyword" and "schema" passed, only one allowed');if(X!==void 0){let H=Q.schema[X];return Y===void 0?{schema:H,schemaPath:q1._`${Q.schemaPath}${(0,q1.getProperty)(X)}`,errSchemaPath:`${Q.errSchemaPath}/${X}`}:{schema:H[Y],schemaPath:q1._`${Q.schemaPath}${(0,q1.getProperty)(X)}${(0,q1.getProperty)(Y)}`,errSchemaPath:`${Q.errSchemaPath}/${X}/${(0,V3.escapeFragment)(Y)}`}}if($!==void 0){if(W===void 0||J===void 0||G===void 0)throw Error('"schemaPath", "errSchemaPath" and "topSchemaRef" are required with "schema"');return{schema:$,schemaPath:W,topSchemaRef:G,errSchemaPath:J}}throw Error('either "keyword" or "schema" must be passed')}q3.getSubschema=sO;function eO(Q,X,{dataProp:Y,dataPropType:$,data:W,dataTypes:J,propertyName:G}){if(W!==void 0&&Y!==void 0)throw Error('both "data" and "dataProp" passed, only one allowed');let{gen:H}=X;if(Y!==void 0){let{errorPath:z,dataPathArr:K,opts:q}=X,U=H.let("data",q1._`${X.data}${(0,q1.getProperty)(Y)}`,!0);B(U),Q.errorPath=q1.str`${z}${(0,V3.getErrorPath)(Y,$,q.jsPropertySyntax)}`,Q.parentDataProperty=q1._`${Y}`,Q.dataPathArr=[...K,Q.parentDataProperty]}if(W!==void 0){let z=W instanceof q1.Name?W:H.let("data",W,!0);if(B(z),G!==void 0)Q.propertyName=G}if(J)Q.dataTypes=J;function B(z){Q.data=z,Q.dataLevel=X.dataLevel+1,Q.dataTypes=[],X.definedProperties=new Set,Q.parentData=X.data,Q.dataNames=[...X.dataNames,z]}}q3.extendSubschemaData=eO;function Qw(Q,{jtdDiscriminator:X,jtdMetadata:Y,compositeRule:$,createErrors:W,allErrors:J}){if($!==void 0)Q.compositeRule=$;if(W!==void 0)Q.createErrors=W;if(J!==void 0)Q.allErrors=J;Q.jtdDiscriminator=X,Q.jtdMetadata=Y}q3.extendSubschemaMode=Qw});var w$=P((ev,F3)=>{F3.exports=function Q(X,Y){if(X===Y)return!0;if(X&&Y&&typeof X=="object"&&typeof Y=="object"){if(X.constructor!==Y.constructor)return!1;var $,W,J;if(Array.isArray(X)){if($=X.length,$!=Y.length)return!1;for(W=$;W--!==0;)if(!Q(X[W],Y[W]))return!1;return!0}if(X.constructor===RegExp)return X.source===Y.source&&X.flags===Y.flags;if(X.valueOf!==Object.prototype.valueOf)return X.valueOf()===Y.valueOf();if(X.toString!==Object.prototype.toString)return X.toString()===Y.toString();if(J=Object.keys(X),$=J.length,$!==Object.keys(Y).length)return!1;for(W=$;W--!==0;)if(!Object.prototype.hasOwnProperty.call(Y,J[W]))return!1;for(W=$;W--!==0;){var G=J[W];if(!Q(X[G],Y[G]))return!1}return!0}return X!==X&&Y!==Y}});var D3=P((Q_,N3)=>{var n1=N3.exports=function(Q,X,Y){if(typeof X=="function")Y=X,X={};Y=X.cb||Y;var $=typeof Y=="function"?Y:Y.pre||function(){},W=Y.post||function(){};_8(X,$,W,Q,"",Q)};n1.keywords={additionalItems:!0,items:!0,contains:!0,additionalProperties:!0,propertyNames:!0,not:!0,if:!0,then:!0,else:!0};n1.arrayKeywords={items:!0,allOf:!0,anyOf:!0,oneOf:!0};n1.propsKeywords={$defs:!0,definitions:!0,properties:!0,patternProperties:!0,dependencies:!0};n1.skipKeywords={default:!0,enum:!0,const:!0,required:!0,maximum:!0,minimum:!0,exclusiveMaximum:!0,exclusiveMinimum:!0,multipleOf:!0,maxLength:!0,minLength:!0,pattern:!0,format:!0,maxItems:!0,minItems:!0,uniqueItems:!0,maxProperties:!0,minProperties:!0};function _8(Q,X,Y,$,W,J,G,H,B,z){if($&&typeof $=="object"&&!Array.isArray($)){X($,W,J,G,H,B,z);for(var K in $){var q=$[K];if(Array.isArray(q)){if(K in n1.arrayKeywords)for(var U=0;U<q.length;U++)_8(Q,X,Y,q[U],W+"/"+K+"/"+U,J,W,K,$,U)}else if(K in n1.propsKeywords){if(q&&typeof q=="object")for(var V in q)_8(Q,X,Y,q[V],W+"/"+K+"/"+$w(V),J,W,K,$,V)}else if(K in n1.keywords||Q.allKeys&&!(K in n1.skipKeywords))_8(Q,X,Y,q,W+"/"+K,J,W,K,$)}Y($,W,J,G,H,B,z)}}function $w(Q){return Q.replace(/~/g,"~0").replace(/\//g,"~1")}});var d4=P((A3)=>{Object.defineProperty(A3,"__esModule",{value:!0});A3.getSchemaRefs=A3.resolveUrl=A3.normalizeId=A3._getFullPath=A3.getFullPath=A3.inlineRef=void 0;var Ww=e(),Jw=w$(),Gw=D3(),Hw=new Set(["type","format","pattern","maxLength","minLength","maxProperties","minProperties","maxItems","minItems","maximum","minimum","uniqueItems","multipleOf","required","enum","const"]);function Bw(Q,X=!0){if(typeof Q=="boolean")return!0;if(X===!0)return!M$(Q);if(!X)return!1;return O3(Q)<=X}A3.inlineRef=Bw;var zw=new Set(["$ref","$recursiveRef","$recursiveAnchor","$dynamicRef","$dynamicAnchor"]);function M$(Q){for(let X in Q){if(zw.has(X))return!0;let Y=Q[X];if(Array.isArray(Y)&&Y.some(M$))return!0;if(typeof Y=="object"&&M$(Y))return!0}return!1}function O3(Q){let X=0;for(let Y in Q){if(Y==="$ref")return 1/0;if(X++,Hw.has(Y))continue;if(typeof Q[Y]=="object")(0,Ww.eachItem)(Q[Y],($)=>X+=O3($));if(X===1/0)return 1/0}return X}function w3(Q,X="",Y){if(Y!==!1)X=n6(X);let $=Q.parse(X);return M3(Q,$)}A3.getFullPath=w3;function M3(Q,X){return Q.serialize(X).split("#")[0]+"#"}A3._getFullPath=M3;var Kw=/#\/?$/;function n6(Q){return Q?Q.replace(Kw,""):""}A3.normalizeId=n6;function Vw(Q,X,Y){return Y=n6(Y),Q.resolve(X,Y)}A3.resolveUrl=Vw;var qw=/^[a-z_][-a-z0-9._]*$/i;function Uw(Q,X){if(typeof Q=="boolean")return{};let{schemaId:Y,uriResolver:$}=this.opts,W=n6(Q[Y]||X),J={"":W},G=w3($,W,!1),H={},B=new Set;return Gw(Q,{allKeys:!0},(q,U,V,F)=>{if(F===void 0)return;let L=G+U,N=J[F];if(typeof q[Y]=="string")N=w.call(this,q[Y]);A.call(this,q.$anchor),A.call(this,q.$dynamicAnchor),J[U]=N;function w(R){let S=this.opts.uriResolver.resolve;if(R=n6(N?S(N,R):R),B.has(R))throw K(R);B.add(R);let C=this.refs[R];if(typeof C=="string")C=this.refs[C];if(typeof C=="object")z(q,C.schema,R);else if(R!==n6(L))if(R[0]==="#")z(q,H[R],R),H[R]=q;else this.refs[R]=L;return R}function A(R){if(typeof R=="string"){if(!qw.test(R))throw Error(`invalid anchor "${R}"`);w.call(this,`#${R}`)}}}),H;function z(q,U,V){if(U!==void 0&&!Jw(q,U))throw K(V)}function K(q){return Error(`reference "${q}" resolves to more than one schema`)}}A3.getSchemaRefs=Uw});var r4=P((g3)=>{Object.defineProperty(g3,"__esModule",{value:!0});g3.getData=g3.KeywordCxt=g3.validateFunctionCode=void 0;var P3=uG(),R3=p4(),j$=q$(),T8=p4(),ww=X3(),n4=K3(),A$=L3(),T=p(),u=b1(),Mw=d4(),P1=e(),i4=c4();function Aw(Q){if(C3(Q)){if(k3(Q),Z3(Q)){Iw(Q);return}}S3(Q,()=>(0,P3.topBoolOrEmptySchema)(Q))}g3.validateFunctionCode=Aw;function S3({gen:Q,validateName:X,schema:Y,schemaEnv:$,opts:W},J){if(W.code.es5)Q.func(X,T._`${u.default.data}, ${u.default.valCxt}`,$.$async,()=>{Q.code(T._`"use strict"; ${I3(Y,W)}`),Rw(Q,W),Q.code(J)});else Q.func(X,T._`${u.default.data}, ${jw(W)}`,$.$async,()=>Q.code(I3(Y,W)).code(J))}function jw(Q){return T._`{${u.default.instancePath}="", ${u.default.parentData}, ${u.default.parentDataProperty}, ${u.default.rootData}=${u.default.data}${Q.dynamicRef?T._`, ${u.default.dynamicAnchors}={}`:T.nil}}={}`}function Rw(Q,X){Q.if(u.default.valCxt,()=>{if(Q.var(u.default.instancePath,T._`${u.default.valCxt}.${u.default.instancePath}`),Q.var(u.default.parentData,T._`${u.default.valCxt}.${u.default.parentData}`),Q.var(u.default.parentDataProperty,T._`${u.default.valCxt}.${u.default.parentDataProperty}`),Q.var(u.default.rootData,T._`${u.default.valCxt}.${u.default.rootData}`),X.dynamicRef)Q.var(u.default.dynamicAnchors,T._`${u.default.valCxt}.${u.default.dynamicAnchors}`)},()=>{if(Q.var(u.default.instancePath,T._`""`),Q.var(u.default.parentData,T._`undefined`),Q.var(u.default.parentDataProperty,T._`undefined`),Q.var(u.default.rootData,u.default.data),X.dynamicRef)Q.var(u.default.dynamicAnchors,T._`{}`)})}function Iw(Q){let{schema:X,opts:Y,gen:$}=Q;S3(Q,()=>{if(Y.$comment&&X.$comment)_3(Q);if(Zw(Q),$.let(u.default.vErrors,null),$.let(u.default.errors,0),Y.unevaluated)Ew(Q);v3(Q),vw(Q)});return}function Ew(Q){let{gen:X,validateName:Y}=Q;Q.evaluated=X.const("evaluated",T._`${Y}.evaluated`),X.if(T._`${Q.evaluated}.dynamicProps`,()=>X.assign(T._`${Q.evaluated}.props`,T._`undefined`)),X.if(T._`${Q.evaluated}.dynamicItems`,()=>X.assign(T._`${Q.evaluated}.items`,T._`undefined`))}function I3(Q,X){let Y=typeof Q=="object"&&Q[X.schemaId];return Y&&(X.code.source||X.code.process)?T._`/*# sourceURL=${Y} */`:T.nil}function bw(Q,X){if(C3(Q)){if(k3(Q),Z3(Q)){Pw(Q,X);return}}(0,P3.boolOrEmptySchema)(Q,X)}function Z3({schema:Q,self:X}){if(typeof Q=="boolean")return!Q;for(let Y in Q)if(X.RULES.all[Y])return!0;return!1}function C3(Q){return typeof Q.schema!="boolean"}function Pw(Q,X){let{schema:Y,gen:$,opts:W}=Q;if(W.$comment&&Y.$comment)_3(Q);Cw(Q),kw(Q);let J=$.const("_errs",u.default.errors);v3(Q,J),$.var(X,T._`${J} === ${u.default.errors}`)}function k3(Q){(0,P1.checkUnknownRules)(Q),Sw(Q)}function v3(Q,X){if(Q.opts.jtd)return E3(Q,[],!1,X);let Y=(0,R3.getSchemaTypes)(Q.schema),$=(0,R3.coerceAndCheckDataType)(Q,Y);E3(Q,Y,!$,X)}function Sw(Q){let{schema:X,errSchemaPath:Y,opts:$,self:W}=Q;if(X.$ref&&$.ignoreKeywordsWithRef&&(0,P1.schemaHasRulesButRef)(X,W.RULES))W.logger.warn(`$ref: keywords ignored in schema at path "${Y}"`)}function Zw(Q){let{schema:X,opts:Y}=Q;if(X.default!==void 0&&Y.useDefaults&&Y.strictSchema)(0,P1.checkStrictMode)(Q,"default is ignored in the schema root")}function Cw(Q){let X=Q.schema[Q.opts.schemaId];if(X)Q.baseId=(0,Mw.resolveUrl)(Q.opts.uriResolver,Q.baseId,X)}function kw(Q){if(Q.schema.$async&&!Q.schemaEnv.$async)throw Error("async schema in sync schema")}function _3({gen:Q,schemaEnv:X,schema:Y,errSchemaPath:$,opts:W}){let J=Y.$comment;if(W.$comment===!0)Q.code(T._`${u.default.self}.logger.log(${J})`);else if(typeof W.$comment=="function"){let G=T.str`${$}/$comment`,H=Q.scopeValue("root",{ref:X.root});Q.code(T._`${u.default.self}.opts.$comment(${J}, ${G}, ${H}.schema)`)}}function vw(Q){let{gen:X,schemaEnv:Y,validateName:$,ValidationError:W,opts:J}=Q;if(Y.$async)X.if(T._`${u.default.errors} === 0`,()=>X.return(u.default.data),()=>X.throw(T._`new ${W}(${u.default.vErrors})`));else{if(X.assign(T._`${$}.errors`,u.default.vErrors),J.unevaluated)_w(Q);X.return(T._`${u.default.errors} === 0`)}}function _w({gen:Q,evaluated:X,props:Y,items:$}){if(Y instanceof T.Name)Q.assign(T._`${X}.props`,Y);if($ instanceof T.Name)Q.assign(T._`${X}.items`,$)}function E3(Q,X,Y,$){let{gen:W,schema:J,data:G,allErrors:H,opts:B,self:z}=Q,{RULES:K}=z;if(J.$ref&&(B.ignoreKeywordsWithRef||!(0,P1.schemaHasRulesButRef)(J,K))){W.block(()=>x3(Q,"$ref",K.all.$ref.definition));return}if(!B.jtd)Tw(Q,X);W.block(()=>{for(let U of K.rules)q(U);q(K.post)});function q(U){if(!(0,j$.shouldUseGroup)(J,U))return;if(U.type){if(W.if((0,T8.checkDataType)(U.type,G,B.strictNumbers)),b3(Q,U),X.length===1&&X[0]===U.type&&Y)W.else(),(0,T8.reportTypeError)(Q);W.endIf()}else b3(Q,U);if(!H)W.if(T._`${u.default.errors} === ${$||0}`)}}function b3(Q,X){let{gen:Y,schema:$,opts:{useDefaults:W}}=Q;if(W)(0,ww.assignDefaults)(Q,X.type);Y.block(()=>{for(let J of X.rules)if((0,j$.shouldUseRule)($,J))x3(Q,J.keyword,J.definition,X.type)})}function Tw(Q,X){if(Q.schemaEnv.meta||!Q.opts.strictTypes)return;if(xw(Q,X),!Q.opts.allowUnionTypes)yw(Q,X);gw(Q,Q.dataTypes)}function xw(Q,X){if(!X.length)return;if(!Q.dataTypes.length){Q.dataTypes=X;return}X.forEach((Y)=>{if(!T3(Q.dataTypes,Y))R$(Q,`type "${Y}" not allowed by context "${Q.dataTypes.join(",")}"`)}),fw(Q,X)}function yw(Q,X){if(X.length>1&&!(X.length===2&&X.includes("null")))R$(Q,"use allowUnionTypes to allow union type keyword")}function gw(Q,X){let Y=Q.self.RULES.all;for(let $ in Y){let W=Y[$];if(typeof W=="object"&&(0,j$.shouldUseRule)(Q.schema,W)){let{type:J}=W.definition;if(J.length&&!J.some((G)=>hw(X,G)))R$(Q,`missing type "${J.join(",")}" for keyword "${$}"`)}}}function hw(Q,X){return Q.includes(X)||X==="number"&&Q.includes("integer")}function T3(Q,X){return Q.includes(X)||X==="integer"&&Q.includes("number")}function fw(Q,X){let Y=[];for(let $ of Q.dataTypes)if(T3(X,$))Y.push($);else if(X.includes("integer")&&$==="number")Y.push("integer");Q.dataTypes=Y}function R$(Q,X){let Y=Q.schemaEnv.baseId+Q.errSchemaPath;X+=` at "${Y}" (strictTypes)`,(0,P1.checkStrictMode)(Q,X,Q.opts.strictTypes)}class I${constructor(Q,X,Y){if((0,n4.validateKeywordUsage)(Q,X,Y),this.gen=Q.gen,this.allErrors=Q.allErrors,this.keyword=Y,this.data=Q.data,this.schema=Q.schema[Y],this.$data=X.$data&&Q.opts.$data&&this.schema&&this.schema.$data,this.schemaValue=(0,P1.schemaRefOrVal)(Q,this.schema,Y,this.$data),this.schemaType=X.schemaType,this.parentSchema=Q.schema,this.params={},this.it=Q,this.def=X,this.$data)this.schemaCode=Q.gen.const("vSchema",y3(this.$data,Q));else if(this.schemaCode=this.schemaValue,!(0,n4.validSchemaType)(this.schema,X.schemaType,X.allowUndefined))throw Error(`${Y} value must be ${JSON.stringify(X.schemaType)}`);if("code"in X?X.trackErrors:X.errors!==!1)this.errsCount=Q.gen.const("_errs",u.default.errors)}result(Q,X,Y){this.failResult((0,T.not)(Q),X,Y)}failResult(Q,X,Y){if(this.gen.if(Q),Y)Y();else this.error();if(X){if(this.gen.else(),X(),this.allErrors)this.gen.endIf()}else if(this.allErrors)this.gen.endIf();else this.gen.else()}pass(Q,X){this.failResult((0,T.not)(Q),void 0,X)}fail(Q){if(Q===void 0){if(this.error(),!this.allErrors)this.gen.if(!1);return}if(this.gen.if(Q),this.error(),this.allErrors)this.gen.endIf();else this.gen.else()}fail$data(Q){if(!this.$data)return this.fail(Q);let{schemaCode:X}=this;this.fail(T._`${X} !== undefined && (${(0,T.or)(this.invalid$data(),Q)})`)}error(Q,X,Y){if(X){this.setParams(X),this._error(Q,Y),this.setParams({});return}this._error(Q,Y)}_error(Q,X){(Q?i4.reportExtraError:i4.reportError)(this,this.def.error,X)}$dataError(){(0,i4.reportError)(this,this.def.$dataError||i4.keyword$DataError)}reset(){if(this.errsCount===void 0)throw Error('add "trackErrors" to keyword definition');(0,i4.resetErrorsCount)(this.gen,this.errsCount)}ok(Q){if(!this.allErrors)this.gen.if(Q)}setParams(Q,X){if(X)Object.assign(this.params,Q);else this.params=Q}block$data(Q,X,Y=T.nil){this.gen.block(()=>{this.check$data(Q,Y),X()})}check$data(Q=T.nil,X=T.nil){if(!this.$data)return;let{gen:Y,schemaCode:$,schemaType:W,def:J}=this;if(Y.if((0,T.or)(T._`${$} === undefined`,X)),Q!==T.nil)Y.assign(Q,!0);if(W.length||J.validateSchema){if(Y.elseIf(this.invalid$data()),this.$dataError(),Q!==T.nil)Y.assign(Q,!1)}Y.else()}invalid$data(){let{gen:Q,schemaCode:X,schemaType:Y,def:$,it:W}=this;return(0,T.or)(J(),G());function J(){if(Y.length){if(!(X instanceof T.Name))throw Error("ajv implementation error");let H=Array.isArray(Y)?Y:[Y];return T._`${(0,T8.checkDataTypes)(H,X,W.opts.strictNumbers,T8.DataType.Wrong)}`}return T.nil}function G(){if($.validateSchema){let H=Q.scopeValue("validate$data",{ref:$.validateSchema});return T._`!${H}(${X})`}return T.nil}}subschema(Q,X){let Y=(0,A$.getSubschema)(this.it,Q);(0,A$.extendSubschemaData)(Y,this.it,Q),(0,A$.extendSubschemaMode)(Y,Q);let $={...this.it,...Y,items:void 0,props:void 0};return bw($,X),$}mergeEvaluated(Q,X){let{it:Y,gen:$}=this;if(!Y.opts.unevaluated)return;if(Y.props!==!0&&Q.props!==void 0)Y.props=P1.mergeEvaluated.props($,Q.props,Y.props,X);if(Y.items!==!0&&Q.items!==void 0)Y.items=P1.mergeEvaluated.items($,Q.items,Y.items,X)}mergeValidEvaluated(Q,X){let{it:Y,gen:$}=this;if(Y.opts.unevaluated&&(Y.props!==!0||Y.items!==!0))return $.if(X,()=>this.mergeEvaluated(Q,T.Name)),!0}}g3.KeywordCxt=I$;function x3(Q,X,Y,$){let W=new I$(Q,Y,X);if("code"in Y)Y.code(W,$);else if(W.$data&&Y.validate)(0,n4.funcKeywordCode)(W,Y);else if("macro"in Y)(0,n4.macroKeywordCode)(W,Y);else if(Y.compile||Y.validate)(0,n4.funcKeywordCode)(W,Y)}var uw=/^\/(?:[^~]|~0|~1)*$/,lw=/^([0-9]+)(#|\/(?:[^~]|~0|~1)*)?$/;function y3(Q,{dataLevel:X,dataNames:Y,dataPathArr:$}){let W,J;if(Q==="")return u.default.rootData;if(Q[0]==="/"){if(!uw.test(Q))throw Error(`Invalid JSON-pointer: ${Q}`);W=Q,J=u.default.rootData}else{let z=lw.exec(Q);if(!z)throw Error(`Invalid JSON-pointer: ${Q}`);let K=+z[1];if(W=z[2],W==="#"){if(K>=X)throw Error(B("property/index",K));return $[X-K]}if(K>X)throw Error(B("data",K));if(J=Y[X-K],!W)return J}let G=J,H=W.split("/");for(let z of H)if(z)J=T._`${J}${(0,T.getProperty)((0,P1.unescapeJsonPointer)(z))}`,G=T._`${G} && ${J}`;return G;function B(z,K){return`Cannot access ${z} ${K} levels up, current level is ${X}`}}g3.getData=y3});var x8=P((u3)=>{Object.defineProperty(u3,"__esModule",{value:!0});class f3 extends Error{constructor(Q){super("validation failed");this.errors=Q,this.ajv=this.validation=!0}}u3.default=f3});var o4=P((m3)=>{Object.defineProperty(m3,"__esModule",{value:!0});var E$=d4();class l3 extends Error{constructor(Q,X,Y,$){super($||`can't resolve reference ${Y} from id ${X}`);this.missingRef=(0,E$.resolveUrl)(Q,X,Y),this.missingSchema=(0,E$.normalizeId)((0,E$.getFullPath)(Q,this.missingRef))}}m3.default=l3});var g8=P((d3)=>{Object.defineProperty(d3,"__esModule",{value:!0});d3.resolveSchema=d3.getCompilingSchema=d3.resolveRef=d3.compileSchema=d3.SchemaEnv=void 0;var X1=p(),iw=x8(),U6=b1(),Y1=d4(),c3=e(),nw=r4();class t4{constructor(Q){var X;this.refs={},this.dynamicAnchors={};let Y;if(typeof Q.schema=="object")Y=Q.schema;this.schema=Q.schema,this.schemaId=Q.schemaId,this.root=Q.root||this,this.baseId=(X=Q.baseId)!==null&&X!==void 0?X:(0,Y1.normalizeId)(Y===null||Y===void 0?void 0:Y[Q.schemaId||"$id"]),this.schemaPath=Q.schemaPath,this.localRefs=Q.localRefs,this.meta=Q.meta,this.$async=Y===null||Y===void 0?void 0:Y.$async,this.refs={}}}d3.SchemaEnv=t4;function P$(Q){let X=p3.call(this,Q);if(X)return X;let Y=(0,Y1.getFullPath)(this.opts.uriResolver,Q.root.baseId),{es5:$,lines:W}=this.opts.code,{ownProperties:J}=this.opts,G=new X1.CodeGen(this.scope,{es5:$,lines:W,ownProperties:J}),H;if(Q.$async)H=G.scopeValue("Error",{ref:iw.default,code:X1._`require("ajv/dist/runtime/validation_error").default`});let B=G.scopeName("validate");Q.validateName=B;let z={gen:G,allErrors:this.opts.allErrors,data:U6.default.data,parentData:U6.default.parentData,parentDataProperty:U6.default.parentDataProperty,dataNames:[U6.default.data],dataPathArr:[X1.nil],dataLevel:0,dataTypes:[],definedProperties:new Set,topSchemaRef:G.scopeValue("schema",this.opts.code.source===!0?{ref:Q.schema,code:(0,X1.stringify)(Q.schema)}:{ref:Q.schema}),validateName:B,ValidationError:H,schema:Q.schema,schemaEnv:Q,rootId:Y,baseId:Q.baseId||Y,schemaPath:X1.nil,errSchemaPath:Q.schemaPath||(this.opts.jtd?"":"#"),errorPath:X1._`""`,opts:this.opts,self:this},K;try{this._compilations.add(Q),(0,nw.validateFunctionCode)(z),G.optimize(this.opts.code.optimize);let q=G.toString();if(K=`${G.scopeRefs(U6.default.scope)}return ${q}`,this.opts.code.process)K=this.opts.code.process(K,Q);let V=Function(`${U6.default.self}`,`${U6.default.scope}`,K)(this,this.scope.get());if(this.scope.value(B,{ref:V}),V.errors=null,V.schema=Q.schema,V.schemaEnv=Q,Q.$async)V.$async=!0;if(this.opts.code.source===!0)V.source={validateName:B,validateCode:q,scopeValues:G._values};if(this.opts.unevaluated){let{props:F,items:L}=z;if(V.evaluated={props:F instanceof X1.Name?void 0:F,items:L instanceof X1.Name?void 0:L,dynamicProps:F instanceof X1.Name,dynamicItems:L instanceof X1.Name},V.source)V.source.evaluated=(0,X1.stringify)(V.evaluated)}return Q.validate=V,Q}catch(q){if(delete Q.validate,delete Q.validateName,K)this.logger.error("Error compiling schema, function code:",K);throw q}finally{this._compilations.delete(Q)}}d3.compileSchema=P$;function rw(Q,X,Y){var $;Y=(0,Y1.resolveUrl)(this.opts.uriResolver,X,Y);let W=Q.refs[Y];if(W)return W;let J=aw.call(this,Q,Y);if(J===void 0){let G=($=Q.localRefs)===null||$===void 0?void 0:$[Y],{schemaId:H}=this.opts;if(G)J=new t4({schema:G,schemaId:H,root:Q,baseId:X})}if(J===void 0)return;return Q.refs[Y]=ow.call(this,J)}d3.resolveRef=rw;function ow(Q){if((0,Y1.inlineRef)(Q.schema,this.opts.inlineRefs))return Q.schema;return Q.validate?Q:P$.call(this,Q)}function p3(Q){for(let X of this._compilations)if(tw(X,Q))return X}d3.getCompilingSchema=p3;function tw(Q,X){return Q.schema===X.schema&&Q.root===X.root&&Q.baseId===X.baseId}function aw(Q,X){let Y;while(typeof(Y=this.refs[X])=="string")X=Y;return Y||this.schemas[X]||y8.call(this,Q,X)}function y8(Q,X){let Y=this.opts.uriResolver.parse(X),$=(0,Y1._getFullPath)(this.opts.uriResolver,Y),W=(0,Y1.getFullPath)(this.opts.uriResolver,Q.baseId,void 0);if(Object.keys(Q.schema).length>0&&$===W)return b$.call(this,Y,Q);let J=(0,Y1.normalizeId)($),G=this.refs[J]||this.schemas[J];if(typeof G=="string"){let H=y8.call(this,Q,G);if(typeof(H===null||H===void 0?void 0:H.schema)!=="object")return;return b$.call(this,Y,H)}if(typeof(G===null||G===void 0?void 0:G.schema)!=="object")return;if(!G.validate)P$.call(this,G);if(J===(0,Y1.normalizeId)(X)){let{schema:H}=G,{schemaId:B}=this.opts,z=H[B];if(z)W=(0,Y1.resolveUrl)(this.opts.uriResolver,W,z);return new t4({schema:H,schemaId:B,root:Q,baseId:W})}return b$.call(this,Y,G)}d3.resolveSchema=y8;var sw=new Set(["properties","patternProperties","enum","dependencies","definitions"]);function b$(Q,{baseId:X,schema:Y,root:$}){var W;if(((W=Q.fragment)===null||W===void 0?void 0:W[0])!=="/")return;for(let H of Q.fragment.slice(1).split("/")){if(typeof Y==="boolean")return;let B=Y[(0,c3.unescapeFragment)(H)];if(B===void 0)return;Y=B;let z=typeof Y==="object"&&Y[this.opts.schemaId];if(!sw.has(H)&&z)X=(0,Y1.resolveUrl)(this.opts.uriResolver,X,z)}let J;if(typeof Y!="boolean"&&Y.$ref&&!(0,c3.schemaHasRulesButRef)(Y,this.RULES)){let H=(0,Y1.resolveUrl)(this.opts.uriResolver,X,Y.$ref);J=y8.call(this,$,H)}let{schemaId:G}=this.opts;if(J=J||new t4({schema:Y,schemaId:G,root:$,baseId:X}),J.schema!==J.root.schema)return J;return}});var n3=P((G_,$M)=>{$M.exports={$id:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#",description:"Meta-schema for $data reference (JSON AnySchema extension proposal)",type:"object",required:["$data"],properties:{$data:{type:"string",anyOf:[{format:"relative-json-pointer"},{format:"json-pointer"}]}},additionalProperties:!1}});var o3=P((H_,r3)=>{var WM={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,a:10,A:10,b:11,B:11,c:12,C:12,d:13,D:13,e:14,E:14,f:15,F:15};r3.exports={HEX:WM}});var $H=P((B_,YH)=>{var{HEX:JM}=o3(),GM=/^(?:(?:25[0-5]|2[0-4]\d|1\d{2}|[1-9]\d|\d)\.){3}(?:25[0-5]|2[0-4]\d|1\d{2}|[1-9]\d|\d)$/u;function e3(Q){if(XH(Q,".")<3)return{host:Q,isIPV4:!1};let X=Q.match(GM)||[],[Y]=X;if(Y)return{host:BM(Y,"."),isIPV4:!0};else return{host:Q,isIPV4:!1}}function S$(Q,X=!1){let Y="",$=!0;for(let W of Q){if(JM[W]===void 0)return;if(W!=="0"&&$===!0)$=!1;if(!$)Y+=W}if(X&&Y.length===0)Y="0";return Y}function HM(Q){let X=0,Y={error:!1,address:"",zone:""},$=[],W=[],J=!1,G=!1,H=!1;function B(){if(W.length){if(J===!1){let z=S$(W);if(z!==void 0)$.push(z);else return Y.error=!0,!1}W.length=0}return!0}for(let z=0;z<Q.length;z++){let K=Q[z];if(K==="["||K==="]")continue;if(K===":"){if(G===!0)H=!0;if(!B())break;if(X++,$.push(":"),X>7){Y.error=!0;break}if(z-1>=0&&Q[z-1]===":")G=!0;continue}else if(K==="%"){if(!B())break;J=!0}else{W.push(K);continue}}if(W.length)if(J)Y.zone=W.join("");else if(H)$.push(W.join(""));else $.push(S$(W));return Y.address=$.join(""),Y}function QH(Q){if(XH(Q,":")<2)return{host:Q,isIPV6:!1};let X=HM(Q);if(!X.error){let{address:Y,address:$}=X;if(X.zone)Y+="%"+X.zone,$+="%25"+X.zone;return{host:Y,escapedHost:$,isIPV6:!0}}else return{host:Q,isIPV6:!1}}function BM(Q,X){let Y="",$=!0,W=Q.length;for(let J=0;J<W;J++){let G=Q[J];if(G==="0"&&$){if(J+1<=W&&Q[J+1]===X||J+1===W)Y+=G,$=!1}else{if(G===X)$=!0;else $=!1;Y+=G}}return Y}function XH(Q,X){let Y=0;for(let $=0;$<Q.length;$++)if(Q[$]===X)Y++;return Y}var t3=/^\.\.?\//u,a3=/^\/\.(?:\/|$)/u,s3=/^\/\.\.(?:\/|$)/u,zM=/^\/?(?:.|\n)*?(?=\/|$)/u;function KM(Q){let X=[];while(Q.length)if(Q.match(t3))Q=Q.replace(t3,"");else if(Q.match(a3))Q=Q.replace(a3,"/");else if(Q.match(s3))Q=Q.replace(s3,"/"),X.pop();else if(Q==="."||Q==="..")Q="";else{let Y=Q.match(zM);if(Y){let $=Y[0];Q=Q.slice($.length),X.push($)}else throw Error("Unexpected dot segment condition")}return X.join("")}function VM(Q,X){let Y=X!==!0?escape:unescape;if(Q.scheme!==void 0)Q.scheme=Y(Q.scheme);if(Q.userinfo!==void 0)Q.userinfo=Y(Q.userinfo);if(Q.host!==void 0)Q.host=Y(Q.host);if(Q.path!==void 0)Q.path=Y(Q.path);if(Q.query!==void 0)Q.query=Y(Q.query);if(Q.fragment!==void 0)Q.fragment=Y(Q.fragment);return Q}function qM(Q){let X=[];if(Q.userinfo!==void 0)X.push(Q.userinfo),X.push("@");if(Q.host!==void 0){let Y=unescape(Q.host),$=e3(Y);if($.isIPV4)Y=$.host;else{let W=QH($.host);if(W.isIPV6===!0)Y=`[${W.escapedHost}]`;else Y=Q.host}X.push(Y)}if(typeof Q.port==="number"||typeof Q.port==="string")X.push(":"),X.push(String(Q.port));return X.length?X.join(""):void 0}YH.exports={recomposeAuthority:qM,normalizeComponentEncoding:VM,removeDotSegments:KM,normalizeIPv4:e3,normalizeIPv6:QH,stringArrayToHexStripped:S$}});var zH=P((z_,BH)=>{var UM=/^[\da-f]{8}-[\da-f]{4}-[\da-f]{4}-[\da-f]{4}-[\da-f]{12}$/iu,LM=/([\da-z][\d\-a-z]{0,31}):((?:[\w!$'()*+,\-.:;=@]|%[\da-f]{2})+)/iu;function WH(Q){return typeof Q.secure==="boolean"?Q.secure:String(Q.scheme).toLowerCase()==="wss"}function JH(Q){if(!Q.host)Q.error=Q.error||"HTTP URIs must have a host.";return Q}function GH(Q){let X=String(Q.scheme).toLowerCase()==="https";if(Q.port===(X?443:80)||Q.port==="")Q.port=void 0;if(!Q.path)Q.path="/";return Q}function FM(Q){return Q.secure=WH(Q),Q.resourceName=(Q.path||"/")+(Q.query?"?"+Q.query:""),Q.path=void 0,Q.query=void 0,Q}function NM(Q){if(Q.port===(WH(Q)?443:80)||Q.port==="")Q.port=void 0;if(typeof Q.secure==="boolean")Q.scheme=Q.secure?"wss":"ws",Q.secure=void 0;if(Q.resourceName){let[X,Y]=Q.resourceName.split("?");Q.path=X&&X!=="/"?X:void 0,Q.query=Y,Q.resourceName=void 0}return Q.fragment=void 0,Q}function DM(Q,X){if(!Q.path)return Q.error="URN can not be parsed",Q;let Y=Q.path.match(LM);if(Y){let $=X.scheme||Q.scheme||"urn";Q.nid=Y[1].toLowerCase(),Q.nss=Y[2];let W=`${$}:${X.nid||Q.nid}`,J=Z$[W];if(Q.path=void 0,J)Q=J.parse(Q,X)}else Q.error=Q.error||"URN can not be parsed.";return Q}function OM(Q,X){let Y=X.scheme||Q.scheme||"urn",$=Q.nid.toLowerCase(),W=`${Y}:${X.nid||$}`,J=Z$[W];if(J)Q=J.serialize(Q,X);let G=Q,H=Q.nss;return G.path=`${$||X.nid}:${H}`,X.skipEscape=!0,G}function wM(Q,X){let Y=Q;if(Y.uuid=Y.nss,Y.nss=void 0,!X.tolerant&&(!Y.uuid||!UM.test(Y.uuid)))Y.error=Y.error||"UUID is not valid.";return Y}function MM(Q){let X=Q;return X.nss=(Q.uuid||"").toLowerCase(),X}var HH={scheme:"http",domainHost:!0,parse:JH,serialize:GH},AM={scheme:"https",domainHost:HH.domainHost,parse:JH,serialize:GH},h8={scheme:"ws",domainHost:!0,parse:FM,serialize:NM},jM={scheme:"wss",domainHost:h8.domainHost,parse:h8.parse,serialize:h8.serialize},RM={scheme:"urn",parse:DM,serialize:OM,skipNormalize:!0},IM={scheme:"urn:uuid",parse:wM,serialize:MM,skipNormalize:!0},Z$={http:HH,https:AM,ws:h8,wss:jM,urn:RM,"urn:uuid":IM};BH.exports=Z$});var VH=P((K_,u8)=>{var{normalizeIPv6:EM,normalizeIPv4:bM,removeDotSegments:a4,recomposeAuthority:PM,normalizeComponentEncoding:f8}=$H(),C$=zH();function SM(Q,X){if(typeof Q==="string")Q=U1(S1(Q,X),X);else if(typeof Q==="object")Q=S1(U1(Q,X),X);return Q}function ZM(Q,X,Y){let $=Object.assign({scheme:"null"},Y),W=KH(S1(Q,$),S1(X,$),$,!0);return U1(W,{...$,skipEscape:!0})}function KH(Q,X,Y,$){let W={};if(!$)Q=S1(U1(Q,Y),Y),X=S1(U1(X,Y),Y);if(Y=Y||{},!Y.tolerant&&X.scheme)W.scheme=X.scheme,W.userinfo=X.userinfo,W.host=X.host,W.port=X.port,W.path=a4(X.path||""),W.query=X.query;else{if(X.userinfo!==void 0||X.host!==void 0||X.port!==void 0)W.userinfo=X.userinfo,W.host=X.host,W.port=X.port,W.path=a4(X.path||""),W.query=X.query;else{if(!X.path)if(W.path=Q.path,X.query!==void 0)W.query=X.query;else W.query=Q.query;else{if(X.path.charAt(0)==="/")W.path=a4(X.path);else{if((Q.userinfo!==void 0||Q.host!==void 0||Q.port!==void 0)&&!Q.path)W.path="/"+X.path;else if(!Q.path)W.path=X.path;else W.path=Q.path.slice(0,Q.path.lastIndexOf("/")+1)+X.path;W.path=a4(W.path)}W.query=X.query}W.userinfo=Q.userinfo,W.host=Q.host,W.port=Q.port}W.scheme=Q.scheme}return W.fragment=X.fragment,W}function CM(Q,X,Y){if(typeof Q==="string")Q=unescape(Q),Q=U1(f8(S1(Q,Y),!0),{...Y,skipEscape:!0});else if(typeof Q==="object")Q=U1(f8(Q,!0),{...Y,skipEscape:!0});if(typeof X==="string")X=unescape(X),X=U1(f8(S1(X,Y),!0),{...Y,skipEscape:!0});else if(typeof X==="object")X=U1(f8(X,!0),{...Y,skipEscape:!0});return Q.toLowerCase()===X.toLowerCase()}function U1(Q,X){let Y={host:Q.host,scheme:Q.scheme,userinfo:Q.userinfo,port:Q.port,path:Q.path,query:Q.query,nid:Q.nid,nss:Q.nss,uuid:Q.uuid,fragment:Q.fragment,reference:Q.reference,resourceName:Q.resourceName,secure:Q.secure,error:""},$=Object.assign({},X),W=[],J=C$[($.scheme||Y.scheme||"").toLowerCase()];if(J&&J.serialize)J.serialize(Y,$);if(Y.path!==void 0)if(!$.skipEscape){if(Y.path=escape(Y.path),Y.scheme!==void 0)Y.path=Y.path.split("%3A").join(":")}else Y.path=unescape(Y.path);if($.reference!=="suffix"&&Y.scheme)W.push(Y.scheme,":");let G=PM(Y);if(G!==void 0){if($.reference!=="suffix")W.push("//");if(W.push(G),Y.path&&Y.path.charAt(0)!=="/")W.push("/")}if(Y.path!==void 0){let H=Y.path;if(!$.absolutePath&&(!J||!J.absolutePath))H=a4(H);if(G===void 0)H=H.replace(/^\/\//u,"/%2F");W.push(H)}if(Y.query!==void 0)W.push("?",Y.query);if(Y.fragment!==void 0)W.push("#",Y.fragment);return W.join("")}var kM=Array.from({length:127},(Q,X)=>/[^!"$&'()*+,\-.;=_`a-z{}~]/u.test(String.fromCharCode(X)));function vM(Q){let X=0;for(let Y=0,$=Q.length;Y<$;++Y)if(X=Q.charCodeAt(Y),X>126||kM[X])return!0;return!1}var _M=/^(?:([^#/:?]+):)?(?:\/\/((?:([^#/?@]*)@)?(\[[^#/?\]]+\]|[^#/:?]*)(?::(\d*))?))?([^#?]*)(?:\?([^#]*))?(?:#((?:.|[\n\r])*))?/u;function S1(Q,X){let Y=Object.assign({},X),$={scheme:void 0,userinfo:void 0,host:"",port:void 0,path:"",query:void 0,fragment:void 0},W=Q.indexOf("%")!==-1,J=!1;if(Y.reference==="suffix")Q=(Y.scheme?Y.scheme+":":"")+"//"+Q;let G=Q.match(_M);if(G){if($.scheme=G[1],$.userinfo=G[3],$.host=G[4],$.port=parseInt(G[5],10),$.path=G[6]||"",$.query=G[7],$.fragment=G[8],isNaN($.port))$.port=G[5];if($.host){let B=bM($.host);if(B.isIPV4===!1){let z=EM(B.host);$.host=z.host.toLowerCase(),J=z.isIPV6}else $.host=B.host,J=!0}if($.scheme===void 0&&$.userinfo===void 0&&$.host===void 0&&$.port===void 0&&$.query===void 0&&!$.path)$.reference="same-document";else if($.scheme===void 0)$.reference="relative";else if($.fragment===void 0)$.reference="absolute";else $.reference="uri";if(Y.reference&&Y.reference!=="suffix"&&Y.reference!==$.reference)$.error=$.error||"URI is not a "+Y.reference+" reference.";let H=C$[(Y.scheme||$.scheme||"").toLowerCase()];if(!Y.unicodeSupport&&(!H||!H.unicodeSupport)){if($.host&&(Y.domainHost||H&&H.domainHost)&&J===!1&&vM($.host))try{$.host=URL.domainToASCII($.host.toLowerCase())}catch(B){$.error=$.error||"Host's domain name can not be converted to ASCII: "+B}}if(!H||H&&!H.skipNormalize){if(W&&$.scheme!==void 0)$.scheme=unescape($.scheme);if(W&&$.host!==void 0)$.host=unescape($.host);if($.path)$.path=escape(unescape($.path));if($.fragment)$.fragment=encodeURI(decodeURIComponent($.fragment))}if(H&&H.parse)H.parse($,Y)}else $.error=$.error||"URI can not be parsed.";return $}var k$={SCHEMES:C$,normalize:SM,resolve:ZM,resolveComponents:KH,equal:CM,serialize:U1,parse:S1};u8.exports=k$;u8.exports.default=k$;u8.exports.fastUri=k$});var LH=P((UH)=>{Object.defineProperty(UH,"__esModule",{value:!0});var qH=VH();qH.code='require("ajv/dist/runtime/uri").default';UH.default=qH});var jH=P((Z1)=>{Object.defineProperty(Z1,"__esModule",{value:!0});Z1.CodeGen=Z1.Name=Z1.nil=Z1.stringify=Z1.str=Z1._=Z1.KeywordCxt=void 0;var xM=r4();Object.defineProperty(Z1,"KeywordCxt",{enumerable:!0,get:function(){return xM.KeywordCxt}});var r6=p();Object.defineProperty(Z1,"_",{enumerable:!0,get:function(){return r6._}});Object.defineProperty(Z1,"str",{enumerable:!0,get:function(){return r6.str}});Object.defineProperty(Z1,"stringify",{enumerable:!0,get:function(){return r6.stringify}});Object.defineProperty(Z1,"nil",{enumerable:!0,get:function(){return r6.nil}});Object.defineProperty(Z1,"Name",{enumerable:!0,get:function(){return r6.Name}});Object.defineProperty(Z1,"CodeGen",{enumerable:!0,get:function(){return r6.CodeGen}});var yM=x8(),wH=o4(),gM=V$(),s4=g8(),hM=p(),e4=d4(),l8=p4(),_$=e(),FH=n3(),fM=LH(),MH=(Q,X)=>new RegExp(Q,X);MH.code="new RegExp";var uM=["removeAdditional","useDefaults","coerceTypes"],lM=new Set(["validate","serialize","parse","wrapper","root","schema","keyword","pattern","formats","validate$data","func","obj","Error"]),mM={errorDataPath:"",format:"`validateFormats: false` can be used instead.",nullable:'"nullable" keyword is supported by default.',jsonPointers:"Deprecated jsPropertySyntax can be used instead.",extendRefs:"Deprecated ignoreKeywordsWithRef can be used instead.",missingRefs:"Pass empty schema with $id that should be ignored to ajv.addSchema.",processCode:"Use option `code: {process: (code, schemaEnv: object) => string}`",sourceCode:"Use option `code: {source: true}`",strictDefaults:"It is default now, see option `strict`.",strictKeywords:"It is default now, see option `strict`.",uniqueItems:'"uniqueItems" keyword is always validated.',unknownFormats:"Disable strict mode or pass `true` to `ajv.addFormat` (or `formats` option).",cache:"Map is used as cache, schema object as key.",serialize:"Map is used as cache, schema object as key.",ajvErrors:"It is default now."},cM={ignoreKeywordsWithRef:"",jsPropertySyntax:"",unicode:'"minLength"/"maxLength" account for unicode characters by default.'},NH=200;function pM(Q){var X,Y,$,W,J,G,H,B,z,K,q,U,V,F,L,N,w,A,R,S,C,U0,L0,s,M0;let D0=Q.strict,F1=(X=Q.code)===null||X===void 0?void 0:X.optimize,C1=F1===!0||F1===void 0?1:F1||0,a1=($=(Y=Q.code)===null||Y===void 0?void 0:Y.regExp)!==null&&$!==void 0?$:MH,l=(W=Q.uriResolver)!==null&&W!==void 0?W:fM.default;return{strictSchema:(G=(J=Q.strictSchema)!==null&&J!==void 0?J:D0)!==null&&G!==void 0?G:!0,strictNumbers:(B=(H=Q.strictNumbers)!==null&&H!==void 0?H:D0)!==null&&B!==void 0?B:!0,strictTypes:(K=(z=Q.strictTypes)!==null&&z!==void 0?z:D0)!==null&&K!==void 0?K:"log",strictTuples:(U=(q=Q.strictTuples)!==null&&q!==void 0?q:D0)!==null&&U!==void 0?U:"log",strictRequired:(F=(V=Q.strictRequired)!==null&&V!==void 0?V:D0)!==null&&F!==void 0?F:!1,code:Q.code?{...Q.code,optimize:C1,regExp:a1}:{optimize:C1,regExp:a1},loopRequired:(L=Q.loopRequired)!==null&&L!==void 0?L:NH,loopEnum:(N=Q.loopEnum)!==null&&N!==void 0?N:NH,meta:(w=Q.meta)!==null&&w!==void 0?w:!0,messages:(A=Q.messages)!==null&&A!==void 0?A:!0,inlineRefs:(R=Q.inlineRefs)!==null&&R!==void 0?R:!0,schemaId:(S=Q.schemaId)!==null&&S!==void 0?S:"$id",addUsedSchema:(C=Q.addUsedSchema)!==null&&C!==void 0?C:!0,validateSchema:(U0=Q.validateSchema)!==null&&U0!==void 0?U0:!0,validateFormats:(L0=Q.validateFormats)!==null&&L0!==void 0?L0:!0,unicodeRegExp:(s=Q.unicodeRegExp)!==null&&s!==void 0?s:!0,int32range:(M0=Q.int32range)!==null&&M0!==void 0?M0:!0,uriResolver:l}}class m8{constructor(Q={}){this.schemas={},this.refs={},this.formats={},this._compilations=new Set,this._loading={},this._cache=new Map,Q=this.opts={...Q,...pM(Q)};let{es5:X,lines:Y}=this.opts.code;this.scope=new hM.ValueScope({scope:{},prefixes:lM,es5:X,lines:Y}),this.logger=tM(Q.logger);let $=Q.validateFormats;if(Q.validateFormats=!1,this.RULES=(0,gM.getRules)(),DH.call(this,mM,Q,"NOT SUPPORTED"),DH.call(this,cM,Q,"DEPRECATED","warn"),this._metaOpts=rM.call(this),Q.formats)iM.call(this);if(this._addVocabularies(),this._addDefaultMetaSchema(),Q.keywords)nM.call(this,Q.keywords);if(typeof Q.meta=="object")this.addMetaSchema(Q.meta);dM.call(this),Q.validateFormats=$}_addVocabularies(){this.addKeyword("$async")}_addDefaultMetaSchema(){let{$data:Q,meta:X,schemaId:Y}=this.opts,$=FH;if(Y==="id")$={...FH},$.id=$.$id,delete $.$id;if(X&&Q)this.addMetaSchema($,$[Y],!1)}defaultMeta(){let{meta:Q,schemaId:X}=this.opts;return this.opts.defaultMeta=typeof Q=="object"?Q[X]||Q:void 0}validate(Q,X){let Y;if(typeof Q=="string"){if(Y=this.getSchema(Q),!Y)throw Error(`no schema with key or ref "${Q}"`)}else Y=this.compile(Q);let $=Y(X);if(!("$async"in Y))this.errors=Y.errors;return $}compile(Q,X){let Y=this._addSchema(Q,X);return Y.validate||this._compileSchemaEnv(Y)}compileAsync(Q,X){if(typeof this.opts.loadSchema!="function")throw Error("options.loadSchema should be a function");let{loadSchema:Y}=this.opts;return $.call(this,Q,X);async function $(z,K){await W.call(this,z.$schema);let q=this._addSchema(z,K);return q.validate||J.call(this,q)}async function W(z){if(z&&!this.getSchema(z))await $.call(this,{$ref:z},!0)}async function J(z){try{return this._compileSchemaEnv(z)}catch(K){if(!(K instanceof wH.default))throw K;return G.call(this,K),await H.call(this,K.missingSchema),J.call(this,z)}}function G({missingSchema:z,missingRef:K}){if(this.refs[z])throw Error(`AnySchema ${z} is loaded but ${K} cannot be resolved`)}async function H(z){let K=await B.call(this,z);if(!this.refs[z])await W.call(this,K.$schema);if(!this.refs[z])this.addSchema(K,z,X)}async function B(z){let K=this._loading[z];if(K)return K;try{return await(this._loading[z]=Y(z))}finally{delete this._loading[z]}}}addSchema(Q,X,Y,$=this.opts.validateSchema){if(Array.isArray(Q)){for(let J of Q)this.addSchema(J,void 0,Y,$);return this}let W;if(typeof Q==="object"){let{schemaId:J}=this.opts;if(W=Q[J],W!==void 0&&typeof W!="string")throw Error(`schema ${J} must be string`)}return X=(0,e4.normalizeId)(X||W),this._checkUnique(X),this.schemas[X]=this._addSchema(Q,Y,X,$,!0),this}addMetaSchema(Q,X,Y=this.opts.validateSchema){return this.addSchema(Q,X,!0,Y),this}validateSchema(Q,X){if(typeof Q=="boolean")return!0;let Y;if(Y=Q.$schema,Y!==void 0&&typeof Y!="string")throw Error("$schema must be a string");if(Y=Y||this.opts.defaultMeta||this.defaultMeta(),!Y)return this.logger.warn("meta-schema not available"),this.errors=null,!0;let $=this.validate(Y,Q);if(!$&&X){let W="schema is invalid: "+this.errorsText();if(this.opts.validateSchema==="log")this.logger.error(W);else throw Error(W)}return $}getSchema(Q){let X;while(typeof(X=OH.call(this,Q))=="string")Q=X;if(X===void 0){let{schemaId:Y}=this.opts,$=new s4.SchemaEnv({schema:{},schemaId:Y});if(X=s4.resolveSchema.call(this,$,Q),!X)return;this.refs[Q]=X}return X.validate||this._compileSchemaEnv(X)}removeSchema(Q){if(Q instanceof RegExp)return this._removeAllSchemas(this.schemas,Q),this._removeAllSchemas(this.refs,Q),this;switch(typeof Q){case"undefined":return this._removeAllSchemas(this.schemas),this._removeAllSchemas(this.refs),this._cache.clear(),this;case"string":{let X=OH.call(this,Q);if(typeof X=="object")this._cache.delete(X.schema);return delete this.schemas[Q],delete this.refs[Q],this}case"object":{let X=Q;this._cache.delete(X);let Y=Q[this.opts.schemaId];if(Y)Y=(0,e4.normalizeId)(Y),delete this.schemas[Y],delete this.refs[Y];return this}default:throw Error("ajv.removeSchema: invalid parameter")}}addVocabulary(Q){for(let X of Q)this.addKeyword(X);return this}addKeyword(Q,X){let Y;if(typeof Q=="string"){if(Y=Q,typeof X=="object")this.logger.warn("these parameters are deprecated, see docs for addKeyword"),X.keyword=Y}else if(typeof Q=="object"&&X===void 0){if(X=Q,Y=X.keyword,Array.isArray(Y)&&!Y.length)throw Error("addKeywords: keyword must be string or non-empty array")}else throw Error("invalid addKeywords parameters");if(sM.call(this,Y,X),!X)return(0,_$.eachItem)(Y,(W)=>v$.call(this,W)),this;QA.call(this,X);let $={...X,type:(0,l8.getJSONTypes)(X.type),schemaType:(0,l8.getJSONTypes)(X.schemaType)};return(0,_$.eachItem)(Y,$.type.length===0?(W)=>v$.call(this,W,$):(W)=>$.type.forEach((J)=>v$.call(this,W,$,J))),this}getKeyword(Q){let X=this.RULES.all[Q];return typeof X=="object"?X.definition:!!X}removeKeyword(Q){let{RULES:X}=this;delete X.keywords[Q],delete X.all[Q];for(let Y of X.rules){let $=Y.rules.findIndex((W)=>W.keyword===Q);if($>=0)Y.rules.splice($,1)}return this}addFormat(Q,X){if(typeof X=="string")X=new RegExp(X);return this.formats[Q]=X,this}errorsText(Q=this.errors,{separator:X=", ",dataVar:Y="data"}={}){if(!Q||Q.length===0)return"No errors";return Q.map(($)=>`${Y}${$.instancePath} ${$.message}`).reduce(($,W)=>$+X+W)}$dataMetaSchema(Q,X){let Y=this.RULES.all;Q=JSON.parse(JSON.stringify(Q));for(let $ of X){let W=$.split("/").slice(1),J=Q;for(let G of W)J=J[G];for(let G in Y){let H=Y[G];if(typeof H!="object")continue;let{$data:B}=H.definition,z=J[G];if(B&&z)J[G]=AH(z)}}return Q}_removeAllSchemas(Q,X){for(let Y in Q){let $=Q[Y];if(!X||X.test(Y)){if(typeof $=="string")delete Q[Y];else if($&&!$.meta)this._cache.delete($.schema),delete Q[Y]}}}_addSchema(Q,X,Y,$=this.opts.validateSchema,W=this.opts.addUsedSchema){let J,{schemaId:G}=this.opts;if(typeof Q=="object")J=Q[G];else if(this.opts.jtd)throw Error("schema must be object");else if(typeof Q!="boolean")throw Error("schema must be object or boolean");let H=this._cache.get(Q);if(H!==void 0)return H;Y=(0,e4.normalizeId)(J||Y);let B=e4.getSchemaRefs.call(this,Q,Y);if(H=new s4.SchemaEnv({schema:Q,schemaId:G,meta:X,baseId:Y,localRefs:B}),this._cache.set(H.schema,H),W&&!Y.startsWith("#")){if(Y)this._checkUnique(Y);this.refs[Y]=H}if($)this.validateSchema(Q,!0);return H}_checkUnique(Q){if(this.schemas[Q]||this.refs[Q])throw Error(`schema with key or id "${Q}" already exists`)}_compileSchemaEnv(Q){if(Q.meta)this._compileMetaSchema(Q);else s4.compileSchema.call(this,Q);if(!Q.validate)throw Error("ajv implementation error");return Q.validate}_compileMetaSchema(Q){let X=this.opts;this.opts=this._metaOpts;try{s4.compileSchema.call(this,Q)}finally{this.opts=X}}}m8.ValidationError=yM.default;m8.MissingRefError=wH.default;Z1.default=m8;function DH(Q,X,Y,$="error"){for(let W in Q){let J=W;if(J in X)this.logger[$](`${Y}: option ${W}. ${Q[J]}`)}}function OH(Q){return Q=(0,e4.normalizeId)(Q),this.schemas[Q]||this.refs[Q]}function dM(){let Q=this.opts.schemas;if(!Q)return;if(Array.isArray(Q))this.addSchema(Q);else for(let X in Q)this.addSchema(Q[X],X)}function iM(){for(let Q in this.opts.formats){let X=this.opts.formats[Q];if(X)this.addFormat(Q,X)}}function nM(Q){if(Array.isArray(Q)){this.addVocabulary(Q);return}this.logger.warn("keywords option as map is deprecated, pass array");for(let X in Q){let Y=Q[X];if(!Y.keyword)Y.keyword=X;this.addKeyword(Y)}}function rM(){let Q={...this.opts};for(let X of uM)delete Q[X];return Q}var oM={log(){},warn(){},error(){}};function tM(Q){if(Q===!1)return oM;if(Q===void 0)return console;if(Q.log&&Q.warn&&Q.error)return Q;throw Error("logger must implement log, warn and error methods")}var aM=/^[a-z_$][a-z0-9_$:-]*$/i;function sM(Q,X){let{RULES:Y}=this;if((0,_$.eachItem)(Q,($)=>{if(Y.keywords[$])throw Error(`Keyword ${$} is already defined`);if(!aM.test($))throw Error(`Keyword ${$} has invalid name`)}),!X)return;if(X.$data&&!(("code"in X)||("validate"in X)))throw Error('$data keyword must have "code" or "validate" function')}function v$(Q,X,Y){var $;let W=X===null||X===void 0?void 0:X.post;if(Y&&W)throw Error('keyword with "post" flag cannot have "type"');let{RULES:J}=this,G=W?J.post:J.rules.find(({type:B})=>B===Y);if(!G)G={type:Y,rules:[]},J.rules.push(G);if(J.keywords[Q]=!0,!X)return;let H={keyword:Q,definition:{...X,type:(0,l8.getJSONTypes)(X.type),schemaType:(0,l8.getJSONTypes)(X.schemaType)}};if(X.before)eM.call(this,G,H,X.before);else G.rules.push(H);J.all[Q]=H,($=X.implements)===null||$===void 0||$.forEach((B)=>this.addKeyword(B))}function eM(Q,X,Y){let $=Q.rules.findIndex((W)=>W.keyword===Y);if($>=0)Q.rules.splice($,0,X);else Q.rules.push(X),this.logger.warn(`rule ${Y} is not defined`)}function QA(Q){let{metaSchema:X}=Q;if(X===void 0)return;if(Q.$data&&this.opts.$data)X=AH(X);Q.validateSchema=this.compile(X,!0)}var XA={$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"};function AH(Q){return{anyOf:[Q,XA]}}});var IH=P((RH)=>{Object.defineProperty(RH,"__esModule",{value:!0});var WA={keyword:"id",code(){throw Error('NOT SUPPORTED: keyword "id", use "$id" for schema ID')}};RH.default=WA});var CH=P((SH)=>{Object.defineProperty(SH,"__esModule",{value:!0});SH.callRef=SH.getValidate=void 0;var GA=o4(),EH=n0(),f0=p(),o6=b1(),bH=g8(),c8=e(),HA={keyword:"$ref",schemaType:"string",code(Q){let{gen:X,schema:Y,it:$}=Q,{baseId:W,schemaEnv:J,validateName:G,opts:H,self:B}=$,{root:z}=J;if((Y==="#"||Y==="#/")&&W===z.baseId)return q();let K=bH.resolveRef.call(B,z,W,Y);if(K===void 0)throw new GA.default($.opts.uriResolver,W,Y);if(K instanceof bH.SchemaEnv)return U(K);return V(K);function q(){if(J===z)return p8(Q,G,J,J.$async);let F=X.scopeValue("root",{ref:z});return p8(Q,f0._`${F}.validate`,z,z.$async)}function U(F){let L=PH(Q,F);p8(Q,L,F,F.$async)}function V(F){let L=X.scopeValue("schema",H.code.source===!0?{ref:F,code:(0,f0.stringify)(F)}:{ref:F}),N=X.name("valid"),w=Q.subschema({schema:F,dataTypes:[],schemaPath:f0.nil,topSchemaRef:L,errSchemaPath:Y},N);Q.mergeEvaluated(w),Q.ok(N)}}};function PH(Q,X){let{gen:Y}=Q;return X.validate?Y.scopeValue("validate",{ref:X.validate}):f0._`${Y.scopeValue("wrapper",{ref:X})}.validate`}SH.getValidate=PH;function p8(Q,X,Y,$){let{gen:W,it:J}=Q,{allErrors:G,schemaEnv:H,opts:B}=J,z=B.passContext?o6.default.this:f0.nil;if($)K();else q();function K(){if(!H.$async)throw Error("async schema referenced by sync schema");let F=W.let("valid");W.try(()=>{if(W.code(f0._`await ${(0,EH.callValidateCode)(Q,X,z)}`),V(X),!G)W.assign(F,!0)},(L)=>{if(W.if(f0._`!(${L} instanceof ${J.ValidationError})`,()=>W.throw(L)),U(L),!G)W.assign(F,!1)}),Q.ok(F)}function q(){Q.result((0,EH.callValidateCode)(Q,X,z),()=>V(X),()=>U(X))}function U(F){let L=f0._`${F}.errors`;W.assign(o6.default.vErrors,f0._`${o6.default.vErrors} === null ? ${L} : ${o6.default.vErrors}.concat(${L})`),W.assign(o6.default.errors,f0._`${o6.default.vErrors}.length`)}function V(F){var L;if(!J.opts.unevaluated)return;let N=(L=Y===null||Y===void 0?void 0:Y.validate)===null||L===void 0?void 0:L.evaluated;if(J.props!==!0)if(N&&!N.dynamicProps){if(N.props!==void 0)J.props=c8.mergeEvaluated.props(W,N.props,J.props)}else{let w=W.var("props",f0._`${F}.evaluated.props`);J.props=c8.mergeEvaluated.props(W,w,J.props,f0.Name)}if(J.items!==!0)if(N&&!N.dynamicItems){if(N.items!==void 0)J.items=c8.mergeEvaluated.items(W,N.items,J.items)}else{let w=W.var("items",f0._`${F}.evaluated.items`);J.items=c8.mergeEvaluated.items(W,w,J.items,f0.Name)}}}SH.callRef=p8;SH.default=HA});var vH=P((kH)=>{Object.defineProperty(kH,"__esModule",{value:!0});var KA=IH(),VA=CH(),qA=["$schema","$id","$defs","$vocabulary",{keyword:"$comment"},"definitions",KA.default,VA.default];kH.default=qA});var TH=P((_H)=>{Object.defineProperty(_H,"__esModule",{value:!0});var d8=p(),r1=d8.operators,i8={maximum:{okStr:"<=",ok:r1.LTE,fail:r1.GT},minimum:{okStr:">=",ok:r1.GTE,fail:r1.LT},exclusiveMaximum:{okStr:"<",ok:r1.LT,fail:r1.GTE},exclusiveMinimum:{okStr:">",ok:r1.GT,fail:r1.LTE}},LA={message:({keyword:Q,schemaCode:X})=>d8.str`must be ${i8[Q].okStr} ${X}`,params:({keyword:Q,schemaCode:X})=>d8._`{comparison: ${i8[Q].okStr}, limit: ${X}}`},FA={keyword:Object.keys(i8),type:"number",schemaType:"number",$data:!0,error:LA,code(Q){let{keyword:X,data:Y,schemaCode:$}=Q;Q.fail$data(d8._`${Y} ${i8[X].fail} ${$} || isNaN(${Y})`)}};_H.default=FA});var yH=P((xH)=>{Object.defineProperty(xH,"__esModule",{value:!0});var Q9=p(),DA={message:({schemaCode:Q})=>Q9.str`must be multiple of ${Q}`,params:({schemaCode:Q})=>Q9._`{multipleOf: ${Q}}`},OA={keyword:"multipleOf",type:"number",schemaType:"number",$data:!0,error:DA,code(Q){let{gen:X,data:Y,schemaCode:$,it:W}=Q,J=W.opts.multipleOfPrecision,G=X.let("res"),H=J?Q9._`Math.abs(Math.round(${G}) - ${G}) > 1e-${J}`:Q9._`${G} !== parseInt(${G})`;Q.fail$data(Q9._`(${$} === 0 || (${G} = ${Y}/${$}, ${H}))`)}};xH.default=OA});var fH=P((hH)=>{Object.defineProperty(hH,"__esModule",{value:!0});function gH(Q){let X=Q.length,Y=0,$=0,W;while($<X)if(Y++,W=Q.charCodeAt($++),W>=55296&&W<=56319&&$<X){if(W=Q.charCodeAt($),(W&64512)===56320)$++}return Y}hH.default=gH;gH.code='require("ajv/dist/runtime/ucs2length").default'});var lH=P((uH)=>{Object.defineProperty(uH,"__esModule",{value:!0});var L6=p(),AA=e(),jA=fH(),RA={message({keyword:Q,schemaCode:X}){let Y=Q==="maxLength"?"more":"fewer";return L6.str`must NOT have ${Y} than ${X} characters`},params:({schemaCode:Q})=>L6._`{limit: ${Q}}`},IA={keyword:["maxLength","minLength"],type:"string",schemaType:"number",$data:!0,error:RA,code(Q){let{keyword:X,data:Y,schemaCode:$,it:W}=Q,J=X==="maxLength"?L6.operators.GT:L6.operators.LT,G=W.opts.unicode===!1?L6._`${Y}.length`:L6._`${(0,AA.useFunc)(Q.gen,jA.default)}(${Y})`;Q.fail$data(L6._`${G} ${J} ${$}`)}};uH.default=IA});var cH=P((mH)=>{Object.defineProperty(mH,"__esModule",{value:!0});var bA=n0(),n8=p(),PA={message:({schemaCode:Q})=>n8.str`must match pattern "${Q}"`,params:({schemaCode:Q})=>n8._`{pattern: ${Q}}`},SA={keyword:"pattern",type:"string",schemaType:"string",$data:!0,error:PA,code(Q){let{data:X,$data:Y,schema:$,schemaCode:W,it:J}=Q,G=J.opts.unicodeRegExp?"u":"",H=Y?n8._`(new RegExp(${W}, ${G}))`:(0,bA.usePattern)(Q,$);Q.fail$data(n8._`!${H}.test(${X})`)}};mH.default=SA});var dH=P((pH)=>{Object.defineProperty(pH,"__esModule",{value:!0});var X9=p(),CA={message({keyword:Q,schemaCode:X}){let Y=Q==="maxProperties"?"more":"fewer";return X9.str`must NOT have ${Y} than ${X} properties`},params:({schemaCode:Q})=>X9._`{limit: ${Q}}`},kA={keyword:["maxProperties","minProperties"],type:"object",schemaType:"number",$data:!0,error:CA,code(Q){let{keyword:X,data:Y,schemaCode:$}=Q,W=X==="maxProperties"?X9.operators.GT:X9.operators.LT;Q.fail$data(X9._`Object.keys(${Y}).length ${W} ${$}`)}};pH.default=kA});var nH=P((iH)=>{Object.defineProperty(iH,"__esModule",{value:!0});var Y9=n0(),$9=p(),_A=e(),TA={message:({params:{missingProperty:Q}})=>$9.str`must have required property '${Q}'`,params:({params:{missingProperty:Q}})=>$9._`{missingProperty: ${Q}}`},xA={keyword:"required",type:"object",schemaType:"array",$data:!0,error:TA,code(Q){let{gen:X,schema:Y,schemaCode:$,data:W,$data:J,it:G}=Q,{opts:H}=G;if(!J&&Y.length===0)return;let B=Y.length>=H.loopRequired;if(G.allErrors)z();else K();if(H.strictRequired){let V=Q.parentSchema.properties,{definedProperties:F}=Q.it;for(let L of Y)if((V===null||V===void 0?void 0:V[L])===void 0&&!F.has(L)){let N=G.schemaEnv.baseId+G.errSchemaPath,w=`required property "${L}" is not defined at "${N}" (strictRequired)`;(0,_A.checkStrictMode)(G,w,G.opts.strictRequired)}}function z(){if(B||J)Q.block$data($9.nil,q);else for(let V of Y)(0,Y9.checkReportMissingProp)(Q,V)}function K(){let V=X.let("missing");if(B||J){let F=X.let("valid",!0);Q.block$data(F,()=>U(V,F)),Q.ok(F)}else X.if((0,Y9.checkMissingProp)(Q,Y,V)),(0,Y9.reportMissingProp)(Q,V),X.else()}function q(){X.forOf("prop",$,(V)=>{Q.setParams({missingProperty:V}),X.if((0,Y9.noPropertyInData)(X,W,V,H.ownProperties),()=>Q.error())})}function U(V,F){Q.setParams({missingProperty:V}),X.forOf(V,$,()=>{X.assign(F,(0,Y9.propertyInData)(X,W,V,H.ownProperties)),X.if((0,$9.not)(F),()=>{Q.error(),X.break()})},$9.nil)}}};iH.default=xA});var oH=P((rH)=>{Object.defineProperty(rH,"__esModule",{value:!0});var W9=p(),gA={message({keyword:Q,schemaCode:X}){let Y=Q==="maxItems"?"more":"fewer";return W9.str`must NOT have ${Y} than ${X} items`},params:({schemaCode:Q})=>W9._`{limit: ${Q}}`},hA={keyword:["maxItems","minItems"],type:"array",schemaType:"number",$data:!0,error:gA,code(Q){let{keyword:X,data:Y,schemaCode:$}=Q,W=X==="maxItems"?W9.operators.GT:W9.operators.LT;Q.fail$data(W9._`${Y}.length ${W} ${$}`)}};rH.default=hA});var r8=P((aH)=>{Object.defineProperty(aH,"__esModule",{value:!0});var tH=w$();tH.code='require("ajv/dist/runtime/equal").default';aH.default=tH});var eH=P((sH)=>{Object.defineProperty(sH,"__esModule",{value:!0});var T$=p4(),b0=p(),lA=e(),mA=r8(),cA={message:({params:{i:Q,j:X}})=>b0.str`must NOT have duplicate items (items ## ${X} and ${Q} are identical)`,params:({params:{i:Q,j:X}})=>b0._`{i: ${Q}, j: ${X}}`},pA={keyword:"uniqueItems",type:"array",schemaType:"boolean",$data:!0,error:cA,code(Q){let{gen:X,data:Y,$data:$,schema:W,parentSchema:J,schemaCode:G,it:H}=Q;if(!$&&!W)return;let B=X.let("valid"),z=J.items?(0,T$.getSchemaTypes)(J.items):[];Q.block$data(B,K,b0._`${G} === false`),Q.ok(B);function K(){let F=X.let("i",b0._`${Y}.length`),L=X.let("j");Q.setParams({i:F,j:L}),X.assign(B,!0),X.if(b0._`${F} > 1`,()=>(q()?U:V)(F,L))}function q(){return z.length>0&&!z.some((F)=>F==="object"||F==="array")}function U(F,L){let N=X.name("item"),w=(0,T$.checkDataTypes)(z,N,H.opts.strictNumbers,T$.DataType.Wrong),A=X.const("indices",b0._`{}`);X.for(b0._`;${F}--;`,()=>{if(X.let(N,b0._`${Y}[${F}]`),X.if(w,b0._`continue`),z.length>1)X.if(b0._`typeof ${N} == "string"`,b0._`${N} += "_"`);X.if(b0._`typeof ${A}[${N}] == "number"`,()=>{X.assign(L,b0._`${A}[${N}]`),Q.error(),X.assign(B,!1).break()}).code(b0._`${A}[${N}] = ${F}`)})}function V(F,L){let N=(0,lA.useFunc)(X,mA.default),w=X.name("outer");X.label(w).for(b0._`;${F}--;`,()=>X.for(b0._`${L} = ${F}; ${L}--;`,()=>X.if(b0._`${N}(${Y}[${F}], ${Y}[${L}])`,()=>{Q.error(),X.assign(B,!1).break(w)})))}}};sH.default=pA});var XB=P((QB)=>{Object.defineProperty(QB,"__esModule",{value:!0});var x$=p(),iA=e(),nA=r8(),rA={message:"must be equal to constant",params:({schemaCode:Q})=>x$._`{allowedValue: ${Q}}`},oA={keyword:"const",$data:!0,error:rA,code(Q){let{gen:X,data:Y,$data:$,schemaCode:W,schema:J}=Q;if($||J&&typeof J=="object")Q.fail$data(x$._`!${(0,iA.useFunc)(X,nA.default)}(${Y}, ${W})`);else Q.fail(x$._`${J} !== ${Y}`)}};QB.default=oA});var $B=P((YB)=>{Object.defineProperty(YB,"__esModule",{value:!0});var J9=p(),aA=e(),sA=r8(),eA={message:"must be equal to one of the allowed values",params:({schemaCode:Q})=>J9._`{allowedValues: ${Q}}`},Qj={keyword:"enum",schemaType:"array",$data:!0,error:eA,code(Q){let{gen:X,data:Y,$data:$,schema:W,schemaCode:J,it:G}=Q;if(!$&&W.length===0)throw Error("enum must have non-empty array");let H=W.length>=G.opts.loopEnum,B,z=()=>B!==null&&B!==void 0?B:B=(0,aA.useFunc)(X,sA.default),K;if(H||$)K=X.let("valid"),Q.block$data(K,q);else{if(!Array.isArray(W))throw Error("ajv implementation error");let V=X.const("vSchema",J);K=(0,J9.or)(...W.map((F,L)=>U(V,L)))}Q.pass(K);function q(){X.assign(K,!1),X.forOf("v",J,(V)=>X.if(J9._`${z()}(${Y}, ${V})`,()=>X.assign(K,!0).break()))}function U(V,F){let L=W[F];return typeof L==="object"&&L!==null?J9._`${z()}(${Y}, ${V}[${F}])`:J9._`${Y} === ${L}`}}};YB.default=Qj});var JB=P((WB)=>{Object.defineProperty(WB,"__esModule",{value:!0});var Yj=TH(),$j=yH(),Wj=lH(),Jj=cH(),Gj=dH(),Hj=nH(),Bj=oH(),zj=eH(),Kj=XB(),Vj=$B(),qj=[Yj.default,$j.default,Wj.default,Jj.default,Gj.default,Hj.default,Bj.default,zj.default,{keyword:"type",schemaType:["string","array"]},{keyword:"nullable",schemaType:"boolean"},Kj.default,Vj.default];WB.default=qj});var g$=P((HB)=>{Object.defineProperty(HB,"__esModule",{value:!0});HB.validateAdditionalItems=void 0;var F6=p(),y$=e(),Lj={message:({params:{len:Q}})=>F6.str`must NOT have more than ${Q} items`,params:({params:{len:Q}})=>F6._`{limit: ${Q}}`},Fj={keyword:"additionalItems",type:"array",schemaType:["boolean","object"],before:"uniqueItems",error:Lj,code(Q){let{parentSchema:X,it:Y}=Q,{items:$}=X;if(!Array.isArray($)){(0,y$.checkStrictMode)(Y,'"additionalItems" is ignored when "items" is not an array of schemas');return}GB(Q,$)}};function GB(Q,X){let{gen:Y,schema:$,data:W,keyword:J,it:G}=Q;G.items=!0;let H=Y.const("len",F6._`${W}.length`);if($===!1)Q.setParams({len:X.length}),Q.pass(F6._`${H} <= ${X.length}`);else if(typeof $=="object"&&!(0,y$.alwaysValidSchema)(G,$)){let z=Y.var("valid",F6._`${H} <= ${X.length}`);Y.if((0,F6.not)(z),()=>B(z)),Q.ok(z)}function B(z){Y.forRange("i",X.length,H,(K)=>{if(Q.subschema({keyword:J,dataProp:K,dataPropType:y$.Type.Num},z),!G.allErrors)Y.if((0,F6.not)(z),()=>Y.break())})}}HB.validateAdditionalItems=GB;HB.default=Fj});var h$=P((VB)=>{Object.defineProperty(VB,"__esModule",{value:!0});VB.validateTuple=void 0;var zB=p(),o8=e(),Dj=n0(),Oj={keyword:"items",type:"array",schemaType:["object","array","boolean"],before:"uniqueItems",code(Q){let{schema:X,it:Y}=Q;if(Array.isArray(X))return KB(Q,"additionalItems",X);if(Y.items=!0,(0,o8.alwaysValidSchema)(Y,X))return;Q.ok((0,Dj.validateArray)(Q))}};function KB(Q,X,Y=Q.schema){let{gen:$,parentSchema:W,data:J,keyword:G,it:H}=Q;if(K(W),H.opts.unevaluated&&Y.length&&H.items!==!0)H.items=o8.mergeEvaluated.items($,Y.length,H.items);let B=$.name("valid"),z=$.const("len",zB._`${J}.length`);Y.forEach((q,U)=>{if((0,o8.alwaysValidSchema)(H,q))return;$.if(zB._`${z} > ${U}`,()=>Q.subschema({keyword:G,schemaProp:U,dataProp:U},B)),Q.ok(B)});function K(q){let{opts:U,errSchemaPath:V}=H,F=Y.length,L=F===q.minItems&&(F===q.maxItems||q[X]===!1);if(U.strictTuples&&!L){let N=`"${G}" is ${F}-tuple, but minItems or maxItems/${X} are not specified or different at path "${V}"`;(0,o8.checkStrictMode)(H,N,U.strictTuples)}}}VB.validateTuple=KB;VB.default=Oj});var LB=P((UB)=>{Object.defineProperty(UB,"__esModule",{value:!0});var Mj=h$(),Aj={keyword:"prefixItems",type:"array",schemaType:["array"],before:"uniqueItems",code:(Q)=>(0,Mj.validateTuple)(Q,"items")};UB.default=Aj});var DB=P((NB)=>{Object.defineProperty(NB,"__esModule",{value:!0});var FB=p(),Rj=e(),Ij=n0(),Ej=g$(),bj={message:({params:{len:Q}})=>FB.str`must NOT have more than ${Q} items`,params:({params:{len:Q}})=>FB._`{limit: ${Q}}`},Pj={keyword:"items",type:"array",schemaType:["object","boolean"],before:"uniqueItems",error:bj,code(Q){let{schema:X,parentSchema:Y,it:$}=Q,{prefixItems:W}=Y;if($.items=!0,(0,Rj.alwaysValidSchema)($,X))return;if(W)(0,Ej.validateAdditionalItems)(Q,W);else Q.ok((0,Ij.validateArray)(Q))}};NB.default=Pj});var wB=P((OB)=>{Object.defineProperty(OB,"__esModule",{value:!0});var r0=p(),t8=e(),Zj={message:({params:{min:Q,max:X}})=>X===void 0?r0.str`must contain at least ${Q} valid item(s)`:r0.str`must contain at least ${Q} and no more than ${X} valid item(s)`,params:({params:{min:Q,max:X}})=>X===void 0?r0._`{minContains: ${Q}}`:r0._`{minContains: ${Q}, maxContains: ${X}}`},Cj={keyword:"contains",type:"array",schemaType:["object","boolean"],before:"uniqueItems",trackErrors:!0,error:Zj,code(Q){let{gen:X,schema:Y,parentSchema:$,data:W,it:J}=Q,G,H,{minContains:B,maxContains:z}=$;if(J.opts.next)G=B===void 0?1:B,H=z;else G=1;let K=X.const("len",r0._`${W}.length`);if(Q.setParams({min:G,max:H}),H===void 0&&G===0){(0,t8.checkStrictMode)(J,'"minContains" == 0 without "maxContains": "contains" keyword ignored');return}if(H!==void 0&&G>H){(0,t8.checkStrictMode)(J,'"minContains" > "maxContains" is always invalid'),Q.fail();return}if((0,t8.alwaysValidSchema)(J,Y)){let L=r0._`${K} >= ${G}`;if(H!==void 0)L=r0._`${L} && ${K} <= ${H}`;Q.pass(L);return}J.items=!0;let q=X.name("valid");if(H===void 0&&G===1)V(q,()=>X.if(q,()=>X.break()));else if(G===0){if(X.let(q,!0),H!==void 0)X.if(r0._`${W}.length > 0`,U)}else X.let(q,!1),U();Q.result(q,()=>Q.reset());function U(){let L=X.name("_valid"),N=X.let("count",0);V(L,()=>X.if(L,()=>F(N)))}function V(L,N){X.forRange("i",0,K,(w)=>{Q.subschema({keyword:"contains",dataProp:w,dataPropType:t8.Type.Num,compositeRule:!0},L),N()})}function F(L){if(X.code(r0._`${L}++`),H===void 0)X.if(r0._`${L} >= ${G}`,()=>X.assign(q,!0).break());else if(X.if(r0._`${L} > ${H}`,()=>X.assign(q,!1).break()),G===1)X.assign(q,!0);else X.if(r0._`${L} >= ${G}`,()=>X.assign(q,!0))}}};OB.default=Cj});var EB=P((jB)=>{Object.defineProperty(jB,"__esModule",{value:!0});jB.validateSchemaDeps=jB.validatePropertyDeps=jB.error=void 0;var f$=p(),vj=e(),G9=n0();jB.error={message:({params:{property:Q,depsCount:X,deps:Y}})=>{let $=X===1?"property":"properties";return f$.str`must have ${$} ${Y} when property ${Q} is present`},params:({params:{property:Q,depsCount:X,deps:Y,missingProperty:$}})=>f$._`{property: ${Q},
    missingProperty: ${$},
    depsCount: ${X},
    deps: ${Y}}`};var _j={keyword:"dependencies",type:"object",schemaType:"object",error:jB.error,code(Q){let[X,Y]=Tj(Q);MB(Q,X),AB(Q,Y)}};function Tj({schema:Q}){let X={},Y={};for(let $ in Q){if($==="__proto__")continue;let W=Array.isArray(Q[$])?X:Y;W[$]=Q[$]}return[X,Y]}function MB(Q,X=Q.schema){let{gen:Y,data:$,it:W}=Q;if(Object.keys(X).length===0)return;let J=Y.let("missing");for(let G in X){let H=X[G];if(H.length===0)continue;let B=(0,G9.propertyInData)(Y,$,G,W.opts.ownProperties);if(Q.setParams({property:G,depsCount:H.length,deps:H.join(", ")}),W.allErrors)Y.if(B,()=>{for(let z of H)(0,G9.checkReportMissingProp)(Q,z)});else Y.if(f$._`${B} && (${(0,G9.checkMissingProp)(Q,H,J)})`),(0,G9.reportMissingProp)(Q,J),Y.else()}}jB.validatePropertyDeps=MB;function AB(Q,X=Q.schema){let{gen:Y,data:$,keyword:W,it:J}=Q,G=Y.name("valid");for(let H in X){if((0,vj.alwaysValidSchema)(J,X[H]))continue;Y.if((0,G9.propertyInData)(Y,$,H,J.opts.ownProperties),()=>{let B=Q.subschema({keyword:W,schemaProp:H},G);Q.mergeValidEvaluated(B,G)},()=>Y.var(G,!0)),Q.ok(G)}}jB.validateSchemaDeps=AB;jB.default=_j});var SB=P((PB)=>{Object.defineProperty(PB,"__esModule",{value:!0});var bB=p(),gj=e(),hj={message:"property name must be valid",params:({params:Q})=>bB._`{propertyName: ${Q.propertyName}}`},fj={keyword:"propertyNames",type:"object",schemaType:["object","boolean"],error:hj,code(Q){let{gen:X,schema:Y,data:$,it:W}=Q;if((0,gj.alwaysValidSchema)(W,Y))return;let J=X.name("valid");X.forIn("key",$,(G)=>{Q.setParams({propertyName:G}),Q.subschema({keyword:"propertyNames",data:G,dataTypes:["string"],propertyName:G,compositeRule:!0},J),X.if((0,bB.not)(J),()=>{if(Q.error(!0),!W.allErrors)X.break()})}),Q.ok(J)}};PB.default=fj});var u$=P((ZB)=>{Object.defineProperty(ZB,"__esModule",{value:!0});var a8=n0(),$1=p(),lj=b1(),s8=e(),mj={message:"must NOT have additional properties",params:({params:Q})=>$1._`{additionalProperty: ${Q.additionalProperty}}`},cj={keyword:"additionalProperties",type:["object"],schemaType:["boolean","object"],allowUndefined:!0,trackErrors:!0,error:mj,code(Q){let{gen:X,schema:Y,parentSchema:$,data:W,errsCount:J,it:G}=Q;if(!J)throw Error("ajv implementation error");let{allErrors:H,opts:B}=G;if(G.props=!0,B.removeAdditional!=="all"&&(0,s8.alwaysValidSchema)(G,Y))return;let z=(0,a8.allSchemaProperties)($.properties),K=(0,a8.allSchemaProperties)($.patternProperties);q(),Q.ok($1._`${J} === ${lj.default.errors}`);function q(){X.forIn("key",W,(N)=>{if(!z.length&&!K.length)F(N);else X.if(U(N),()=>F(N))})}function U(N){let w;if(z.length>8){let A=(0,s8.schemaRefOrVal)(G,$.properties,"properties");w=(0,a8.isOwnProperty)(X,A,N)}else if(z.length)w=(0,$1.or)(...z.map((A)=>$1._`${N} === ${A}`));else w=$1.nil;if(K.length)w=(0,$1.or)(w,...K.map((A)=>$1._`${(0,a8.usePattern)(Q,A)}.test(${N})`));return(0,$1.not)(w)}function V(N){X.code($1._`delete ${W}[${N}]`)}function F(N){if(B.removeAdditional==="all"||B.removeAdditional&&Y===!1){V(N);return}if(Y===!1){if(Q.setParams({additionalProperty:N}),Q.error(),!H)X.break();return}if(typeof Y=="object"&&!(0,s8.alwaysValidSchema)(G,Y)){let w=X.name("valid");if(B.removeAdditional==="failing")L(N,w,!1),X.if((0,$1.not)(w),()=>{Q.reset(),V(N)});else if(L(N,w),!H)X.if((0,$1.not)(w),()=>X.break())}}function L(N,w,A){let R={keyword:"additionalProperties",dataProp:N,dataPropType:s8.Type.Str};if(A===!1)Object.assign(R,{compositeRule:!0,createErrors:!1,allErrors:!1});Q.subschema(R,w)}}};ZB.default=cj});var _B=P((vB)=>{Object.defineProperty(vB,"__esModule",{value:!0});var dj=r4(),CB=n0(),l$=e(),kB=u$(),ij={keyword:"properties",type:"object",schemaType:"object",code(Q){let{gen:X,schema:Y,parentSchema:$,data:W,it:J}=Q;if(J.opts.removeAdditional==="all"&&$.additionalProperties===void 0)kB.default.code(new dj.KeywordCxt(J,kB.default,"additionalProperties"));let G=(0,CB.allSchemaProperties)(Y);for(let q of G)J.definedProperties.add(q);if(J.opts.unevaluated&&G.length&&J.props!==!0)J.props=l$.mergeEvaluated.props(X,(0,l$.toHash)(G),J.props);let H=G.filter((q)=>!(0,l$.alwaysValidSchema)(J,Y[q]));if(H.length===0)return;let B=X.name("valid");for(let q of H){if(z(q))K(q);else{if(X.if((0,CB.propertyInData)(X,W,q,J.opts.ownProperties)),K(q),!J.allErrors)X.else().var(B,!0);X.endIf()}Q.it.definedProperties.add(q),Q.ok(B)}function z(q){return J.opts.useDefaults&&!J.compositeRule&&Y[q].default!==void 0}function K(q){Q.subschema({keyword:"properties",schemaProp:q,dataProp:q},B)}}};vB.default=ij});var hB=P((gB)=>{Object.defineProperty(gB,"__esModule",{value:!0});var TB=n0(),e8=p(),xB=e(),yB=e(),rj={keyword:"patternProperties",type:"object",schemaType:"object",code(Q){let{gen:X,schema:Y,data:$,parentSchema:W,it:J}=Q,{opts:G}=J,H=(0,TB.allSchemaProperties)(Y),B=H.filter((L)=>(0,xB.alwaysValidSchema)(J,Y[L]));if(H.length===0||B.length===H.length&&(!J.opts.unevaluated||J.props===!0))return;let z=G.strictSchema&&!G.allowMatchingProperties&&W.properties,K=X.name("valid");if(J.props!==!0&&!(J.props instanceof e8.Name))J.props=(0,yB.evaluatedPropsToName)(X,J.props);let{props:q}=J;U();function U(){for(let L of H){if(z)V(L);if(J.allErrors)F(L);else X.var(K,!0),F(L),X.if(K)}}function V(L){for(let N in z)if(new RegExp(L).test(N))(0,xB.checkStrictMode)(J,`property ${N} matches pattern ${L} (use allowMatchingProperties)`)}function F(L){X.forIn("key",$,(N)=>{X.if(e8._`${(0,TB.usePattern)(Q,L)}.test(${N})`,()=>{let w=B.includes(L);if(!w)Q.subschema({keyword:"patternProperties",schemaProp:L,dataProp:N,dataPropType:yB.Type.Str},K);if(J.opts.unevaluated&&q!==!0)X.assign(e8._`${q}[${N}]`,!0);else if(!w&&!J.allErrors)X.if((0,e8.not)(K),()=>X.break())})})}}};gB.default=rj});var uB=P((fB)=>{Object.defineProperty(fB,"__esModule",{value:!0});var tj=e(),aj={keyword:"not",schemaType:["object","boolean"],trackErrors:!0,code(Q){let{gen:X,schema:Y,it:$}=Q;if((0,tj.alwaysValidSchema)($,Y)){Q.fail();return}let W=X.name("valid");Q.subschema({keyword:"not",compositeRule:!0,createErrors:!1,allErrors:!1},W),Q.failResult(W,()=>Q.reset(),()=>Q.error())},error:{message:"must NOT be valid"}};fB.default=aj});var mB=P((lB)=>{Object.defineProperty(lB,"__esModule",{value:!0});var ej=n0(),QR={keyword:"anyOf",schemaType:"array",trackErrors:!0,code:ej.validateUnion,error:{message:"must match a schema in anyOf"}};lB.default=QR});var pB=P((cB)=>{Object.defineProperty(cB,"__esModule",{value:!0});var QQ=p(),YR=e(),$R={message:"must match exactly one schema in oneOf",params:({params:Q})=>QQ._`{passingSchemas: ${Q.passing}}`},WR={keyword:"oneOf",schemaType:"array",trackErrors:!0,error:$R,code(Q){let{gen:X,schema:Y,parentSchema:$,it:W}=Q;if(!Array.isArray(Y))throw Error("ajv implementation error");if(W.opts.discriminator&&$.discriminator)return;let J=Y,G=X.let("valid",!1),H=X.let("passing",null),B=X.name("_valid");Q.setParams({passing:H}),X.block(z),Q.result(G,()=>Q.reset(),()=>Q.error(!0));function z(){J.forEach((K,q)=>{let U;if((0,YR.alwaysValidSchema)(W,K))X.var(B,!0);else U=Q.subschema({keyword:"oneOf",schemaProp:q,compositeRule:!0},B);if(q>0)X.if(QQ._`${B} && ${G}`).assign(G,!1).assign(H,QQ._`[${H}, ${q}]`).else();X.if(B,()=>{if(X.assign(G,!0),X.assign(H,q),U)Q.mergeEvaluated(U,QQ.Name)})})}}};cB.default=WR});var iB=P((dB)=>{Object.defineProperty(dB,"__esModule",{value:!0});var GR=e(),HR={keyword:"allOf",schemaType:"array",code(Q){let{gen:X,schema:Y,it:$}=Q;if(!Array.isArray(Y))throw Error("ajv implementation error");let W=X.name("valid");Y.forEach((J,G)=>{if((0,GR.alwaysValidSchema)($,J))return;let H=Q.subschema({keyword:"allOf",schemaProp:G},W);Q.ok(W),Q.mergeEvaluated(H)})}};dB.default=HR});var tB=P((oB)=>{Object.defineProperty(oB,"__esModule",{value:!0});var XQ=p(),rB=e(),zR={message:({params:Q})=>XQ.str`must match "${Q.ifClause}" schema`,params:({params:Q})=>XQ._`{failingKeyword: ${Q.ifClause}}`},KR={keyword:"if",schemaType:["object","boolean"],trackErrors:!0,error:zR,code(Q){let{gen:X,parentSchema:Y,it:$}=Q;if(Y.then===void 0&&Y.else===void 0)(0,rB.checkStrictMode)($,'"if" without "then" and "else" is ignored');let W=nB($,"then"),J=nB($,"else");if(!W&&!J)return;let G=X.let("valid",!0),H=X.name("_valid");if(B(),Q.reset(),W&&J){let K=X.let("ifClause");Q.setParams({ifClause:K}),X.if(H,z("then",K),z("else",K))}else if(W)X.if(H,z("then"));else X.if((0,XQ.not)(H),z("else"));Q.pass(G,()=>Q.error(!0));function B(){let K=Q.subschema({keyword:"if",compositeRule:!0,createErrors:!1,allErrors:!1},H);Q.mergeEvaluated(K)}function z(K,q){return()=>{let U=Q.subschema({keyword:K},H);if(X.assign(G,H),Q.mergeValidEvaluated(U,G),q)X.assign(q,XQ._`${K}`);else Q.setParams({ifClause:K})}}}};function nB(Q,X){let Y=Q.schema[X];return Y!==void 0&&!(0,rB.alwaysValidSchema)(Q,Y)}oB.default=KR});var sB=P((aB)=>{Object.defineProperty(aB,"__esModule",{value:!0});var qR=e(),UR={keyword:["then","else"],schemaType:["object","boolean"],code({keyword:Q,parentSchema:X,it:Y}){if(X.if===void 0)(0,qR.checkStrictMode)(Y,`"${Q}" without "if" is ignored`)}};aB.default=UR});var Qz=P((eB)=>{Object.defineProperty(eB,"__esModule",{value:!0});var FR=g$(),NR=LB(),DR=h$(),OR=DB(),wR=wB(),MR=EB(),AR=SB(),jR=u$(),RR=_B(),IR=hB(),ER=uB(),bR=mB(),PR=pB(),SR=iB(),ZR=tB(),CR=sB();function kR(Q=!1){let X=[ER.default,bR.default,PR.default,SR.default,ZR.default,CR.default,AR.default,jR.default,MR.default,RR.default,IR.default];if(Q)X.push(NR.default,OR.default);else X.push(FR.default,DR.default);return X.push(wR.default),X}eB.default=kR});var Yz=P((Xz)=>{Object.defineProperty(Xz,"__esModule",{value:!0});var N0=p(),_R={message:({schemaCode:Q})=>N0.str`must match format "${Q}"`,params:({schemaCode:Q})=>N0._`{format: ${Q}}`},TR={keyword:"format",type:["number","string"],schemaType:"string",$data:!0,error:_R,code(Q,X){let{gen:Y,data:$,$data:W,schema:J,schemaCode:G,it:H}=Q,{opts:B,errSchemaPath:z,schemaEnv:K,self:q}=H;if(!B.validateFormats)return;if(W)U();else V();function U(){let F=Y.scopeValue("formats",{ref:q.formats,code:B.code.formats}),L=Y.const("fDef",N0._`${F}[${G}]`),N=Y.let("fType"),w=Y.let("format");Y.if(N0._`typeof ${L} == "object" && !(${L} instanceof RegExp)`,()=>Y.assign(N,N0._`${L}.type || "string"`).assign(w,N0._`${L}.validate`),()=>Y.assign(N,N0._`"string"`).assign(w,L)),Q.fail$data((0,N0.or)(A(),R()));function A(){if(B.strictSchema===!1)return N0.nil;return N0._`${G} && !${w}`}function R(){let S=K.$async?N0._`(${L}.async ? await ${w}(${$}) : ${w}(${$}))`:N0._`${w}(${$})`,C=N0._`(typeof ${w} == "function" ? ${S} : ${w}.test(${$}))`;return N0._`${w} && ${w} !== true && ${N} === ${X} && !${C}`}}function V(){let F=q.formats[J];if(!F){A();return}if(F===!0)return;let[L,N,w]=R(F);if(L===X)Q.pass(S());function A(){if(B.strictSchema===!1){q.logger.warn(C());return}throw Error(C());function C(){return`unknown format "${J}" ignored in schema at path "${z}"`}}function R(C){let U0=C instanceof RegExp?(0,N0.regexpCode)(C):B.code.formats?N0._`${B.code.formats}${(0,N0.getProperty)(J)}`:void 0,L0=Y.scopeValue("formats",{key:J,ref:C,code:U0});if(typeof C=="object"&&!(C instanceof RegExp))return[C.type||"string",C.validate,N0._`${L0}.validate`];return["string",C,L0]}function S(){if(typeof F=="object"&&!(F instanceof RegExp)&&F.async){if(!K.$async)throw Error("async format in sync schema");return N0._`await ${w}(${$})`}return typeof N=="function"?N0._`${w}(${$})`:N0._`${w}.test(${$})`}}}};Xz.default=TR});var Wz=P(($z)=>{Object.defineProperty($z,"__esModule",{value:!0});var yR=Yz(),gR=[yR.default];$z.default=gR});var Hz=P((Jz)=>{Object.defineProperty(Jz,"__esModule",{value:!0});Jz.contentVocabulary=Jz.metadataVocabulary=void 0;Jz.metadataVocabulary=["title","description","default","deprecated","readOnly","writeOnly","examples"];Jz.contentVocabulary=["contentMediaType","contentEncoding","contentSchema"]});var Kz=P((zz)=>{Object.defineProperty(zz,"__esModule",{value:!0});var uR=vH(),lR=JB(),mR=Qz(),cR=Wz(),Bz=Hz(),pR=[uR.default,lR.default,(0,mR.default)(),cR.default,Bz.metadataVocabulary,Bz.contentVocabulary];zz.default=pR});var Lz=P((qz)=>{Object.defineProperty(qz,"__esModule",{value:!0});qz.DiscrError=void 0;var Vz;(function(Q){Q.Tag="tag",Q.Mapping="mapping"})(Vz||(qz.DiscrError=Vz={}))});var Dz=P((Nz)=>{Object.defineProperty(Nz,"__esModule",{value:!0});var t6=p(),m$=Lz(),Fz=g8(),iR=o4(),nR=e(),rR={message:({params:{discrError:Q,tagName:X}})=>Q===m$.DiscrError.Tag?`tag "${X}" must be string`:`value of tag "${X}" must be in oneOf`,params:({params:{discrError:Q,tag:X,tagName:Y}})=>t6._`{error: ${Q}, tag: ${Y}, tagValue: ${X}}`},oR={keyword:"discriminator",type:"object",schemaType:"object",error:rR,code(Q){let{gen:X,data:Y,schema:$,parentSchema:W,it:J}=Q,{oneOf:G}=W;if(!J.opts.discriminator)throw Error("discriminator: requires discriminator option");let H=$.propertyName;if(typeof H!="string")throw Error("discriminator: requires propertyName");if($.mapping)throw Error("discriminator: mapping is not supported");if(!G)throw Error("discriminator: requires oneOf keyword");let B=X.let("valid",!1),z=X.const("tag",t6._`${Y}${(0,t6.getProperty)(H)}`);X.if(t6._`typeof ${z} == "string"`,()=>K(),()=>Q.error(!1,{discrError:m$.DiscrError.Tag,tag:z,tagName:H})),Q.ok(B);function K(){let V=U();X.if(!1);for(let F in V)X.elseIf(t6._`${z} === ${F}`),X.assign(B,q(V[F]));X.else(),Q.error(!1,{discrError:m$.DiscrError.Mapping,tag:z,tagName:H}),X.endIf()}function q(V){let F=X.name("valid"),L=Q.subschema({keyword:"oneOf",schemaProp:V},F);return Q.mergeEvaluated(L,t6.Name),F}function U(){var V;let F={},L=w(W),N=!0;for(let S=0;S<G.length;S++){let C=G[S];if((C===null||C===void 0?void 0:C.$ref)&&!(0,nR.schemaHasRulesButRef)(C,J.self.RULES)){let L0=C.$ref;if(C=Fz.resolveRef.call(J.self,J.schemaEnv.root,J.baseId,L0),C instanceof Fz.SchemaEnv)C=C.schema;if(C===void 0)throw new iR.default(J.opts.uriResolver,J.baseId,L0)}let U0=(V=C===null||C===void 0?void 0:C.properties)===null||V===void 0?void 0:V[H];if(typeof U0!="object")throw Error(`discriminator: oneOf subschemas (or referenced schemas) must have "properties/${H}"`);N=N&&(L||w(C)),A(U0,S)}if(!N)throw Error(`discriminator: "${H}" must be required`);return F;function w({required:S}){return Array.isArray(S)&&S.includes(H)}function A(S,C){if(S.const)R(S.const,C);else if(S.enum)for(let U0 of S.enum)R(U0,C);else throw Error(`discriminator: "properties/${H}" must have "const" or "enum"`)}function R(S,C){if(typeof S!="string"||S in F)throw Error(`discriminator: "${H}" values must be unique strings`);F[S]=C}}}};Nz.default=oR});var Oz=P((WT,aR)=>{aR.exports={$schema:"http://json-schema.org/draft-07/schema#",$id:"http://json-schema.org/draft-07/schema#",title:"Core schema meta-schema",definitions:{schemaArray:{type:"array",minItems:1,items:{$ref:"#"}},nonNegativeInteger:{type:"integer",minimum:0},nonNegativeIntegerDefault0:{allOf:[{$ref:"#/definitions/nonNegativeInteger"},{default:0}]},simpleTypes:{enum:["array","boolean","integer","null","number","object","string"]},stringArray:{type:"array",items:{type:"string"},uniqueItems:!0,default:[]}},type:["object","boolean"],properties:{$id:{type:"string",format:"uri-reference"},$schema:{type:"string",format:"uri"},$ref:{type:"string",format:"uri-reference"},$comment:{type:"string"},title:{type:"string"},description:{type:"string"},default:!0,readOnly:{type:"boolean",default:!1},examples:{type:"array",items:!0},multipleOf:{type:"number",exclusiveMinimum:0},maximum:{type:"number"},exclusiveMaximum:{type:"number"},minimum:{type:"number"},exclusiveMinimum:{type:"number"},maxLength:{$ref:"#/definitions/nonNegativeInteger"},minLength:{$ref:"#/definitions/nonNegativeIntegerDefault0"},pattern:{type:"string",format:"regex"},additionalItems:{$ref:"#"},items:{anyOf:[{$ref:"#"},{$ref:"#/definitions/schemaArray"}],default:!0},maxItems:{$ref:"#/definitions/nonNegativeInteger"},minItems:{$ref:"#/definitions/nonNegativeIntegerDefault0"},uniqueItems:{type:"boolean",default:!1},contains:{$ref:"#"},maxProperties:{$ref:"#/definitions/nonNegativeInteger"},minProperties:{$ref:"#/definitions/nonNegativeIntegerDefault0"},required:{$ref:"#/definitions/stringArray"},additionalProperties:{$ref:"#"},definitions:{type:"object",additionalProperties:{$ref:"#"},default:{}},properties:{type:"object",additionalProperties:{$ref:"#"},default:{}},patternProperties:{type:"object",additionalProperties:{$ref:"#"},propertyNames:{format:"regex"},default:{}},dependencies:{type:"object",additionalProperties:{anyOf:[{$ref:"#"},{$ref:"#/definitions/stringArray"}]}},propertyNames:{$ref:"#"},const:!0,enum:{type:"array",items:!0,minItems:1,uniqueItems:!0},type:{anyOf:[{$ref:"#/definitions/simpleTypes"},{type:"array",items:{$ref:"#/definitions/simpleTypes"},minItems:1,uniqueItems:!0}]},format:{type:"string"},contentMediaType:{type:"string"},contentEncoding:{type:"string"},if:{$ref:"#"},then:{$ref:"#"},else:{$ref:"#"},allOf:{$ref:"#/definitions/schemaArray"},anyOf:{$ref:"#/definitions/schemaArray"},oneOf:{$ref:"#/definitions/schemaArray"},not:{$ref:"#"}},default:!0}});var p$=P((u0,c$)=>{Object.defineProperty(u0,"__esModule",{value:!0});u0.MissingRefError=u0.ValidationError=u0.CodeGen=u0.Name=u0.nil=u0.stringify=u0.str=u0._=u0.KeywordCxt=u0.Ajv=void 0;var sR=jH(),eR=Kz(),QI=Dz(),wz=Oz(),XI=["/properties"],YQ="http://json-schema.org/draft-07/schema";class H9 extends sR.default{_addVocabularies(){if(super._addVocabularies(),eR.default.forEach((Q)=>this.addVocabulary(Q)),this.opts.discriminator)this.addKeyword(QI.default)}_addDefaultMetaSchema(){if(super._addDefaultMetaSchema(),!this.opts.meta)return;let Q=this.opts.$data?this.$dataMetaSchema(wz,XI):wz;this.addMetaSchema(Q,YQ,!1),this.refs["http://json-schema.org/schema"]=YQ}defaultMeta(){return this.opts.defaultMeta=super.defaultMeta()||(this.getSchema(YQ)?YQ:void 0)}}u0.Ajv=H9;c$.exports=u0=H9;c$.exports.Ajv=H9;Object.defineProperty(u0,"__esModule",{value:!0});u0.default=H9;var YI=r4();Object.defineProperty(u0,"KeywordCxt",{enumerable:!0,get:function(){return YI.KeywordCxt}});var a6=p();Object.defineProperty(u0,"_",{enumerable:!0,get:function(){return a6._}});Object.defineProperty(u0,"str",{enumerable:!0,get:function(){return a6.str}});Object.defineProperty(u0,"stringify",{enumerable:!0,get:function(){return a6.stringify}});Object.defineProperty(u0,"nil",{enumerable:!0,get:function(){return a6.nil}});Object.defineProperty(u0,"Name",{enumerable:!0,get:function(){return a6.Name}});Object.defineProperty(u0,"CodeGen",{enumerable:!0,get:function(){return a6.CodeGen}});var $I=x8();Object.defineProperty(u0,"ValidationError",{enumerable:!0,get:function(){return $I.default}});var WI=o4();Object.defineProperty(u0,"MissingRefError",{enumerable:!0,get:function(){return WI.default}})});var Zz=P((Pz)=>{Object.defineProperty(Pz,"__esModule",{value:!0});Pz.formatNames=Pz.fastFormats=Pz.fullFormats=void 0;function L1(Q,X){return{validate:Q,compare:X}}Pz.fullFormats={date:L1(Rz,r$),time:L1(i$(!0),o$),"date-time":L1(Mz(!0),Ez),"iso-time":L1(i$(),Iz),"iso-date-time":L1(Mz(),bz),duration:/^P(?!$)((\d+Y)?(\d+M)?(\d+D)?(T(?=\d)(\d+H)?(\d+M)?(\d+S)?)?|(\d+W)?)$/,uri:qI,"uri-reference":/^(?:[a-z][a-z0-9+\-.]*:)?(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'"()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?(?:\?(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i,"uri-template":/^(?:(?:[^\x00-\x20"'<>%\\^`{|}]|%[0-9a-f]{2})|\{[+#./;?&=,!@|]?(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?(?:,(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?)*\})*$/i,url:/^(?:https?|ftp):\/\/(?:\S+(?::\S*)?@)?(?:(?!(?:10|127)(?:\.\d{1,3}){3})(?!(?:169\.254|192\.168)(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z0-9\u{00a1}-\u{ffff}]+-)*[a-z0-9\u{00a1}-\u{ffff}]+)(?:\.(?:[a-z0-9\u{00a1}-\u{ffff}]+-)*[a-z0-9\u{00a1}-\u{ffff}]+)*(?:\.(?:[a-z\u{00a1}-\u{ffff}]{2,})))(?::\d{2,5})?(?:\/[^\s]*)?$/iu,email:/^[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?$/i,hostname:/^(?=.{1,253}\.?$)[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[-0-9a-z]{0,61}[0-9a-z])?)*\.?$/i,ipv4:/^(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)\.){3}(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)$/,ipv6:/^((([0-9a-f]{1,4}:){7}([0-9a-f]{1,4}|:))|(([0-9a-f]{1,4}:){6}(:[0-9a-f]{1,4}|((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9a-f]{1,4}:){5}(((:[0-9a-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9a-f]{1,4}:){4}(((:[0-9a-f]{1,4}){1,3})|((:[0-9a-f]{1,4})?:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){3}(((:[0-9a-f]{1,4}){1,4})|((:[0-9a-f]{1,4}){0,2}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){2}(((:[0-9a-f]{1,4}){1,5})|((:[0-9a-f]{1,4}){0,3}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){1}(((:[0-9a-f]{1,4}){1,6})|((:[0-9a-f]{1,4}){0,4}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(:(((:[0-9a-f]{1,4}){1,7})|((:[0-9a-f]{1,4}){0,5}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))$/i,regex:wI,uuid:/^(?:urn:uuid:)?[0-9a-f]{8}-(?:[0-9a-f]{4}-){3}[0-9a-f]{12}$/i,"json-pointer":/^(?:\/(?:[^~/]|~0|~1)*)*$/,"json-pointer-uri-fragment":/^#(?:\/(?:[a-z0-9_\-.!$&'()*+,;:=@]|%[0-9a-f]{2}|~0|~1)*)*$/i,"relative-json-pointer":/^(?:0|[1-9][0-9]*)(?:#|(?:\/(?:[^~/]|~0|~1)*)*)$/,byte:UI,int32:{type:"number",validate:NI},int64:{type:"number",validate:DI},float:{type:"number",validate:jz},double:{type:"number",validate:jz},password:!0,binary:!0};Pz.fastFormats={...Pz.fullFormats,date:L1(/^\d\d\d\d-[0-1]\d-[0-3]\d$/,r$),time:L1(/^(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)$/i,o$),"date-time":L1(/^\d\d\d\d-[0-1]\d-[0-3]\dt(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)$/i,Ez),"iso-time":L1(/^(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)?$/i,Iz),"iso-date-time":L1(/^\d\d\d\d-[0-1]\d-[0-3]\d[t\s](?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)?$/i,bz),uri:/^(?:[a-z][a-z0-9+\-.]*:)(?:\/?\/)?[^\s]*$/i,"uri-reference":/^(?:(?:[a-z][a-z0-9+\-.]*:)?\/?\/)?(?:[^\\\s#][^\s#]*)?(?:#[^\\\s]*)?$/i,email:/^[a-z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?)*$/i};Pz.formatNames=Object.keys(Pz.fullFormats);function HI(Q){return Q%4===0&&(Q%100!==0||Q%400===0)}var BI=/^(\d\d\d\d)-(\d\d)-(\d\d)$/,zI=[0,31,28,31,30,31,30,31,31,30,31,30,31];function Rz(Q){let X=BI.exec(Q);if(!X)return!1;let Y=+X[1],$=+X[2],W=+X[3];return $>=1&&$<=12&&W>=1&&W<=($===2&&HI(Y)?29:zI[$])}function r$(Q,X){if(!(Q&&X))return;if(Q>X)return 1;if(Q<X)return-1;return 0}var d$=/^(\d\d):(\d\d):(\d\d(?:\.\d+)?)(z|([+-])(\d\d)(?::?(\d\d))?)?$/i;function i$(Q){return function(Y){let $=d$.exec(Y);if(!$)return!1;let W=+$[1],J=+$[2],G=+$[3],H=$[4],B=$[5]==="-"?-1:1,z=+($[6]||0),K=+($[7]||0);if(z>23||K>59||Q&&!H)return!1;if(W<=23&&J<=59&&G<60)return!0;let q=J-K*B,U=W-z*B-(q<0?1:0);return(U===23||U===-1)&&(q===59||q===-1)&&G<61}}function o$(Q,X){if(!(Q&&X))return;let Y=new Date("2020-01-01T"+Q).valueOf(),$=new Date("2020-01-01T"+X).valueOf();if(!(Y&&$))return;return Y-$}function Iz(Q,X){if(!(Q&&X))return;let Y=d$.exec(Q),$=d$.exec(X);if(!(Y&&$))return;if(Q=Y[1]+Y[2]+Y[3],X=$[1]+$[2]+$[3],Q>X)return 1;if(Q<X)return-1;return 0}var n$=/t|\s/i;function Mz(Q){let X=i$(Q);return function($){let W=$.split(n$);return W.length===2&&Rz(W[0])&&X(W[1])}}function Ez(Q,X){if(!(Q&&X))return;let Y=new Date(Q).valueOf(),$=new Date(X).valueOf();if(!(Y&&$))return;return Y-$}function bz(Q,X){if(!(Q&&X))return;let[Y,$]=Q.split(n$),[W,J]=X.split(n$),G=r$(Y,W);if(G===void 0)return;return G||o$($,J)}var KI=/\/|:/,VI=/^(?:[a-z][a-z0-9+\-.]*:)(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)(?:\?(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i;function qI(Q){return KI.test(Q)&&VI.test(Q)}var Az=/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/gm;function UI(Q){return Az.lastIndex=0,Az.test(Q)}var LI=-2147483648,FI=2147483647;function NI(Q){return Number.isInteger(Q)&&Q<=FI&&Q>=LI}function DI(Q){return Number.isInteger(Q)}function jz(){return!0}var OI=/[^\\]\\Z/;function wI(Q){if(OI.test(Q))return!1;try{return new RegExp(Q),!0}catch(X){return!1}}});var kz=P((Cz)=>{Object.defineProperty(Cz,"__esModule",{value:!0});Cz.formatLimitDefinition=void 0;var AI=p$(),W1=p(),o1=W1.operators,$Q={formatMaximum:{okStr:"<=",ok:o1.LTE,fail:o1.GT},formatMinimum:{okStr:">=",ok:o1.GTE,fail:o1.LT},formatExclusiveMaximum:{okStr:"<",ok:o1.LT,fail:o1.GTE},formatExclusiveMinimum:{okStr:">",ok:o1.GT,fail:o1.LTE}},jI={message:({keyword:Q,schemaCode:X})=>W1.str`should be ${$Q[Q].okStr} ${X}`,params:({keyword:Q,schemaCode:X})=>W1._`{comparison: ${$Q[Q].okStr}, limit: ${X}}`};Cz.formatLimitDefinition={keyword:Object.keys($Q),type:"string",schemaType:"string",$data:!0,error:jI,code(Q){let{gen:X,data:Y,schemaCode:$,keyword:W,it:J}=Q,{opts:G,self:H}=J;if(!G.validateFormats)return;let B=new AI.KeywordCxt(J,H.RULES.all.format.definition,"format");if(B.$data)z();else K();function z(){let U=X.scopeValue("formats",{ref:H.formats,code:G.code.formats}),V=X.const("fmt",W1._`${U}[${B.schemaCode}]`);Q.fail$data((0,W1.or)(W1._`typeof ${V} != "object"`,W1._`${V} instanceof RegExp`,W1._`typeof ${V}.compare != "function"`,q(V)))}function K(){let U=B.schema,V=H.formats[U];if(!V||V===!0)return;if(typeof V!="object"||V instanceof RegExp||typeof V.compare!="function")throw Error(`"${W}": format "${U}" does not define "compare" function`);let F=X.scopeValue("formats",{key:U,ref:V,code:G.code.formats?W1._`${G.code.formats}${(0,W1.getProperty)(U)}`:void 0});Q.fail$data(q(F))}function q(U){return W1._`${U}.compare(${Y}, ${$}) ${$Q[W].fail} 0`}},dependencies:["format"]};var RI=(Q)=>{return Q.addKeyword(Cz.formatLimitDefinition),Q};Cz.default=RI});var xz=P((B9,Tz)=>{Object.defineProperty(B9,"__esModule",{value:!0});var s6=Zz(),EI=kz(),s$=p(),vz=new s$.Name("fullFormats"),bI=new s$.Name("fastFormats"),e$=(Q,X={keywords:!0})=>{if(Array.isArray(X))return _z(Q,X,s6.fullFormats,vz),Q;let[Y,$]=X.mode==="fast"?[s6.fastFormats,bI]:[s6.fullFormats,vz],W=X.formats||s6.formatNames;if(_z(Q,W,Y,$),X.keywords)(0,EI.default)(Q);return Q};e$.get=(Q,X="full")=>{let $=(X==="fast"?s6.fastFormats:s6.fullFormats)[Q];if(!$)throw Error(`Unknown format "${Q}"`);return $};function _z(Q,X,Y,$){var W,J;(W=(J=Q.opts.code).formats)!==null&&W!==void 0||(J.formats=s$._`require("ajv-formats/dist/formats").${$}`);for(let G of X)Q.addFormat(G,Y[G])}Tz.exports=B9=e$;Object.defineProperty(B9,"__esModule",{value:!0});B9.default=e$});import{join as nz}from"path";import{fileURLToPath as yI}from"url";import{setMaxListeners as VK}from"events";var qK=50;function M6(Q=qK){let X=new AbortController;return VK(Q,X.signal),X}import{spawn as $q}from"child_process";import{createInterface as Wq}from"readline";import*as f from"fs";import{stat as uV,readdir as lV,readFile as $W,unlink as mV,rmdir as cV,rm as pV,mkdir as dV,rename as iV,open as nV}from"fs/promises";var UK=typeof global=="object"&&global&&global.Object===Object&&global,U7=UK;var LK=typeof self=="object"&&self&&self.Object===Object&&self,FK=U7||LK||Function("return this")(),A6=FK;var NK=A6.Symbol,j6=NK;var L7=Object.prototype,DK=L7.hasOwnProperty,OK=L7.toString,X4=j6?j6.toStringTag:void 0;function wK(Q){var X=DK.call(Q,X4),Y=Q[X4];try{Q[X4]=void 0;var $=!0}catch(J){}var W=OK.call(Q);if($)if(X)Q[X4]=Y;else delete Q[X4];return W}var F7=wK;var MK=Object.prototype,AK=MK.toString;function jK(Q){return AK.call(Q)}var N7=jK;var RK="[object Null]",IK="[object Undefined]",D7=j6?j6.toStringTag:void 0;function EK(Q){if(Q==null)return Q===void 0?IK:RK;return D7&&D7 in Object(Q)?F7(Q):N7(Q)}var O7=EK;function bK(Q){var X=typeof Q;return Q!=null&&(X=="object"||X=="function")}var q9=bK;var PK="[object AsyncFunction]",SK="[object Function]",ZK="[object GeneratorFunction]",CK="[object Proxy]";function kK(Q){if(!q9(Q))return!1;var X=O7(Q);return X==SK||X==ZK||X==PK||X==CK}var w7=kK;var vK=A6["__core-js_shared__"],U9=vK;var M7=function(){var Q=/[^.]+$/.exec(U9&&U9.keys&&U9.keys.IE_PROTO||"");return Q?"Symbol(src)_1."+Q:""}();function _K(Q){return!!M7&&M7 in Q}var A7=_K;var TK=Function.prototype,xK=TK.toString;function yK(Q){if(Q!=null){try{return xK.call(Q)}catch(X){}try{return Q+""}catch(X){}}return""}var j7=yK;var gK=/[\\^$.*+?()[\]{}|]/g,hK=/^\[object .+?Constructor\]$/,fK=Function.prototype,uK=Object.prototype,lK=fK.toString,mK=uK.hasOwnProperty,cK=RegExp("^"+lK.call(mK).replace(gK,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function pK(Q){if(!q9(Q)||A7(Q))return!1;var X=w7(Q)?cK:hK;return X.test(j7(Q))}var R7=pK;function dK(Q,X){return Q==null?void 0:Q[X]}var I7=dK;function iK(Q,X){var Y=I7(Q,X);return R7(Y)?Y:void 0}var L9=iK;var nK=L9(Object,"create"),N1=nK;function rK(){this.__data__=N1?N1(null):{},this.size=0}var E7=rK;function oK(Q){var X=this.has(Q)&&delete this.__data__[Q];return this.size-=X?1:0,X}var b7=oK;var tK="__lodash_hash_undefined__",aK=Object.prototype,sK=aK.hasOwnProperty;function eK(Q){var X=this.__data__;if(N1){var Y=X[Q];return Y===tK?void 0:Y}return sK.call(X,Q)?X[Q]:void 0}var P7=eK;var QV=Object.prototype,XV=QV.hasOwnProperty;function YV(Q){var X=this.__data__;return N1?X[Q]!==void 0:XV.call(X,Q)}var S7=YV;var $V="__lodash_hash_undefined__";function WV(Q,X){var Y=this.__data__;return this.size+=this.has(Q)?0:1,Y[Q]=N1&&X===void 0?$V:X,this}var Z7=WV;function R6(Q){var X=-1,Y=Q==null?0:Q.length;this.clear();while(++X<Y){var $=Q[X];this.set($[0],$[1])}}R6.prototype.clear=E7;R6.prototype.delete=b7;R6.prototype.get=P7;R6.prototype.has=S7;R6.prototype.set=Z7;var HQ=R6;function JV(){this.__data__=[],this.size=0}var C7=JV;function GV(Q,X){return Q===X||Q!==Q&&X!==X}var k7=GV;function HV(Q,X){var Y=Q.length;while(Y--)if(k7(Q[Y][0],X))return Y;return-1}var v1=HV;var BV=Array.prototype,zV=BV.splice;function KV(Q){var X=this.__data__,Y=v1(X,Q);if(Y<0)return!1;var $=X.length-1;if(Y==$)X.pop();else zV.call(X,Y,1);return--this.size,!0}var v7=KV;function VV(Q){var X=this.__data__,Y=v1(X,Q);return Y<0?void 0:X[Y][1]}var _7=VV;function qV(Q){return v1(this.__data__,Q)>-1}var T7=qV;function UV(Q,X){var Y=this.__data__,$=v1(Y,Q);if($<0)++this.size,Y.push([Q,X]);else Y[$][1]=X;return this}var x7=UV;function I6(Q){var X=-1,Y=Q==null?0:Q.length;this.clear();while(++X<Y){var $=Q[X];this.set($[0],$[1])}}I6.prototype.clear=C7;I6.prototype.delete=v7;I6.prototype.get=_7;I6.prototype.has=T7;I6.prototype.set=x7;var y7=I6;var LV=L9(A6,"Map"),g7=LV;function FV(){this.size=0,this.__data__={hash:new HQ,map:new(g7||y7),string:new HQ}}var h7=FV;function NV(Q){var X=typeof Q;return X=="string"||X=="number"||X=="symbol"||X=="boolean"?Q!=="__proto__":Q===null}var f7=NV;function DV(Q,X){var Y=Q.__data__;return f7(X)?Y[typeof X=="string"?"string":"hash"]:Y.map}var _1=DV;function OV(Q){var X=_1(this,Q).delete(Q);return this.size-=X?1:0,X}var u7=OV;function wV(Q){return _1(this,Q).get(Q)}var l7=wV;function MV(Q){return _1(this,Q).has(Q)}var m7=MV;function AV(Q,X){var Y=_1(this,Q),$=Y.size;return Y.set(Q,X),this.size+=Y.size==$?0:1,this}var c7=AV;function E6(Q){var X=-1,Y=Q==null?0:Q.length;this.clear();while(++X<Y){var $=Q[X];this.set($[0],$[1])}}E6.prototype.clear=h7;E6.prototype.delete=u7;E6.prototype.get=l7;E6.prototype.has=m7;E6.prototype.set=c7;var BQ=E6;var jV="Expected a function";function zQ(Q,X){if(typeof Q!="function"||X!=null&&typeof X!="function")throw TypeError(jV);var Y=function(){var $=arguments,W=X?X.apply(this,$):$[0],J=Y.cache;if(J.has(W))return J.get(W);var G=Q.apply(this,$);return Y.cache=J.set(W,G)||J,G};return Y.cache=new(zQ.Cache||BQ),Y}zQ.Cache=BQ;var T1=zQ;function RV(Q,X){if(Q.destroyed)return;Q.write(X)}function p7(Q){RV(process.stderr,Q)}var d7=T1((Q)=>{if(!Q||Q.trim()==="")return null;let X=Q.split(",").map((J)=>J.trim()).filter(Boolean);if(X.length===0)return null;let Y=X.some((J)=>J.startsWith("!")),$=X.some((J)=>!J.startsWith("!"));if(Y&&$)return null;let W=X.map((J)=>J.replace(/^!/,"").toLowerCase());return{include:Y?[]:W,exclude:Y?W:[],isExclusive:Y}});function IV(Q){let X=[],Y=Q.match(/^MCP server ["']([^"']+)["']/);if(Y&&Y[1])X.push("mcp"),X.push(Y[1].toLowerCase());else{let J=Q.match(/^([^:[]+):/);if(J&&J[1])X.push(J[1].trim().toLowerCase())}let $=Q.match(/^\[([^\]]+)]/);if($&&$[1])X.push($[1].trim().toLowerCase());if(Q.toLowerCase().includes("1p event:"))X.push("1p");let W=Q.match(/:\s*([^:]+?)(?:\s+(?:type|mode|status|event))?:/);if(W&&W[1]){let J=W[1].trim().toLowerCase();if(J.length<30&&!J.includes(" "))X.push(J)}return Array.from(new Set(X))}function EV(Q,X){if(!X)return!0;if(Q.length===0)return!1;if(X.isExclusive)return!Q.some((Y)=>X.exclude.includes(Y));else return Q.some((Y)=>X.include.includes(Y))}function i7(Q,X){if(!X)return!0;let Y=IV(Q);return EV(Y,X)}import{join as bV}from"path";import{homedir as PV}from"os";function F9(){return(process.env.CLAUDE_CONFIG_DIR??bV(PV(),".claude")).normalize("NFC")}function KQ(Q){if(!Q)return!1;if(typeof Q==="boolean")return Q;let X=Q.toLowerCase().trim();return["1","true","yes","on"].includes(X)}import{dirname as s7,join as e7}from"path";import{cwd as SV}from"process";import{realpathSync as n7}from"fs";import{randomUUID as ZV}from"crypto";function CV(){let Q="";if(typeof process<"u"&&typeof process.cwd==="function"&&typeof n7==="function")Q=n7(SV()).normalize("NFC");return{originalCwd:Q,projectRoot:Q,totalCostUSD:0,totalAPIDuration:0,totalAPIDurationWithoutRetries:0,totalToolDuration:0,turnHookDurationMs:0,startTime:Date.now(),lastInteractionTime:Date.now(),totalLinesAdded:0,totalLinesRemoved:0,hasUnknownModelCost:!1,cwd:Q,modelUsage:{},mainLoopModelOverride:void 0,initialMainLoopModel:null,modelStrings:null,isInteractive:!1,clientType:"cli",sessionSource:void 0,sessionIngressToken:void 0,oauthTokenFromFd:void 0,apiKeyFromFd:void 0,flagSettingsPath:void 0,allowedSettingSources:["userSettings","projectSettings","localSettings","flagSettings","policySettings"],meter:null,sessionCounter:null,locCounter:null,prCounter:null,commitCounter:null,costCounter:null,tokenCounter:null,codeEditToolDecisionCounter:null,activeTimeCounter:null,statsStore:null,sessionId:ZV(),parentSessionId:void 0,loggerProvider:null,eventLogger:null,meterProvider:null,tracerProvider:null,agentColorMap:new Map,agentColorIndex:0,lastAPIRequest:null,inMemoryErrorLog:[],inlinePlugins:[],chromeFlagOverride:void 0,useCoworkPlugins:!1,sessionBypassPermissionsMode:!1,sessionTrustAccepted:!1,sessionPersistenceDisabled:!1,hasExitedPlanMode:!1,needsPlanModeExitAttachment:!1,lspRecommendationShownThisSession:!1,initJsonSchema:null,registeredHooks:null,planSlugCache:new Map,teleportedSessionInfo:null,invokedSkills:new Map,slowOperations:[],promptCacheBreaks:[],sdkBetas:void 0,mainThreadAgentType:void 0,isRemoteMode:!1,directConnectServerUrl:void 0,systemPromptSectionCache:new Map,lastEmittedDate:null,additionalDirectoriesForClaudeMd:[],resumedTranscriptPath:null,promptCache1hAllowlist:null,promptId:null}}var kV=CV();function r7(){return kV.sessionId}function o7({writeFn:Q,flushIntervalMs:X=1000,maxBufferSize:Y=100,immediateMode:$=!1}){let W=[],J=null;function G(){if(J)clearTimeout(J),J=null}function H(){if(W.length===0)return;Q(W.join("")),W=[],G()}function B(){if(!J)J=setTimeout(H,X)}return{write(z){if($){Q(z);return}if(W.push(z),B(),W.length>=Y)H()},flush:H,dispose(){H()}}}var t7=new Set;function a7(Q){return t7.add(Q),()=>t7.delete(Q)}var vV=T1(()=>{return KQ(process.env.DEBUG)||KQ(process.env.DEBUG_SDK)||process.argv.includes("--debug")||process.argv.includes("-d")||QW()||process.argv.some((Q)=>Q.startsWith("--debug="))||XW()!==null}),_V=T1(()=>{let Q=process.argv.find((Y)=>Y.startsWith("--debug="));if(!Q)return null;let X=Q.substring(8);return d7(X)}),QW=T1(()=>{return process.argv.includes("--debug-to-stderr")||process.argv.includes("-d2e")}),XW=T1(()=>{for(let Q=0;Q<process.argv.length;Q++){let X=process.argv[Q];if(X.startsWith("--debug-file="))return X.substring(13);if(X==="--debug-file"&&Q+1<process.argv.length)return process.argv[Q+1]}return null});function TV(Q){if(typeof process>"u"||typeof process.versions>"u"||typeof process.versions.node>"u")return!1;let X=_V();return i7(Q,X)}var xV=!1;var N9=null;function yV(){if(!N9){let Q=null;N9=o7({writeFn:(X)=>{let Y=YW(),$=s7(Y);if(Q!==$){try{J1().mkdirSync($)}catch{}Q=$}J1().appendFileSync(Y,X),gV()},flushIntervalMs:1000,maxBufferSize:100,immediateMode:vV()}),a7(async()=>N9?.dispose())}return N9}function D1(Q,{level:X}={level:"debug"}){if(!TV(Q))return;if(xV&&Q.includes(`
`))Q=k0(Q);let $=`${new Date().toISOString()} [${X.toUpperCase()}] ${Q.trim()}
`;if(QW()){p7($);return}yV().write($)}function YW(){return XW()??process.env.CLAUDE_CODE_DEBUG_LOGS_DIR??e7(F9(),"debug",`${r7()}.txt`)}var gV=T1(()=>{if(process.argv[2]==="--ripgrep")return;try{let Q=YW(),X=s7(Q),Y=e7(X,"latest");if(!J1().existsSync(X))J1().mkdirSync(X);if(J1().existsSync(Y))try{J1().unlinkSync(Y)}catch{}J1().symlinkSync(Q,Y)}catch{}});var G2=(()=>{let Q=process.env.CLAUDE_CODE_SLOW_OPERATION_THRESHOLD_MS;if(Q!==void 0){let X=Number(Q);if(!Number.isNaN(X)&&X>=0)return X}return 1/0})();var hV={[Symbol.dispose](){}};function fV(){return hV}var V0=fV;function k0(Q,X,Y){let W=[];try{const $=$0(W,V0`JSON.stringify(${Q})`,0);return JSON.stringify(Q,X,Y)}catch(J){var G=J,H=1}finally{W0(W,G,H)}}var D9=(Q,X)=>{let $=[];try{const Y=$0($,V0`JSON.parse(${Q})`,0);return typeof X>"u"?JSON.parse(Q):JSON.parse(Q,X)}catch(W){var J=W,G=1}finally{W0($,J,G)}};var rV={cwd(){return process.cwd()},existsSync(Q){let Y=[];try{const X=$0(Y,V0`fs.existsSync(${Q})`,0);return f.existsSync(Q)}catch($){var W=$,J=1}finally{W0(Y,W,J)}},async stat(Q){return uV(Q)},async readdir(Q){return lV(Q,{withFileTypes:!0})},async unlink(Q){return mV(Q)},async rmdir(Q){return cV(Q)},async rm(Q,X){return pV(Q,X)},async mkdir(Q,X){await dV(Q,{recursive:!0,...X})},async readFile(Q,X){return $W(Q,{encoding:X.encoding})},async rename(Q,X){return iV(Q,X)},statSync(Q){let Y=[];try{const X=$0(Y,V0`fs.statSync(${Q})`,0);return f.statSync(Q)}catch($){var W=$,J=1}finally{W0(Y,W,J)}},lstatSync(Q){let Y=[];try{const X=$0(Y,V0`fs.lstatSync(${Q})`,0);return f.lstatSync(Q)}catch($){var W=$,J=1}finally{W0(Y,W,J)}},readFileSync(Q,X){let $=[];try{const Y=$0($,V0`fs.readFileSync(${Q})`,0);return f.readFileSync(Q,{encoding:X.encoding})}catch(W){var J=W,G=1}finally{W0($,J,G)}},readFileBytesSync(Q){let Y=[];try{const X=$0(Y,V0`fs.readFileBytesSync(${Q})`,0);return f.readFileSync(Q)}catch($){var W=$,J=1}finally{W0(Y,W,J)}},readSync(Q,X){let W=[];try{const Y=$0(W,V0`fs.readSync(${Q}, ${X.length} bytes)`,0);let $=void 0;try{$=f.openSync(Q,"r");let B=Buffer.alloc(X.length),z=f.readSync($,B,0,X.length,0);return{buffer:B,bytesRead:z}}finally{if($)f.closeSync($)}}catch(J){var G=J,H=1}finally{W0(W,G,H)}},appendFileSync(Q,X,Y){let W=[];try{const $=$0(W,V0`fs.appendFileSync(${Q}, ${X.length} chars)`,0);if(!f.existsSync(Q)&&Y?.mode!==void 0){let B=f.openSync(Q,"a",Y.mode);try{f.appendFileSync(B,X)}finally{f.closeSync(B)}}else f.appendFileSync(Q,X)}catch(J){var G=J,H=1}finally{W0(W,G,H)}},copyFileSync(Q,X){let $=[];try{const Y=$0($,V0`fs.copyFileSync(${Q}  ${X})`,0);f.copyFileSync(Q,X)}catch(W){var J=W,G=1}finally{W0($,J,G)}},unlinkSync(Q){let Y=[];try{const X=$0(Y,V0`fs.unlinkSync(${Q})`,0);f.unlinkSync(Q)}catch($){var W=$,J=1}finally{W0(Y,W,J)}},renameSync(Q,X){let $=[];try{const Y=$0($,V0`fs.renameSync(${Q}  ${X})`,0);f.renameSync(Q,X)}catch(W){var J=W,G=1}finally{W0($,J,G)}},linkSync(Q,X){let $=[];try{const Y=$0($,V0`fs.linkSync(${Q}  ${X})`,0);f.linkSync(Q,X)}catch(W){var J=W,G=1}finally{W0($,J,G)}},symlinkSync(Q,X,Y){let W=[];try{const $=$0(W,V0`fs.symlinkSync(${Q}  ${X})`,0);f.symlinkSync(Q,X,Y)}catch(J){var G=J,H=1}finally{W0(W,G,H)}},readlinkSync(Q){let Y=[];try{const X=$0(Y,V0`fs.readlinkSync(${Q})`,0);return f.readlinkSync(Q)}catch($){var W=$,J=1}finally{W0(Y,W,J)}},realpathSync(Q){let Y=[];try{const X=$0(Y,V0`fs.realpathSync(${Q})`,0);return f.realpathSync(Q).normalize("NFC")}catch($){var W=$,J=1}finally{W0(Y,W,J)}},mkdirSync(Q,X){let $=[];try{const Y=$0($,V0`fs.mkdirSync(${Q})`,0);if(!f.existsSync(Q)){let H={recursive:!0};if(X?.mode!==void 0)H.mode=X.mode;f.mkdirSync(Q,H)}}catch(W){var J=W,G=1}finally{W0($,J,G)}},readdirSync(Q){let Y=[];try{const X=$0(Y,V0`fs.readdirSync(${Q})`,0);return f.readdirSync(Q,{withFileTypes:!0})}catch($){var W=$,J=1}finally{W0(Y,W,J)}},readdirStringSync(Q){let Y=[];try{const X=$0(Y,V0`fs.readdirStringSync(${Q})`,0);return f.readdirSync(Q)}catch($){var W=$,J=1}finally{W0(Y,W,J)}},isDirEmptySync(Q){let $=[];try{const X=$0($,V0`fs.isDirEmptySync(${Q})`,0);let Y=this.readdirSync(Q);return Y.length===0}catch(W){var J=W,G=1}finally{W0($,J,G)}},rmdirSync(Q){let Y=[];try{const X=$0(Y,V0`fs.rmdirSync(${Q})`,0);f.rmdirSync(Q)}catch($){var W=$,J=1}finally{W0(Y,W,J)}},rmSync(Q,X){let $=[];try{const Y=$0($,V0`fs.rmSync(${Q})`,0);f.rmSync(Q,X)}catch(W){var J=W,G=1}finally{W0($,J,G)}},createWriteStream(Q){return f.createWriteStream(Q)},async readFileBytes(Q,X){if(X===void 0)return $W(Q);let Y=await nV(Q,"r");try{let{size:$}=await Y.stat(),W=Math.min($,X),J=Buffer.allocUnsafe(W),G=0;while(G<W){let{bytesRead:H}=await Y.read(J,G,W-G,G);if(H===0)break;G+=H}return G<W?J.subarray(0,G):J}finally{await Y.close()}}},oV=rV;function J1(){return oV}var tV=["PreToolUse","PostToolUse","PostToolUseFailure","Notification","UserPromptSubmit","SessionStart","SessionEnd","Stop","SubagentStart","SubagentStop","PreCompact","PermissionRequest","Setup","TeammateIdle","TaskCompleted","ConfigChange"],aV=["clear","logout","prompt_input_exit","other","bypass_permissions_disabled"];class O1 extends Error{}function b6(){return process.versions.bun!==void 0}import{randomUUID as sV}from"crypto";import{appendFileSync as eV,existsSync as Qq,mkdirSync as Xq}from"fs";import{join as WW}from"path";var O9=null,JW=!1;function Yq(){if(JW)return O9;if(JW=!0,!process.env.DEBUG_CLAUDE_AGENT_SDK)return null;let Q=WW(F9(),"debug");if(O9=WW(Q,`sdk-${sV()}.txt`),!Qq(Q))Xq(Q,{recursive:!0});return process.stderr.write(`SDK debug logs: ${O9}
`),O9}function w1(Q){let X=Yq();if(!X)return;let $=`${new Date().toISOString()} ${Q}
`;eV(X,$)}function GW(Q,X){let Y={...Q};if(X){let $={sandbox:X};if(Y.settings)try{$={...D9(Y.settings),sandbox:X}}catch{}Y.settings=k0($)}return Y}class Y4{options;process;processStdin;processStdout;ready=!1;abortController;exitError;exitListeners=[];processExitHandler;abortHandler;constructor(Q){this.options=Q;this.abortController=Q.abortController||M6(),this.initialize()}getDefaultExecutable(){return b6()?"bun":"node"}spawnLocalProcess(Q){let{command:X,args:Y,cwd:$,env:W,signal:J}=Q,G=W.DEBUG_CLAUDE_AGENT_SDK||this.options.stderr?"pipe":"ignore",H=$q(X,Y,{cwd:$,stdio:["pipe","pipe",G],signal:J,env:W,windowsHide:!0});if(W.DEBUG_CLAUDE_AGENT_SDK||this.options.stderr)H.stderr.on("data",(z)=>{let K=z.toString();if(w1(K),this.options.stderr)this.options.stderr(K)});return{stdin:H.stdin,stdout:H.stdout,get killed(){return H.killed},get exitCode(){return H.exitCode},kill:H.kill.bind(H),on:H.on.bind(H),once:H.once.bind(H),off:H.off.bind(H)}}initialize(){try{let{additionalDirectories:Q=[],agent:X,betas:Y,cwd:$,executable:W=this.getDefaultExecutable(),executableArgs:J=[],extraArgs:G={},pathToClaudeCodeExecutable:H,env:B={...process.env},thinkingConfig:z,maxTurns:K,maxBudgetUsd:q,model:U,fallbackModel:V,jsonSchema:F,permissionMode:L,allowDangerouslySkipPermissions:N,permissionPromptToolName:w,continueConversation:A,resume:R,settingSources:S,allowedTools:C=[],disallowedTools:U0=[],tools:L0,mcpServers:s,strictMcpConfig:M0,canUseTool:D0,includePartialMessages:F1,plugins:C1,sandbox:a1}=this.options,l=["--output-format","stream-json","--verbose","--input-format","stream-json"];if(z)switch(z.type){case"enabled":if(z.budgetTokens===void 0)l.push("--thinking","adaptive");else l.push("--max-thinking-tokens",z.budgetTokens.toString());break;case"disabled":l.push("--thinking","disabled");break;case"adaptive":l.push("--thinking","adaptive");break}if(this.options.effort)l.push("--effort",this.options.effort);if(K)l.push("--max-turns",K.toString());if(q!==void 0)l.push("--max-budget-usd",q.toString());if(U)l.push("--model",U);if(X)l.push("--agent",X);if(Y&&Y.length>0)l.push("--betas",Y.join(","));if(F)l.push("--json-schema",k0(F));if(this.options.debugFile)l.push("--debug-file",this.options.debugFile);else if(this.options.debug)l.push("--debug");if(B.DEBUG_CLAUDE_AGENT_SDK)l.push("--debug-to-stderr");if(D0){if(w)throw Error("canUseTool callback cannot be used with permissionPromptToolName. Please use one or the other.");l.push("--permission-prompt-tool","stdio")}else if(w)l.push("--permission-prompt-tool",w);if(A)l.push("--continue");if(R)l.push("--resume",R);if(C.length>0)l.push("--allowedTools",C.join(","));if(U0.length>0)l.push("--disallowedTools",U0.join(","));if(L0!==void 0)if(Array.isArray(L0))if(L0.length===0)l.push("--tools","");else l.push("--tools",L0.join(","));else l.push("--tools","default");if(s&&Object.keys(s).length>0)l.push("--mcp-config",k0({mcpServers:s}));if(S)l.push("--setting-sources",S.join(","));if(M0)l.push("--strict-mcp-config");if(L)l.push("--permission-mode",L);if(N)l.push("--allow-dangerously-skip-permissions");if(V){if(U&&V===U)throw Error("Fallback model cannot be the same as the main model. Please specify a different model for fallbackModel option.");l.push("--fallback-model",V)}if(F1)l.push("--include-partial-messages");for(let P0 of Q)l.push("--add-dir",P0);if(C1&&C1.length>0)for(let P0 of C1)if(P0.type==="local")l.push("--plugin-dir",P0.path);else throw Error(`Unsupported plugin type: ${P0.type}`);if(this.options.forkSession)l.push("--fork-session");if(this.options.resumeSessionAt)l.push("--resume-session-at",this.options.resumeSessionAt);if(this.options.sessionId)l.push("--session-id",this.options.sessionId);if(this.options.persistSession===!1)l.push("--no-session-persistence");let WQ=GW(G??{},a1);for(let[P0,k1]of Object.entries(WQ))if(k1===null)l.push(`--${P0}`);else l.push(`--${P0}`,k1);if(!B.CLAUDE_CODE_ENTRYPOINT)B.CLAUDE_CODE_ENTRYPOINT="sdk-ts";if(delete B.NODE_OPTIONS,B.DEBUG_CLAUDE_AGENT_SDK)B.DEBUG="1";else delete B.DEBUG;let s1=Jq(H),e6=s1?H:W,e1=s1?[...J,...l]:[...J,H,...l],K9={command:e6,args:e1,cwd:$,env:B,signal:this.abortController.signal};if(this.options.spawnClaudeCodeProcess)w1(`Spawning Claude Code (custom): ${e6} ${e1.join(" ")}`),this.process=this.options.spawnClaudeCodeProcess(K9);else{if(!J1().existsSync(H)){let k1=s1?`Claude Code native binary not found at ${H}. Please ensure Claude Code is installed via native installer or specify a valid path with options.pathToClaudeCodeExecutable.`:`Claude Code executable not found at ${H}. Is options.pathToClaudeCodeExecutable set?`;throw ReferenceError(k1)}w1(`Spawning Claude Code: ${e6} ${e1.join(" ")}`),this.process=this.spawnLocalProcess(K9)}this.processStdin=this.process.stdin,this.processStdout=this.process.stdout;let V9=()=>{if(this.process&&!this.process.killed)this.process.kill("SIGTERM")};this.processExitHandler=V9,this.abortHandler=V9,process.on("exit",this.processExitHandler),this.abortController.signal.addEventListener("abort",this.abortHandler),this.process.on("error",(P0)=>{if(this.ready=!1,this.abortController.signal.aborted)this.exitError=new O1("Claude Code process aborted by user");else this.exitError=Error(`Failed to spawn Claude Code process: ${P0.message}`),w1(this.exitError.message)}),this.process.on("exit",(P0,k1)=>{if(this.ready=!1,this.abortController.signal.aborted)this.exitError=new O1("Claude Code process aborted by user");else{let N6=this.getProcessExitError(P0,k1);if(N6)this.exitError=N6,w1(N6.message)}}),this.ready=!0}catch(Q){throw this.ready=!1,Q}}getProcessExitError(Q,X){if(Q!==0&&Q!==null)return Error(`Claude Code process exited with code ${Q}`);else if(X)return Error(`Claude Code process terminated by signal ${X}`);return}write(Q){if(this.abortController.signal.aborted)throw new O1("Operation aborted");if(!this.ready||!this.processStdin)throw Error("ProcessTransport is not ready for writing");if(this.process?.killed||this.process?.exitCode!==null)throw Error("Cannot write to terminated process");if(this.exitError)throw Error(`Cannot write to process that exited with error: ${this.exitError.message}`);w1(`[ProcessTransport] Writing to stdin: ${Q.substring(0,100)}`);try{if(!this.processStdin.write(Q))w1("[ProcessTransport] Write buffer full, data queued")}catch(X){throw this.ready=!1,Error(`Failed to write to process stdin: ${X.message}`)}}close(){if(this.processStdin)this.processStdin.end(),this.processStdin=void 0;if(this.abortHandler)this.abortController.signal.removeEventListener("abort",this.abortHandler),this.abortHandler=void 0;for(let{handler:Q}of this.exitListeners)this.process?.off("exit",Q);if(this.exitListeners=[],this.process&&!this.process.killed)this.process.kill("SIGTERM"),setTimeout(()=>{if(this.process&&!this.process.killed)this.process.kill("SIGKILL")},5000);if(this.ready=!1,this.processExitHandler)process.off("exit",this.processExitHandler),this.processExitHandler=void 0}isReady(){return this.ready}async*readMessages(){if(!this.processStdout)throw Error("ProcessTransport output stream not available");let Q=Wq({input:this.processStdout});try{for await(let X of Q)if(X.trim())try{yield D9(X)}catch(Y){throw w1(`Non-JSON stdout: ${X}`),Error(`CLI output was not valid JSON. This may indicate an error during startup. Output: ${X.slice(0,200)}${X.length>200?"...":""}`)}await this.waitForExit()}catch(X){throw X}finally{Q.close()}}endInput(){if(this.processStdin)this.processStdin.end()}getInputStream(){return this.processStdin}onExit(Q){if(!this.process)return()=>{};let X=(Y,$)=>{let W=this.getProcessExitError(Y,$);Q(W)};return this.process.on("exit",X),this.exitListeners.push({callback:Q,handler:X}),()=>{if(this.process)this.process.off("exit",X);let Y=this.exitListeners.findIndex(($)=>$.handler===X);if(Y!==-1)this.exitListeners.splice(Y,1)}}async waitForExit(){if(!this.process){if(this.exitError)throw this.exitError;return}if(this.process.exitCode!==null||this.process.killed){if(this.exitError)throw this.exitError;return}return new Promise((Q,X)=>{let Y=(W,J)=>{if(this.abortController.signal.aborted){X(new O1("Operation aborted"));return}let G=this.getProcessExitError(W,J);if(G)X(G);else Q()};this.process.once("exit",Y);let $=(W)=>{this.process.off("exit",Y),X(W)};this.process.once("error",$),this.process.once("exit",()=>{this.process.off("error",$)})})}}function Jq(Q){return![".js",".mjs",".tsx",".ts",".jsx"].some((Y)=>Q.endsWith(Y))}class $4{returned;queue=[];readResolve;readReject;isDone=!1;hasError;started=!1;constructor(Q){this.returned=Q}[Symbol.asyncIterator](){if(this.started)throw Error("Stream can only be iterated once");return this.started=!0,this}next(){if(this.queue.length>0)return Promise.resolve({done:!1,value:this.queue.shift()});if(this.isDone)return Promise.resolve({done:!0,value:void 0});if(this.hasError)return Promise.reject(this.hasError);return new Promise((Q,X)=>{this.readResolve=Q,this.readReject=X})}enqueue(Q){if(this.readResolve){let X=this.readResolve;this.readResolve=void 0,this.readReject=void 0,X({done:!1,value:Q})}else this.queue.push(Q)}done(){if(this.isDone=!0,this.readResolve){let Q=this.readResolve;this.readResolve=void 0,this.readReject=void 0,Q({done:!0,value:void 0})}}error(Q){if(this.hasError=Q,this.readReject){let X=this.readReject;this.readResolve=void 0,this.readReject=void 0,X(Q)}}return(){if(this.isDone=!0,this.returned)this.returned();return Promise.resolve({done:!0,value:void 0})}}class VQ{sendMcpMessage;isClosed=!1;constructor(Q){this.sendMcpMessage=Q}onclose;onerror;onmessage;async start(){}async send(Q){if(this.isClosed)throw Error("Transport is closed");this.sendMcpMessage(Q)}async close(){if(this.isClosed)return;this.isClosed=!0,this.onclose?.()}}import{randomUUID as Gq}from"crypto";class W4{transport;isSingleUserTurn;canUseTool;hooks;abortController;jsonSchema;initConfig;pendingControlResponses=new Map;cleanupPerformed=!1;sdkMessages;inputStream=new $4;initialization;cancelControllers=new Map;hookCallbacks=new Map;nextCallbackId=0;sdkMcpTransports=new Map;sdkMcpServerInstances=new Map;pendingMcpResponses=new Map;firstResultReceivedResolve;firstResultReceived=!1;hasBidirectionalNeeds(){return this.sdkMcpTransports.size>0||this.hooks!==void 0&&Object.keys(this.hooks).length>0||this.canUseTool!==void 0}constructor(Q,X,Y,$,W,J=new Map,G,H){this.transport=Q;this.isSingleUserTurn=X;this.canUseTool=Y;this.hooks=$;this.abortController=W;this.jsonSchema=G;this.initConfig=H;for(let[B,z]of J)this.connectSdkMcpServer(B,z);this.sdkMessages=this.readSdkMessages(),this.readMessages(),this.initialization=this.initialize(),this.initialization.catch(()=>{})}setError(Q){this.inputStream.error(Q)}async stopTask(Q){await this.request({subtype:"stop_task",task_id:Q})}close(){this.cleanup()}cleanup(Q){if(this.cleanupPerformed)return;this.cleanupPerformed=!0;try{this.transport.close();let X=Error("Query closed before response received");for(let{reject:Y}of this.pendingControlResponses.values())Y(X);this.pendingControlResponses.clear();for(let{reject:Y}of this.pendingMcpResponses.values())Y(X);this.pendingMcpResponses.clear(),this.cancelControllers.clear(),this.hookCallbacks.clear();for(let Y of this.sdkMcpTransports.values())try{Y.close()}catch{}if(this.sdkMcpTransports.clear(),Q)this.inputStream.error(Q);else this.inputStream.done()}catch(X){}}next(...[Q]){return this.sdkMessages.next(...[Q])}return(Q){return this.sdkMessages.return(Q)}throw(Q){return this.sdkMessages.throw(Q)}[Symbol.asyncIterator](){return this.sdkMessages}[Symbol.asyncDispose](){return this.sdkMessages[Symbol.asyncDispose]()}async readMessages(){try{for await(let Q of this.transport.readMessages()){if(Q.type==="control_response"){let X=this.pendingControlResponses.get(Q.response.request_id);if(X)X.handler(Q.response);continue}else if(Q.type==="control_request"){this.handleControlRequest(Q);continue}else if(Q.type==="control_cancel_request"){this.handleControlCancelRequest(Q);continue}else if(Q.type==="keep_alive")continue;if(Q.type==="streamlined_text"||Q.type==="streamlined_tool_use_summary")continue;if(Q.type==="result"){if(this.firstResultReceived=!0,this.firstResultReceivedResolve)this.firstResultReceivedResolve();if(this.isSingleUserTurn)D1("[Query.readMessages] First result received for single-turn query, closing stdin"),this.transport.endInput()}this.inputStream.enqueue(Q)}if(this.firstResultReceivedResolve)this.firstResultReceivedResolve();this.inputStream.done(),this.cleanup()}catch(Q){if(this.firstResultReceivedResolve)this.firstResultReceivedResolve();this.inputStream.error(Q),this.cleanup(Q)}}async handleControlRequest(Q){let X=new AbortController;this.cancelControllers.set(Q.request_id,X);try{let Y=await this.processControlRequest(Q,X.signal),$={type:"control_response",response:{subtype:"success",request_id:Q.request_id,response:Y}};await Promise.resolve(this.transport.write(k0($)+`
`))}catch(Y){let $={type:"control_response",response:{subtype:"error",request_id:Q.request_id,error:Y.message||String(Y)}};await Promise.resolve(this.transport.write(k0($)+`
`))}finally{this.cancelControllers.delete(Q.request_id)}}handleControlCancelRequest(Q){let X=this.cancelControllers.get(Q.request_id);if(X)X.abort(),this.cancelControllers.delete(Q.request_id)}async processControlRequest(Q,X){if(Q.request.subtype==="can_use_tool"){if(!this.canUseTool)throw Error("canUseTool callback is not provided.");return{...await this.canUseTool(Q.request.tool_name,Q.request.input,{signal:X,suggestions:Q.request.permission_suggestions,blockedPath:Q.request.blocked_path,decisionReason:Q.request.decision_reason,toolUseID:Q.request.tool_use_id,agentID:Q.request.agent_id}),toolUseID:Q.request.tool_use_id}}else if(Q.request.subtype==="hook_callback")return await this.handleHookCallbacks(Q.request.callback_id,Q.request.input,Q.request.tool_use_id,X);else if(Q.request.subtype==="mcp_message"){let Y=Q.request,$=this.sdkMcpTransports.get(Y.server_name);if(!$)throw Error(`SDK MCP server not found: ${Y.server_name}`);if("method"in Y.message&&"id"in Y.message&&Y.message.id!==null)return{mcp_response:await this.handleMcpControlRequest(Y.server_name,Y,$)};else{if($.onmessage)$.onmessage(Y.message);return{mcp_response:{jsonrpc:"2.0",result:{},id:0}}}}throw Error("Unsupported control request subtype: "+Q.request.subtype)}async*readSdkMessages(){for await(let Q of this.inputStream)yield Q}async initialize(){let Q;if(this.hooks){Q={};for(let[W,J]of Object.entries(this.hooks))if(J.length>0)Q[W]=J.map((G)=>{let H=[];for(let B of G.hooks){let z=`hook_${this.nextCallbackId++}`;this.hookCallbacks.set(z,B),H.push(z)}return{matcher:G.matcher,hookCallbackIds:H,timeout:G.timeout}})}let X=this.sdkMcpTransports.size>0?Array.from(this.sdkMcpTransports.keys()):void 0,Y={subtype:"initialize",hooks:Q,sdkMcpServers:X,jsonSchema:this.jsonSchema,systemPrompt:this.initConfig?.systemPrompt,appendSystemPrompt:this.initConfig?.appendSystemPrompt,agents:this.initConfig?.agents,promptSuggestions:this.initConfig?.promptSuggestions};return(await this.request(Y)).response}async interrupt(){await this.request({subtype:"interrupt"})}async setPermissionMode(Q){await this.request({subtype:"set_permission_mode",mode:Q})}async setModel(Q){await this.request({subtype:"set_model",model:Q})}async setMaxThinkingTokens(Q){await this.request({subtype:"set_max_thinking_tokens",max_thinking_tokens:Q})}async rewindFiles(Q,X){return(await this.request({subtype:"rewind_files",user_message_id:Q,dry_run:X?.dryRun})).response}async processPendingPermissionRequests(Q){for(let X of Q)if(X.request.subtype==="can_use_tool")this.handleControlRequest(X).catch(()=>{})}request(Q){let X=Math.random().toString(36).substring(2,15),Y={request_id:X,type:"control_request",request:Q};return new Promise(($,W)=>{this.pendingControlResponses.set(X,{handler:(J)=>{if(this.pendingControlResponses.delete(X),J.subtype==="success")$(J);else if(W(Error(J.error)),J.pending_permission_requests)this.processPendingPermissionRequests(J.pending_permission_requests)},reject:W}),Promise.resolve(this.transport.write(k0(Y)+`
`))})}async initializationResult(){return this.initialization}async supportedCommands(){return(await this.initialization).commands}async supportedModels(){return(await this.initialization).models}async reconnectMcpServer(Q){await this.request({subtype:"mcp_reconnect",serverName:Q})}async toggleMcpServer(Q,X){await this.request({subtype:"mcp_toggle",serverName:Q,enabled:X})}async mcpServerStatus(){return(await this.request({subtype:"mcp_status"})).response.mcpServers}async setMcpServers(Q){let X={},Y={};for(let[H,B]of Object.entries(Q))if(B.type==="sdk"&&"instance"in B)X[H]=B.instance;else Y[H]=B;let $=new Set(this.sdkMcpServerInstances.keys()),W=new Set(Object.keys(X));for(let H of $)if(!W.has(H))await this.disconnectSdkMcpServer(H);for(let[H,B]of Object.entries(X))if(!$.has(H))this.connectSdkMcpServer(H,B);let J={};for(let H of Object.keys(X))J[H]={type:"sdk",name:H};return(await this.request({subtype:"mcp_set_servers",servers:{...Y,...J}})).response}async accountInfo(){return(await this.initialization).account}async streamInput(Q){D1("[Query.streamInput] Starting to process input stream");try{let X=0;for await(let Y of Q){if(X++,D1(`[Query.streamInput] Processing message ${X}: ${Y.type}`),this.abortController?.signal.aborted)break;await Promise.resolve(this.transport.write(k0(Y)+`
`))}if(D1(`[Query.streamInput] Finished processing ${X} messages from input stream`),X>0&&this.hasBidirectionalNeeds())D1("[Query.streamInput] Has bidirectional needs, waiting for first result"),await this.waitForFirstResult();D1("[Query] Calling transport.endInput() to close stdin to CLI process"),this.transport.endInput()}catch(X){if(!(X instanceof O1))throw X}}waitForFirstResult(){if(this.firstResultReceived)return D1("[Query.waitForFirstResult] Result already received, returning immediately"),Promise.resolve();return new Promise((Q)=>{if(this.abortController?.signal.aborted){Q();return}this.abortController?.signal.addEventListener("abort",()=>Q(),{once:!0}),this.firstResultReceivedResolve=Q})}handleHookCallbacks(Q,X,Y,$){let W=this.hookCallbacks.get(Q);if(!W)throw Error(`No hook callback found for ID: ${Q}`);return W(X,Y,{signal:$})}connectSdkMcpServer(Q,X){let Y=new VQ(($)=>this.sendMcpServerMessageToCli(Q,$));this.sdkMcpTransports.set(Q,Y),this.sdkMcpServerInstances.set(Q,X),X.connect(Y)}async disconnectSdkMcpServer(Q){let X=this.sdkMcpTransports.get(Q);if(X)await X.close(),this.sdkMcpTransports.delete(Q);this.sdkMcpServerInstances.delete(Q)}sendMcpServerMessageToCli(Q,X){if("id"in X&&X.id!==null&&X.id!==void 0){let $=`${Q}:${X.id}`,W=this.pendingMcpResponses.get($);if(W){W.resolve(X),this.pendingMcpResponses.delete($);return}}let Y={type:"control_request",request_id:Gq(),request:{subtype:"mcp_message",server_name:Q,message:X}};this.transport.write(k0(Y)+`
`)}handleMcpControlRequest(Q,X,Y){let $="id"in X.message?X.message.id:null,W=`${Q}:${$}`;return new Promise((J,G)=>{let H=()=>{this.pendingMcpResponses.delete(W)},B=(K)=>{H(),J(K)},z=(K)=>{H(),G(K)};if(this.pendingMcpResponses.set(W,{resolve:B,reject:z}),Y.onmessage)Y.onmessage(X.message);else{H(),G(Error("No message handler registered"));return}})}}import{join as HW}from"path";import{fileURLToPath as Hq}from"url";class qQ{closed=!1;inputStream;query;queryIterator=null;abortController;_sessionId=null;get sessionId(){if(this._sessionId===null)throw Error("Session ID not available until after receiving messages");return this._sessionId}constructor(Q){if(Q.resume)this._sessionId=Q.resume;this.inputStream=new $4;let X=Q.pathToClaudeCodeExecutable;if(!X){let W=Hq(import.meta.url),J=HW(W,"..");X=HW(J,"cli.js")}let Y={...Q.env??process.env};if(!Y.CLAUDE_CODE_ENTRYPOINT)Y.CLAUDE_CODE_ENTRYPOINT="sdk-ts";this.abortController=M6();let $=new Y4({abortController:this.abortController,pathToClaudeCodeExecutable:X,env:Y,executable:Q.executable??(b6()?"bun":"node"),executableArgs:Q.executableArgs??[],extraArgs:{},thinkingConfig:void 0,maxTurns:void 0,maxBudgetUsd:void 0,model:Q.model,fallbackModel:void 0,permissionMode:Q.permissionMode??"default",allowDangerouslySkipPermissions:!1,continueConversation:!1,resume:Q.resume,settingSources:[],allowedTools:Q.allowedTools??[],disallowedTools:Q.disallowedTools??[],mcpServers:{},strictMcpConfig:!1,canUseTool:!!Q.canUseTool,hooks:!!Q.hooks,includePartialMessages:!1,forkSession:!1,resumeSessionAt:void 0});this.query=new W4($,!1,Q.canUseTool,Q.hooks,this.abortController,new Map),this.query.streamInput(this.inputStream)}async send(Q){if(this.closed)throw Error("Cannot send to closed session");let X=typeof Q==="string"?{type:"user",session_id:"",message:{role:"user",content:[{type:"text",text:Q}]},parent_tool_use_id:null}:Q;this.inputStream.enqueue(X)}async*stream(){if(!this.queryIterator)this.queryIterator=this.query[Symbol.asyncIterator]();while(!0){let{value:Q,done:X}=await this.queryIterator.next();if(X)return;if(Q.type==="system"&&Q.subtype==="init")this._sessionId=Q.session_id;if(yield Q,Q.type==="result")return}}close(){if(this.closed)return;this.closed=!0,this.inputStream.done(),this.abortController.abort()}async[Symbol.asyncDispose](){this.close()}}function UQ(Q){return new qQ(Q)}function BW(Q,X){return new qQ({...X,resume:Q})}var n;(function(Q){Q.assertEqual=(W)=>{};function X(W){}Q.assertIs=X;function Y(W){throw Error()}Q.assertNever=Y,Q.arrayToEnum=(W)=>{let J={};for(let G of W)J[G]=G;return J},Q.getValidEnumValues=(W)=>{let J=Q.objectKeys(W).filter((H)=>typeof W[W[H]]!=="number"),G={};for(let H of J)G[H]=W[H];return Q.objectValues(G)},Q.objectValues=(W)=>{return Q.objectKeys(W).map(function(J){return W[J]})},Q.objectKeys=typeof Object.keys==="function"?(W)=>Object.keys(W):(W)=>{let J=[];for(let G in W)if(Object.prototype.hasOwnProperty.call(W,G))J.push(G);return J},Q.find=(W,J)=>{for(let G of W)if(J(G))return G;return},Q.isInteger=typeof Number.isInteger==="function"?(W)=>Number.isInteger(W):(W)=>typeof W==="number"&&Number.isFinite(W)&&Math.floor(W)===W;function $(W,J=" | "){return W.map((G)=>typeof G==="string"?`'${G}'`:G).join(J)}Q.joinValues=$,Q.jsonStringifyReplacer=(W,J)=>{if(typeof J==="bigint")return J.toString();return J}})(n||(n={}));var zW;(function(Q){Q.mergeShapes=(X,Y)=>{return{...X,...Y}}})(zW||(zW={}));var I=n.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),M1=(Q)=>{switch(typeof Q){case"undefined":return I.undefined;case"string":return I.string;case"number":return Number.isNaN(Q)?I.nan:I.number;case"boolean":return I.boolean;case"function":return I.function;case"bigint":return I.bigint;case"symbol":return I.symbol;case"object":if(Array.isArray(Q))return I.array;if(Q===null)return I.null;if(Q.then&&typeof Q.then==="function"&&Q.catch&&typeof Q.catch==="function")return I.promise;if(typeof Map<"u"&&Q instanceof Map)return I.map;if(typeof Set<"u"&&Q instanceof Set)return I.set;if(typeof Date<"u"&&Q instanceof Date)return I.date;return I.object;default:return I.unknown}};var M=n.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]);class l0 extends Error{get errors(){return this.issues}constructor(Q){super();this.issues=[],this.addIssue=(Y)=>{this.issues=[...this.issues,Y]},this.addIssues=(Y=[])=>{this.issues=[...this.issues,...Y]};let X=new.target.prototype;if(Object.setPrototypeOf)Object.setPrototypeOf(this,X);else this.__proto__=X;this.name="ZodError",this.issues=Q}format(Q){let X=Q||function(W){return W.message},Y={_errors:[]},$=(W)=>{for(let J of W.issues)if(J.code==="invalid_union")J.unionErrors.map($);else if(J.code==="invalid_return_type")$(J.returnTypeError);else if(J.code==="invalid_arguments")$(J.argumentsError);else if(J.path.length===0)Y._errors.push(X(J));else{let G=Y,H=0;while(H<J.path.length){let B=J.path[H];if(H!==J.path.length-1)G[B]=G[B]||{_errors:[]};else G[B]=G[B]||{_errors:[]},G[B]._errors.push(X(J));G=G[B],H++}}};return $(this),Y}static assert(Q){if(!(Q instanceof l0))throw Error(`Not a ZodError: ${Q}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,n.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(Q=(X)=>X.message){let X={},Y=[];for(let $ of this.issues)if($.path.length>0){let W=$.path[0];X[W]=X[W]||[],X[W].push(Q($))}else Y.push(Q($));return{formErrors:Y,fieldErrors:X}}get formErrors(){return this.flatten()}}l0.create=(Q)=>{return new l0(Q)};var Bq=(Q,X)=>{let Y;switch(Q.code){case M.invalid_type:if(Q.received===I.undefined)Y="Required";else Y=`Expected ${Q.expected}, received ${Q.received}`;break;case M.invalid_literal:Y=`Invalid literal value, expected ${JSON.stringify(Q.expected,n.jsonStringifyReplacer)}`;break;case M.unrecognized_keys:Y=`Unrecognized key(s) in object: ${n.joinValues(Q.keys,", ")}`;break;case M.invalid_union:Y="Invalid input";break;case M.invalid_union_discriminator:Y=`Invalid discriminator value. Expected ${n.joinValues(Q.options)}`;break;case M.invalid_enum_value:Y=`Invalid enum value. Expected ${n.joinValues(Q.options)}, received '${Q.received}'`;break;case M.invalid_arguments:Y="Invalid function arguments";break;case M.invalid_return_type:Y="Invalid function return type";break;case M.invalid_date:Y="Invalid date";break;case M.invalid_string:if(typeof Q.validation==="object")if("includes"in Q.validation){if(Y=`Invalid input: must include "${Q.validation.includes}"`,typeof Q.validation.position==="number")Y=`${Y} at one or more positions greater than or equal to ${Q.validation.position}`}else if("startsWith"in Q.validation)Y=`Invalid input: must start with "${Q.validation.startsWith}"`;else if("endsWith"in Q.validation)Y=`Invalid input: must end with "${Q.validation.endsWith}"`;else n.assertNever(Q.validation);else if(Q.validation!=="regex")Y=`Invalid ${Q.validation}`;else Y="Invalid";break;case M.too_small:if(Q.type==="array")Y=`Array must contain ${Q.exact?"exactly":Q.inclusive?"at least":"more than"} ${Q.minimum} element(s)`;else if(Q.type==="string")Y=`String must contain ${Q.exact?"exactly":Q.inclusive?"at least":"over"} ${Q.minimum} character(s)`;else if(Q.type==="number")Y=`Number must be ${Q.exact?"exactly equal to ":Q.inclusive?"greater than or equal to ":"greater than "}${Q.minimum}`;else if(Q.type==="bigint")Y=`Number must be ${Q.exact?"exactly equal to ":Q.inclusive?"greater than or equal to ":"greater than "}${Q.minimum}`;else if(Q.type==="date")Y=`Date must be ${Q.exact?"exactly equal to ":Q.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(Q.minimum))}`;else Y="Invalid input";break;case M.too_big:if(Q.type==="array")Y=`Array must contain ${Q.exact?"exactly":Q.inclusive?"at most":"less than"} ${Q.maximum} element(s)`;else if(Q.type==="string")Y=`String must contain ${Q.exact?"exactly":Q.inclusive?"at most":"under"} ${Q.maximum} character(s)`;else if(Q.type==="number")Y=`Number must be ${Q.exact?"exactly":Q.inclusive?"less than or equal to":"less than"} ${Q.maximum}`;else if(Q.type==="bigint")Y=`BigInt must be ${Q.exact?"exactly":Q.inclusive?"less than or equal to":"less than"} ${Q.maximum}`;else if(Q.type==="date")Y=`Date must be ${Q.exact?"exactly":Q.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(Q.maximum))}`;else Y="Invalid input";break;case M.custom:Y="Invalid input";break;case M.invalid_intersection_types:Y="Intersection results could not be merged";break;case M.not_multiple_of:Y=`Number must be a multiple of ${Q.multipleOf}`;break;case M.not_finite:Y="Number must be finite";break;default:Y=X.defaultError,n.assertNever(Q)}return{message:Y}},x1=Bq;var zq=x1;function J4(){return zq}var w9=(Q)=>{let{data:X,path:Y,errorMaps:$,issueData:W}=Q,J=[...Y,...W.path||[]],G={...W,path:J};if(W.message!==void 0)return{...W,path:J,message:W.message};let H="",B=$.filter((z)=>!!z).slice().reverse();for(let z of B)H=z(G,{data:X,defaultError:H}).message;return{...W,path:J,message:H}};function b(Q,X){let Y=J4(),$=w9({issueData:X,data:Q.data,path:Q.path,errorMaps:[Q.common.contextualErrorMap,Q.schemaErrorMap,Y,Y===x1?void 0:x1].filter((W)=>!!W)});Q.common.issues.push($)}class S0{constructor(){this.value="valid"}dirty(){if(this.value==="valid")this.value="dirty"}abort(){if(this.value!=="aborted")this.value="aborted"}static mergeArray(Q,X){let Y=[];for(let $ of X){if($.status==="aborted")return g;if($.status==="dirty")Q.dirty();Y.push($.value)}return{status:Q.value,value:Y}}static async mergeObjectAsync(Q,X){let Y=[];for(let $ of X){let W=await $.key,J=await $.value;Y.push({key:W,value:J})}return S0.mergeObjectSync(Q,Y)}static mergeObjectSync(Q,X){let Y={};for(let $ of X){let{key:W,value:J}=$;if(W.status==="aborted")return g;if(J.status==="aborted")return g;if(W.status==="dirty")Q.dirty();if(J.status==="dirty")Q.dirty();if(W.value!=="__proto__"&&(typeof J.value<"u"||$.alwaysSet))Y[W.value]=J.value}return{status:Q.value,value:Y}}}var g=Object.freeze({status:"aborted"}),P6=(Q)=>({status:"dirty",value:Q}),v0=(Q)=>({status:"valid",value:Q}),LQ=(Q)=>Q.status==="aborted",FQ=(Q)=>Q.status==="dirty",Q6=(Q)=>Q.status==="valid",G4=(Q)=>typeof Promise<"u"&&Q instanceof Promise;var Z;(function(Q){Q.errToObj=(X)=>typeof X==="string"?{message:X}:X||{},Q.toString=(X)=>typeof X==="string"?X:X?.message})(Z||(Z={}));class o0{constructor(Q,X,Y,$){this._cachedPath=[],this.parent=Q,this.data=X,this._path=Y,this._key=$}get path(){if(!this._cachedPath.length)if(Array.isArray(this._key))this._cachedPath.push(...this._path,...this._key);else this._cachedPath.push(...this._path,this._key);return this._cachedPath}}var KW=(Q,X)=>{if(Q6(X))return{success:!0,data:X.value};else{if(!Q.common.issues.length)throw Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;let Y=new l0(Q.common.issues);return this._error=Y,this._error}}}};function m(Q){if(!Q)return{};let{errorMap:X,invalid_type_error:Y,required_error:$,description:W}=Q;if(X&&(Y||$))throw Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);if(X)return{errorMap:X,description:W};return{errorMap:(G,H)=>{let{message:B}=Q;if(G.code==="invalid_enum_value")return{message:B??H.defaultError};if(typeof H.data>"u")return{message:B??$??H.defaultError};if(G.code!=="invalid_type")return{message:H.defaultError};return{message:B??Y??H.defaultError}},description:W}}class d{get description(){return this._def.description}_getType(Q){return M1(Q.data)}_getOrReturnCtx(Q,X){return X||{common:Q.parent.common,data:Q.data,parsedType:M1(Q.data),schemaErrorMap:this._def.errorMap,path:Q.path,parent:Q.parent}}_processInputParams(Q){return{status:new S0,ctx:{common:Q.parent.common,data:Q.data,parsedType:M1(Q.data),schemaErrorMap:this._def.errorMap,path:Q.path,parent:Q.parent}}}_parseSync(Q){let X=this._parse(Q);if(G4(X))throw Error("Synchronous parse encountered promise.");return X}_parseAsync(Q){let X=this._parse(Q);return Promise.resolve(X)}parse(Q,X){let Y=this.safeParse(Q,X);if(Y.success)return Y.data;throw Y.error}safeParse(Q,X){let Y={common:{issues:[],async:X?.async??!1,contextualErrorMap:X?.errorMap},path:X?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:Q,parsedType:M1(Q)},$=this._parseSync({data:Q,path:Y.path,parent:Y});return KW(Y,$)}"~validate"(Q){let X={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:Q,parsedType:M1(Q)};if(!this["~standard"].async)try{let Y=this._parseSync({data:Q,path:[],parent:X});return Q6(Y)?{value:Y.value}:{issues:X.common.issues}}catch(Y){if(Y?.message?.toLowerCase()?.includes("encountered"))this["~standard"].async=!0;X.common={issues:[],async:!0}}return this._parseAsync({data:Q,path:[],parent:X}).then((Y)=>Q6(Y)?{value:Y.value}:{issues:X.common.issues})}async parseAsync(Q,X){let Y=await this.safeParseAsync(Q,X);if(Y.success)return Y.data;throw Y.error}async safeParseAsync(Q,X){let Y={common:{issues:[],contextualErrorMap:X?.errorMap,async:!0},path:X?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:Q,parsedType:M1(Q)},$=this._parse({data:Q,path:Y.path,parent:Y}),W=await(G4($)?$:Promise.resolve($));return KW(Y,W)}refine(Q,X){let Y=($)=>{if(typeof X==="string"||typeof X>"u")return{message:X};else if(typeof X==="function")return X($);else return X};return this._refinement(($,W)=>{let J=Q($),G=()=>W.addIssue({code:M.custom,...Y($)});if(typeof Promise<"u"&&J instanceof Promise)return J.then((H)=>{if(!H)return G(),!1;else return!0});if(!J)return G(),!1;else return!0})}refinement(Q,X){return this._refinement((Y,$)=>{if(!Q(Y))return $.addIssue(typeof X==="function"?X(Y,$):X),!1;else return!0})}_refinement(Q){return new B1({schema:this,typeName:j.ZodEffects,effect:{type:"refinement",refinement:Q}})}superRefine(Q){return this._refinement(Q)}constructor(Q){this.spa=this.safeParseAsync,this._def=Q,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:(X)=>this["~validate"](X)}}optional(){return H1.create(this,this._def)}nullable(){return y1.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return G1.create(this)}promise(){return v6.create(this,this._def)}or(Q){return V4.create([this,Q],this._def)}and(Q){return q4.create(this,Q,this._def)}transform(Q){return new B1({...m(this._def),schema:this,typeName:j.ZodEffects,effect:{type:"transform",transform:Q}})}default(Q){let X=typeof Q==="function"?Q:()=>Q;return new N4({...m(this._def),innerType:this,defaultValue:X,typeName:j.ZodDefault})}brand(){return new wQ({typeName:j.ZodBranded,type:this,...m(this._def)})}catch(Q){let X=typeof Q==="function"?Q:()=>Q;return new D4({...m(this._def),innerType:this,catchValue:X,typeName:j.ZodCatch})}describe(Q){return new this.constructor({...this._def,description:Q})}pipe(Q){return P9.create(this,Q)}readonly(){return O4.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}var Kq=/^c[^\s-]{8,}$/i,Vq=/^[0-9a-z]+$/,qq=/^[0-9A-HJKMNP-TV-Z]{26}$/i,Uq=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,Lq=/^[a-z0-9_-]{21}$/i,Fq=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,Nq=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,Dq=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,Oq="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$",NQ,wq=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,Mq=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,Aq=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,jq=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,Rq=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,Iq=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,VW="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",Eq=new RegExp(`^${VW}$`);function qW(Q){let X="[0-5]\\d";if(Q.precision)X=`${X}\\.\\d{${Q.precision}}`;else if(Q.precision==null)X=`${X}(\\.\\d+)?`;let Y=Q.precision?"+":"?";return`([01]\\d|2[0-3]):[0-5]\\d(:${X})${Y}`}function bq(Q){return new RegExp(`^${qW(Q)}$`)}function Pq(Q){let X=`${VW}T${qW(Q)}`,Y=[];if(Y.push(Q.local?"Z?":"Z"),Q.offset)Y.push("([+-]\\d{2}:?\\d{2})");return X=`${X}(${Y.join("|")})`,new RegExp(`^${X}$`)}function Sq(Q,X){if((X==="v4"||!X)&&wq.test(Q))return!0;if((X==="v6"||!X)&&Aq.test(Q))return!0;return!1}function Zq(Q,X){if(!Fq.test(Q))return!1;try{let[Y]=Q.split(".");if(!Y)return!1;let $=Y.replace(/-/g,"+").replace(/_/g,"/").padEnd(Y.length+(4-Y.length%4)%4,"="),W=JSON.parse(atob($));if(typeof W!=="object"||W===null)return!1;if("typ"in W&&W?.typ!=="JWT")return!1;if(!W.alg)return!1;if(X&&W.alg!==X)return!1;return!0}catch{return!1}}function Cq(Q,X){if((X==="v4"||!X)&&Mq.test(Q))return!0;if((X==="v6"||!X)&&jq.test(Q))return!0;return!1}class j1 extends d{_parse(Q){if(this._def.coerce)Q.data=String(Q.data);if(this._getType(Q)!==I.string){let W=this._getOrReturnCtx(Q);return b(W,{code:M.invalid_type,expected:I.string,received:W.parsedType}),g}let Y=new S0,$=void 0;for(let W of this._def.checks)if(W.kind==="min"){if(Q.data.length<W.value)$=this._getOrReturnCtx(Q,$),b($,{code:M.too_small,minimum:W.value,type:"string",inclusive:!0,exact:!1,message:W.message}),Y.dirty()}else if(W.kind==="max"){if(Q.data.length>W.value)$=this._getOrReturnCtx(Q,$),b($,{code:M.too_big,maximum:W.value,type:"string",inclusive:!0,exact:!1,message:W.message}),Y.dirty()}else if(W.kind==="length"){let J=Q.data.length>W.value,G=Q.data.length<W.value;if(J||G){if($=this._getOrReturnCtx(Q,$),J)b($,{code:M.too_big,maximum:W.value,type:"string",inclusive:!0,exact:!0,message:W.message});else if(G)b($,{code:M.too_small,minimum:W.value,type:"string",inclusive:!0,exact:!0,message:W.message});Y.dirty()}}else if(W.kind==="email"){if(!Dq.test(Q.data))$=this._getOrReturnCtx(Q,$),b($,{validation:"email",code:M.invalid_string,message:W.message}),Y.dirty()}else if(W.kind==="emoji"){if(!NQ)NQ=new RegExp(Oq,"u");if(!NQ.test(Q.data))$=this._getOrReturnCtx(Q,$),b($,{validation:"emoji",code:M.invalid_string,message:W.message}),Y.dirty()}else if(W.kind==="uuid"){if(!Uq.test(Q.data))$=this._getOrReturnCtx(Q,$),b($,{validation:"uuid",code:M.invalid_string,message:W.message}),Y.dirty()}else if(W.kind==="nanoid"){if(!Lq.test(Q.data))$=this._getOrReturnCtx(Q,$),b($,{validation:"nanoid",code:M.invalid_string,message:W.message}),Y.dirty()}else if(W.kind==="cuid"){if(!Kq.test(Q.data))$=this._getOrReturnCtx(Q,$),b($,{validation:"cuid",code:M.invalid_string,message:W.message}),Y.dirty()}else if(W.kind==="cuid2"){if(!Vq.test(Q.data))$=this._getOrReturnCtx(Q,$),b($,{validation:"cuid2",code:M.invalid_string,message:W.message}),Y.dirty()}else if(W.kind==="ulid"){if(!qq.test(Q.data))$=this._getOrReturnCtx(Q,$),b($,{validation:"ulid",code:M.invalid_string,message:W.message}),Y.dirty()}else if(W.kind==="url")try{new URL(Q.data)}catch{$=this._getOrReturnCtx(Q,$),b($,{validation:"url",code:M.invalid_string,message:W.message}),Y.dirty()}else if(W.kind==="regex"){if(W.regex.lastIndex=0,!W.regex.test(Q.data))$=this._getOrReturnCtx(Q,$),b($,{validation:"regex",code:M.invalid_string,message:W.message}),Y.dirty()}else if(W.kind==="trim")Q.data=Q.data.trim();else if(W.kind==="includes"){if(!Q.data.includes(W.value,W.position))$=this._getOrReturnCtx(Q,$),b($,{code:M.invalid_string,validation:{includes:W.value,position:W.position},message:W.message}),Y.dirty()}else if(W.kind==="toLowerCase")Q.data=Q.data.toLowerCase();else if(W.kind==="toUpperCase")Q.data=Q.data.toUpperCase();else if(W.kind==="startsWith"){if(!Q.data.startsWith(W.value))$=this._getOrReturnCtx(Q,$),b($,{code:M.invalid_string,validation:{startsWith:W.value},message:W.message}),Y.dirty()}else if(W.kind==="endsWith"){if(!Q.data.endsWith(W.value))$=this._getOrReturnCtx(Q,$),b($,{code:M.invalid_string,validation:{endsWith:W.value},message:W.message}),Y.dirty()}else if(W.kind==="datetime"){if(!Pq(W).test(Q.data))$=this._getOrReturnCtx(Q,$),b($,{code:M.invalid_string,validation:"datetime",message:W.message}),Y.dirty()}else if(W.kind==="date"){if(!Eq.test(Q.data))$=this._getOrReturnCtx(Q,$),b($,{code:M.invalid_string,validation:"date",message:W.message}),Y.dirty()}else if(W.kind==="time"){if(!bq(W).test(Q.data))$=this._getOrReturnCtx(Q,$),b($,{code:M.invalid_string,validation:"time",message:W.message}),Y.dirty()}else if(W.kind==="duration"){if(!Nq.test(Q.data))$=this._getOrReturnCtx(Q,$),b($,{validation:"duration",code:M.invalid_string,message:W.message}),Y.dirty()}else if(W.kind==="ip"){if(!Sq(Q.data,W.version))$=this._getOrReturnCtx(Q,$),b($,{validation:"ip",code:M.invalid_string,message:W.message}),Y.dirty()}else if(W.kind==="jwt"){if(!Zq(Q.data,W.alg))$=this._getOrReturnCtx(Q,$),b($,{validation:"jwt",code:M.invalid_string,message:W.message}),Y.dirty()}else if(W.kind==="cidr"){if(!Cq(Q.data,W.version))$=this._getOrReturnCtx(Q,$),b($,{validation:"cidr",code:M.invalid_string,message:W.message}),Y.dirty()}else if(W.kind==="base64"){if(!Rq.test(Q.data))$=this._getOrReturnCtx(Q,$),b($,{validation:"base64",code:M.invalid_string,message:W.message}),Y.dirty()}else if(W.kind==="base64url"){if(!Iq.test(Q.data))$=this._getOrReturnCtx(Q,$),b($,{validation:"base64url",code:M.invalid_string,message:W.message}),Y.dirty()}else n.assertNever(W);return{status:Y.value,value:Q.data}}_regex(Q,X,Y){return this.refinement(($)=>Q.test($),{validation:X,code:M.invalid_string,...Z.errToObj(Y)})}_addCheck(Q){return new j1({...this._def,checks:[...this._def.checks,Q]})}email(Q){return this._addCheck({kind:"email",...Z.errToObj(Q)})}url(Q){return this._addCheck({kind:"url",...Z.errToObj(Q)})}emoji(Q){return this._addCheck({kind:"emoji",...Z.errToObj(Q)})}uuid(Q){return this._addCheck({kind:"uuid",...Z.errToObj(Q)})}nanoid(Q){return this._addCheck({kind:"nanoid",...Z.errToObj(Q)})}cuid(Q){return this._addCheck({kind:"cuid",...Z.errToObj(Q)})}cuid2(Q){return this._addCheck({kind:"cuid2",...Z.errToObj(Q)})}ulid(Q){return this._addCheck({kind:"ulid",...Z.errToObj(Q)})}base64(Q){return this._addCheck({kind:"base64",...Z.errToObj(Q)})}base64url(Q){return this._addCheck({kind:"base64url",...Z.errToObj(Q)})}jwt(Q){return this._addCheck({kind:"jwt",...Z.errToObj(Q)})}ip(Q){return this._addCheck({kind:"ip",...Z.errToObj(Q)})}cidr(Q){return this._addCheck({kind:"cidr",...Z.errToObj(Q)})}datetime(Q){if(typeof Q==="string")return this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:Q});return this._addCheck({kind:"datetime",precision:typeof Q?.precision>"u"?null:Q?.precision,offset:Q?.offset??!1,local:Q?.local??!1,...Z.errToObj(Q?.message)})}date(Q){return this._addCheck({kind:"date",message:Q})}time(Q){if(typeof Q==="string")return this._addCheck({kind:"time",precision:null,message:Q});return this._addCheck({kind:"time",precision:typeof Q?.precision>"u"?null:Q?.precision,...Z.errToObj(Q?.message)})}duration(Q){return this._addCheck({kind:"duration",...Z.errToObj(Q)})}regex(Q,X){return this._addCheck({kind:"regex",regex:Q,...Z.errToObj(X)})}includes(Q,X){return this._addCheck({kind:"includes",value:Q,position:X?.position,...Z.errToObj(X?.message)})}startsWith(Q,X){return this._addCheck({kind:"startsWith",value:Q,...Z.errToObj(X)})}endsWith(Q,X){return this._addCheck({kind:"endsWith",value:Q,...Z.errToObj(X)})}min(Q,X){return this._addCheck({kind:"min",value:Q,...Z.errToObj(X)})}max(Q,X){return this._addCheck({kind:"max",value:Q,...Z.errToObj(X)})}length(Q,X){return this._addCheck({kind:"length",value:Q,...Z.errToObj(X)})}nonempty(Q){return this.min(1,Z.errToObj(Q))}trim(){return new j1({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new j1({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new j1({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find((Q)=>Q.kind==="datetime")}get isDate(){return!!this._def.checks.find((Q)=>Q.kind==="date")}get isTime(){return!!this._def.checks.find((Q)=>Q.kind==="time")}get isDuration(){return!!this._def.checks.find((Q)=>Q.kind==="duration")}get isEmail(){return!!this._def.checks.find((Q)=>Q.kind==="email")}get isURL(){return!!this._def.checks.find((Q)=>Q.kind==="url")}get isEmoji(){return!!this._def.checks.find((Q)=>Q.kind==="emoji")}get isUUID(){return!!this._def.checks.find((Q)=>Q.kind==="uuid")}get isNANOID(){return!!this._def.checks.find((Q)=>Q.kind==="nanoid")}get isCUID(){return!!this._def.checks.find((Q)=>Q.kind==="cuid")}get isCUID2(){return!!this._def.checks.find((Q)=>Q.kind==="cuid2")}get isULID(){return!!this._def.checks.find((Q)=>Q.kind==="ulid")}get isIP(){return!!this._def.checks.find((Q)=>Q.kind==="ip")}get isCIDR(){return!!this._def.checks.find((Q)=>Q.kind==="cidr")}get isBase64(){return!!this._def.checks.find((Q)=>Q.kind==="base64")}get isBase64url(){return!!this._def.checks.find((Q)=>Q.kind==="base64url")}get minLength(){let Q=null;for(let X of this._def.checks)if(X.kind==="min"){if(Q===null||X.value>Q)Q=X.value}return Q}get maxLength(){let Q=null;for(let X of this._def.checks)if(X.kind==="max"){if(Q===null||X.value<Q)Q=X.value}return Q}}j1.create=(Q)=>{return new j1({checks:[],typeName:j.ZodString,coerce:Q?.coerce??!1,...m(Q)})};function kq(Q,X){let Y=(Q.toString().split(".")[1]||"").length,$=(X.toString().split(".")[1]||"").length,W=Y>$?Y:$,J=Number.parseInt(Q.toFixed(W).replace(".","")),G=Number.parseInt(X.toFixed(W).replace(".",""));return J%G/10**W}class Z6 extends d{constructor(){super(...arguments);this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(Q){if(this._def.coerce)Q.data=Number(Q.data);if(this._getType(Q)!==I.number){let W=this._getOrReturnCtx(Q);return b(W,{code:M.invalid_type,expected:I.number,received:W.parsedType}),g}let Y=void 0,$=new S0;for(let W of this._def.checks)if(W.kind==="int"){if(!n.isInteger(Q.data))Y=this._getOrReturnCtx(Q,Y),b(Y,{code:M.invalid_type,expected:"integer",received:"float",message:W.message}),$.dirty()}else if(W.kind==="min"){if(W.inclusive?Q.data<W.value:Q.data<=W.value)Y=this._getOrReturnCtx(Q,Y),b(Y,{code:M.too_small,minimum:W.value,type:"number",inclusive:W.inclusive,exact:!1,message:W.message}),$.dirty()}else if(W.kind==="max"){if(W.inclusive?Q.data>W.value:Q.data>=W.value)Y=this._getOrReturnCtx(Q,Y),b(Y,{code:M.too_big,maximum:W.value,type:"number",inclusive:W.inclusive,exact:!1,message:W.message}),$.dirty()}else if(W.kind==="multipleOf"){if(kq(Q.data,W.value)!==0)Y=this._getOrReturnCtx(Q,Y),b(Y,{code:M.not_multiple_of,multipleOf:W.value,message:W.message}),$.dirty()}else if(W.kind==="finite"){if(!Number.isFinite(Q.data))Y=this._getOrReturnCtx(Q,Y),b(Y,{code:M.not_finite,message:W.message}),$.dirty()}else n.assertNever(W);return{status:$.value,value:Q.data}}gte(Q,X){return this.setLimit("min",Q,!0,Z.toString(X))}gt(Q,X){return this.setLimit("min",Q,!1,Z.toString(X))}lte(Q,X){return this.setLimit("max",Q,!0,Z.toString(X))}lt(Q,X){return this.setLimit("max",Q,!1,Z.toString(X))}setLimit(Q,X,Y,$){return new Z6({...this._def,checks:[...this._def.checks,{kind:Q,value:X,inclusive:Y,message:Z.toString($)}]})}_addCheck(Q){return new Z6({...this._def,checks:[...this._def.checks,Q]})}int(Q){return this._addCheck({kind:"int",message:Z.toString(Q)})}positive(Q){return this._addCheck({kind:"min",value:0,inclusive:!1,message:Z.toString(Q)})}negative(Q){return this._addCheck({kind:"max",value:0,inclusive:!1,message:Z.toString(Q)})}nonpositive(Q){return this._addCheck({kind:"max",value:0,inclusive:!0,message:Z.toString(Q)})}nonnegative(Q){return this._addCheck({kind:"min",value:0,inclusive:!0,message:Z.toString(Q)})}multipleOf(Q,X){return this._addCheck({kind:"multipleOf",value:Q,message:Z.toString(X)})}finite(Q){return this._addCheck({kind:"finite",message:Z.toString(Q)})}safe(Q){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:Z.toString(Q)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:Z.toString(Q)})}get minValue(){let Q=null;for(let X of this._def.checks)if(X.kind==="min"){if(Q===null||X.value>Q)Q=X.value}return Q}get maxValue(){let Q=null;for(let X of this._def.checks)if(X.kind==="max"){if(Q===null||X.value<Q)Q=X.value}return Q}get isInt(){return!!this._def.checks.find((Q)=>Q.kind==="int"||Q.kind==="multipleOf"&&n.isInteger(Q.value))}get isFinite(){let Q=null,X=null;for(let Y of this._def.checks)if(Y.kind==="finite"||Y.kind==="int"||Y.kind==="multipleOf")return!0;else if(Y.kind==="min"){if(X===null||Y.value>X)X=Y.value}else if(Y.kind==="max"){if(Q===null||Y.value<Q)Q=Y.value}return Number.isFinite(X)&&Number.isFinite(Q)}}Z6.create=(Q)=>{return new Z6({checks:[],typeName:j.ZodNumber,coerce:Q?.coerce||!1,...m(Q)})};class C6 extends d{constructor(){super(...arguments);this.min=this.gte,this.max=this.lte}_parse(Q){if(this._def.coerce)try{Q.data=BigInt(Q.data)}catch{return this._getInvalidInput(Q)}if(this._getType(Q)!==I.bigint)return this._getInvalidInput(Q);let Y=void 0,$=new S0;for(let W of this._def.checks)if(W.kind==="min"){if(W.inclusive?Q.data<W.value:Q.data<=W.value)Y=this._getOrReturnCtx(Q,Y),b(Y,{code:M.too_small,type:"bigint",minimum:W.value,inclusive:W.inclusive,message:W.message}),$.dirty()}else if(W.kind==="max"){if(W.inclusive?Q.data>W.value:Q.data>=W.value)Y=this._getOrReturnCtx(Q,Y),b(Y,{code:M.too_big,type:"bigint",maximum:W.value,inclusive:W.inclusive,message:W.message}),$.dirty()}else if(W.kind==="multipleOf"){if(Q.data%W.value!==BigInt(0))Y=this._getOrReturnCtx(Q,Y),b(Y,{code:M.not_multiple_of,multipleOf:W.value,message:W.message}),$.dirty()}else n.assertNever(W);return{status:$.value,value:Q.data}}_getInvalidInput(Q){let X=this._getOrReturnCtx(Q);return b(X,{code:M.invalid_type,expected:I.bigint,received:X.parsedType}),g}gte(Q,X){return this.setLimit("min",Q,!0,Z.toString(X))}gt(Q,X){return this.setLimit("min",Q,!1,Z.toString(X))}lte(Q,X){return this.setLimit("max",Q,!0,Z.toString(X))}lt(Q,X){return this.setLimit("max",Q,!1,Z.toString(X))}setLimit(Q,X,Y,$){return new C6({...this._def,checks:[...this._def.checks,{kind:Q,value:X,inclusive:Y,message:Z.toString($)}]})}_addCheck(Q){return new C6({...this._def,checks:[...this._def.checks,Q]})}positive(Q){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:Z.toString(Q)})}negative(Q){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:Z.toString(Q)})}nonpositive(Q){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:Z.toString(Q)})}nonnegative(Q){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:Z.toString(Q)})}multipleOf(Q,X){return this._addCheck({kind:"multipleOf",value:Q,message:Z.toString(X)})}get minValue(){let Q=null;for(let X of this._def.checks)if(X.kind==="min"){if(Q===null||X.value>Q)Q=X.value}return Q}get maxValue(){let Q=null;for(let X of this._def.checks)if(X.kind==="max"){if(Q===null||X.value<Q)Q=X.value}return Q}}C6.create=(Q)=>{return new C6({checks:[],typeName:j.ZodBigInt,coerce:Q?.coerce??!1,...m(Q)})};class M9 extends d{_parse(Q){if(this._def.coerce)Q.data=Boolean(Q.data);if(this._getType(Q)!==I.boolean){let Y=this._getOrReturnCtx(Q);return b(Y,{code:M.invalid_type,expected:I.boolean,received:Y.parsedType}),g}return v0(Q.data)}}M9.create=(Q)=>{return new M9({typeName:j.ZodBoolean,coerce:Q?.coerce||!1,...m(Q)})};class B4 extends d{_parse(Q){if(this._def.coerce)Q.data=new Date(Q.data);if(this._getType(Q)!==I.date){let W=this._getOrReturnCtx(Q);return b(W,{code:M.invalid_type,expected:I.date,received:W.parsedType}),g}if(Number.isNaN(Q.data.getTime())){let W=this._getOrReturnCtx(Q);return b(W,{code:M.invalid_date}),g}let Y=new S0,$=void 0;for(let W of this._def.checks)if(W.kind==="min"){if(Q.data.getTime()<W.value)$=this._getOrReturnCtx(Q,$),b($,{code:M.too_small,message:W.message,inclusive:!0,exact:!1,minimum:W.value,type:"date"}),Y.dirty()}else if(W.kind==="max"){if(Q.data.getTime()>W.value)$=this._getOrReturnCtx(Q,$),b($,{code:M.too_big,message:W.message,inclusive:!0,exact:!1,maximum:W.value,type:"date"}),Y.dirty()}else n.assertNever(W);return{status:Y.value,value:new Date(Q.data.getTime())}}_addCheck(Q){return new B4({...this._def,checks:[...this._def.checks,Q]})}min(Q,X){return this._addCheck({kind:"min",value:Q.getTime(),message:Z.toString(X)})}max(Q,X){return this._addCheck({kind:"max",value:Q.getTime(),message:Z.toString(X)})}get minDate(){let Q=null;for(let X of this._def.checks)if(X.kind==="min"){if(Q===null||X.value>Q)Q=X.value}return Q!=null?new Date(Q):null}get maxDate(){let Q=null;for(let X of this._def.checks)if(X.kind==="max"){if(Q===null||X.value<Q)Q=X.value}return Q!=null?new Date(Q):null}}B4.create=(Q)=>{return new B4({checks:[],coerce:Q?.coerce||!1,typeName:j.ZodDate,...m(Q)})};class A9 extends d{_parse(Q){if(this._getType(Q)!==I.symbol){let Y=this._getOrReturnCtx(Q);return b(Y,{code:M.invalid_type,expected:I.symbol,received:Y.parsedType}),g}return v0(Q.data)}}A9.create=(Q)=>{return new A9({typeName:j.ZodSymbol,...m(Q)})};class z4 extends d{_parse(Q){if(this._getType(Q)!==I.undefined){let Y=this._getOrReturnCtx(Q);return b(Y,{code:M.invalid_type,expected:I.undefined,received:Y.parsedType}),g}return v0(Q.data)}}z4.create=(Q)=>{return new z4({typeName:j.ZodUndefined,...m(Q)})};class K4 extends d{_parse(Q){if(this._getType(Q)!==I.null){let Y=this._getOrReturnCtx(Q);return b(Y,{code:M.invalid_type,expected:I.null,received:Y.parsedType}),g}return v0(Q.data)}}K4.create=(Q)=>{return new K4({typeName:j.ZodNull,...m(Q)})};class j9 extends d{constructor(){super(...arguments);this._any=!0}_parse(Q){return v0(Q.data)}}j9.create=(Q)=>{return new j9({typeName:j.ZodAny,...m(Q)})};class X6 extends d{constructor(){super(...arguments);this._unknown=!0}_parse(Q){return v0(Q.data)}}X6.create=(Q)=>{return new X6({typeName:j.ZodUnknown,...m(Q)})};class R1 extends d{_parse(Q){let X=this._getOrReturnCtx(Q);return b(X,{code:M.invalid_type,expected:I.never,received:X.parsedType}),g}}R1.create=(Q)=>{return new R1({typeName:j.ZodNever,...m(Q)})};class R9 extends d{_parse(Q){if(this._getType(Q)!==I.undefined){let Y=this._getOrReturnCtx(Q);return b(Y,{code:M.invalid_type,expected:I.void,received:Y.parsedType}),g}return v0(Q.data)}}R9.create=(Q)=>{return new R9({typeName:j.ZodVoid,...m(Q)})};class G1 extends d{_parse(Q){let{ctx:X,status:Y}=this._processInputParams(Q),$=this._def;if(X.parsedType!==I.array)return b(X,{code:M.invalid_type,expected:I.array,received:X.parsedType}),g;if($.exactLength!==null){let J=X.data.length>$.exactLength.value,G=X.data.length<$.exactLength.value;if(J||G)b(X,{code:J?M.too_big:M.too_small,minimum:G?$.exactLength.value:void 0,maximum:J?$.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:$.exactLength.message}),Y.dirty()}if($.minLength!==null){if(X.data.length<$.minLength.value)b(X,{code:M.too_small,minimum:$.minLength.value,type:"array",inclusive:!0,exact:!1,message:$.minLength.message}),Y.dirty()}if($.maxLength!==null){if(X.data.length>$.maxLength.value)b(X,{code:M.too_big,maximum:$.maxLength.value,type:"array",inclusive:!0,exact:!1,message:$.maxLength.message}),Y.dirty()}if(X.common.async)return Promise.all([...X.data].map((J,G)=>{return $.type._parseAsync(new o0(X,J,X.path,G))})).then((J)=>{return S0.mergeArray(Y,J)});let W=[...X.data].map((J,G)=>{return $.type._parseSync(new o0(X,J,X.path,G))});return S0.mergeArray(Y,W)}get element(){return this._def.type}min(Q,X){return new G1({...this._def,minLength:{value:Q,message:Z.toString(X)}})}max(Q,X){return new G1({...this._def,maxLength:{value:Q,message:Z.toString(X)}})}length(Q,X){return new G1({...this._def,exactLength:{value:Q,message:Z.toString(X)}})}nonempty(Q){return this.min(1,Q)}}G1.create=(Q,X)=>{return new G1({type:Q,minLength:null,maxLength:null,exactLength:null,typeName:j.ZodArray,...m(X)})};function S6(Q){if(Q instanceof F0){let X={};for(let Y in Q.shape){let $=Q.shape[Y];X[Y]=H1.create(S6($))}return new F0({...Q._def,shape:()=>X})}else if(Q instanceof G1)return new G1({...Q._def,type:S6(Q.element)});else if(Q instanceof H1)return H1.create(S6(Q.unwrap()));else if(Q instanceof y1)return y1.create(S6(Q.unwrap()));else if(Q instanceof I1)return I1.create(Q.items.map((X)=>S6(X)));else return Q}class F0 extends d{constructor(){super(...arguments);this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;let Q=this._def.shape(),X=n.objectKeys(Q);return this._cached={shape:Q,keys:X},this._cached}_parse(Q){if(this._getType(Q)!==I.object){let B=this._getOrReturnCtx(Q);return b(B,{code:M.invalid_type,expected:I.object,received:B.parsedType}),g}let{status:Y,ctx:$}=this._processInputParams(Q),{shape:W,keys:J}=this._getCached(),G=[];if(!(this._def.catchall instanceof R1&&this._def.unknownKeys==="strip")){for(let B in $.data)if(!J.includes(B))G.push(B)}let H=[];for(let B of J){let z=W[B],K=$.data[B];H.push({key:{status:"valid",value:B},value:z._parse(new o0($,K,$.path,B)),alwaysSet:B in $.data})}if(this._def.catchall instanceof R1){let B=this._def.unknownKeys;if(B==="passthrough")for(let z of G)H.push({key:{status:"valid",value:z},value:{status:"valid",value:$.data[z]}});else if(B==="strict"){if(G.length>0)b($,{code:M.unrecognized_keys,keys:G}),Y.dirty()}else if(B==="strip");else throw Error("Internal ZodObject error: invalid unknownKeys value.")}else{let B=this._def.catchall;for(let z of G){let K=$.data[z];H.push({key:{status:"valid",value:z},value:B._parse(new o0($,K,$.path,z)),alwaysSet:z in $.data})}}if($.common.async)return Promise.resolve().then(async()=>{let B=[];for(let z of H){let K=await z.key,q=await z.value;B.push({key:K,value:q,alwaysSet:z.alwaysSet})}return B}).then((B)=>{return S0.mergeObjectSync(Y,B)});else return S0.mergeObjectSync(Y,H)}get shape(){return this._def.shape()}strict(Q){return Z.errToObj,new F0({...this._def,unknownKeys:"strict",...Q!==void 0?{errorMap:(X,Y)=>{let $=this._def.errorMap?.(X,Y).message??Y.defaultError;if(X.code==="unrecognized_keys")return{message:Z.errToObj(Q).message??$};return{message:$}}}:{}})}strip(){return new F0({...this._def,unknownKeys:"strip"})}passthrough(){return new F0({...this._def,unknownKeys:"passthrough"})}extend(Q){return new F0({...this._def,shape:()=>({...this._def.shape(),...Q})})}merge(Q){return new F0({unknownKeys:Q._def.unknownKeys,catchall:Q._def.catchall,shape:()=>({...this._def.shape(),...Q._def.shape()}),typeName:j.ZodObject})}setKey(Q,X){return this.augment({[Q]:X})}catchall(Q){return new F0({...this._def,catchall:Q})}pick(Q){let X={};for(let Y of n.objectKeys(Q))if(Q[Y]&&this.shape[Y])X[Y]=this.shape[Y];return new F0({...this._def,shape:()=>X})}omit(Q){let X={};for(let Y of n.objectKeys(this.shape))if(!Q[Y])X[Y]=this.shape[Y];return new F0({...this._def,shape:()=>X})}deepPartial(){return S6(this)}partial(Q){let X={};for(let Y of n.objectKeys(this.shape)){let $=this.shape[Y];if(Q&&!Q[Y])X[Y]=$;else X[Y]=$.optional()}return new F0({...this._def,shape:()=>X})}required(Q){let X={};for(let Y of n.objectKeys(this.shape))if(Q&&!Q[Y])X[Y]=this.shape[Y];else{let W=this.shape[Y];while(W instanceof H1)W=W._def.innerType;X[Y]=W}return new F0({...this._def,shape:()=>X})}keyof(){return UW(n.objectKeys(this.shape))}}F0.create=(Q,X)=>{return new F0({shape:()=>Q,unknownKeys:"strip",catchall:R1.create(),typeName:j.ZodObject,...m(X)})};F0.strictCreate=(Q,X)=>{return new F0({shape:()=>Q,unknownKeys:"strict",catchall:R1.create(),typeName:j.ZodObject,...m(X)})};F0.lazycreate=(Q,X)=>{return new F0({shape:Q,unknownKeys:"strip",catchall:R1.create(),typeName:j.ZodObject,...m(X)})};class V4 extends d{_parse(Q){let{ctx:X}=this._processInputParams(Q),Y=this._def.options;function $(W){for(let G of W)if(G.result.status==="valid")return G.result;for(let G of W)if(G.result.status==="dirty")return X.common.issues.push(...G.ctx.common.issues),G.result;let J=W.map((G)=>new l0(G.ctx.common.issues));return b(X,{code:M.invalid_union,unionErrors:J}),g}if(X.common.async)return Promise.all(Y.map(async(W)=>{let J={...X,common:{...X.common,issues:[]},parent:null};return{result:await W._parseAsync({data:X.data,path:X.path,parent:J}),ctx:J}})).then($);else{let W=void 0,J=[];for(let H of Y){let B={...X,common:{...X.common,issues:[]},parent:null},z=H._parseSync({data:X.data,path:X.path,parent:B});if(z.status==="valid")return z;else if(z.status==="dirty"&&!W)W={result:z,ctx:B};if(B.common.issues.length)J.push(B.common.issues)}if(W)return X.common.issues.push(...W.ctx.common.issues),W.result;let G=J.map((H)=>new l0(H));return b(X,{code:M.invalid_union,unionErrors:G}),g}}get options(){return this._def.options}}V4.create=(Q,X)=>{return new V4({options:Q,typeName:j.ZodUnion,...m(X)})};var A1=(Q)=>{if(Q instanceof U4)return A1(Q.schema);else if(Q instanceof B1)return A1(Q.innerType());else if(Q instanceof L4)return[Q.value];else if(Q instanceof Y6)return Q.options;else if(Q instanceof F4)return n.objectValues(Q.enum);else if(Q instanceof N4)return A1(Q._def.innerType);else if(Q instanceof z4)return[void 0];else if(Q instanceof K4)return[null];else if(Q instanceof H1)return[void 0,...A1(Q.unwrap())];else if(Q instanceof y1)return[null,...A1(Q.unwrap())];else if(Q instanceof wQ)return A1(Q.unwrap());else if(Q instanceof O4)return A1(Q.unwrap());else if(Q instanceof D4)return A1(Q._def.innerType);else return[]};class OQ extends d{_parse(Q){let{ctx:X}=this._processInputParams(Q);if(X.parsedType!==I.object)return b(X,{code:M.invalid_type,expected:I.object,received:X.parsedType}),g;let Y=this.discriminator,$=X.data[Y],W=this.optionsMap.get($);if(!W)return b(X,{code:M.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[Y]}),g;if(X.common.async)return W._parseAsync({data:X.data,path:X.path,parent:X});else return W._parseSync({data:X.data,path:X.path,parent:X})}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(Q,X,Y){let $=new Map;for(let W of X){let J=A1(W.shape[Q]);if(!J.length)throw Error(`A discriminator value for key \`${Q}\` could not be extracted from all schema options`);for(let G of J){if($.has(G))throw Error(`Discriminator property ${String(Q)} has duplicate value ${String(G)}`);$.set(G,W)}}return new OQ({typeName:j.ZodDiscriminatedUnion,discriminator:Q,options:X,optionsMap:$,...m(Y)})}}function DQ(Q,X){let Y=M1(Q),$=M1(X);if(Q===X)return{valid:!0,data:Q};else if(Y===I.object&&$===I.object){let W=n.objectKeys(X),J=n.objectKeys(Q).filter((H)=>W.indexOf(H)!==-1),G={...Q,...X};for(let H of J){let B=DQ(Q[H],X[H]);if(!B.valid)return{valid:!1};G[H]=B.data}return{valid:!0,data:G}}else if(Y===I.array&&$===I.array){if(Q.length!==X.length)return{valid:!1};let W=[];for(let J=0;J<Q.length;J++){let G=Q[J],H=X[J],B=DQ(G,H);if(!B.valid)return{valid:!1};W.push(B.data)}return{valid:!0,data:W}}else if(Y===I.date&&$===I.date&&+Q===+X)return{valid:!0,data:Q};else return{valid:!1}}class q4 extends d{_parse(Q){let{status:X,ctx:Y}=this._processInputParams(Q),$=(W,J)=>{if(LQ(W)||LQ(J))return g;let G=DQ(W.value,J.value);if(!G.valid)return b(Y,{code:M.invalid_intersection_types}),g;if(FQ(W)||FQ(J))X.dirty();return{status:X.value,value:G.data}};if(Y.common.async)return Promise.all([this._def.left._parseAsync({data:Y.data,path:Y.path,parent:Y}),this._def.right._parseAsync({data:Y.data,path:Y.path,parent:Y})]).then(([W,J])=>$(W,J));else return $(this._def.left._parseSync({data:Y.data,path:Y.path,parent:Y}),this._def.right._parseSync({data:Y.data,path:Y.path,parent:Y}))}}q4.create=(Q,X,Y)=>{return new q4({left:Q,right:X,typeName:j.ZodIntersection,...m(Y)})};class I1 extends d{_parse(Q){let{status:X,ctx:Y}=this._processInputParams(Q);if(Y.parsedType!==I.array)return b(Y,{code:M.invalid_type,expected:I.array,received:Y.parsedType}),g;if(Y.data.length<this._def.items.length)return b(Y,{code:M.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),g;if(!this._def.rest&&Y.data.length>this._def.items.length)b(Y,{code:M.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),X.dirty();let W=[...Y.data].map((J,G)=>{let H=this._def.items[G]||this._def.rest;if(!H)return null;return H._parse(new o0(Y,J,Y.path,G))}).filter((J)=>!!J);if(Y.common.async)return Promise.all(W).then((J)=>{return S0.mergeArray(X,J)});else return S0.mergeArray(X,W)}get items(){return this._def.items}rest(Q){return new I1({...this._def,rest:Q})}}I1.create=(Q,X)=>{if(!Array.isArray(Q))throw Error("You must pass an array of schemas to z.tuple([ ... ])");return new I1({items:Q,typeName:j.ZodTuple,rest:null,...m(X)})};class I9 extends d{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(Q){let{status:X,ctx:Y}=this._processInputParams(Q);if(Y.parsedType!==I.object)return b(Y,{code:M.invalid_type,expected:I.object,received:Y.parsedType}),g;let $=[],W=this._def.keyType,J=this._def.valueType;for(let G in Y.data)$.push({key:W._parse(new o0(Y,G,Y.path,G)),value:J._parse(new o0(Y,Y.data[G],Y.path,G)),alwaysSet:G in Y.data});if(Y.common.async)return S0.mergeObjectAsync(X,$);else return S0.mergeObjectSync(X,$)}get element(){return this._def.valueType}static create(Q,X,Y){if(X instanceof d)return new I9({keyType:Q,valueType:X,typeName:j.ZodRecord,...m(Y)});return new I9({keyType:j1.create(),valueType:Q,typeName:j.ZodRecord,...m(X)})}}class E9 extends d{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(Q){let{status:X,ctx:Y}=this._processInputParams(Q);if(Y.parsedType!==I.map)return b(Y,{code:M.invalid_type,expected:I.map,received:Y.parsedType}),g;let $=this._def.keyType,W=this._def.valueType,J=[...Y.data.entries()].map(([G,H],B)=>{return{key:$._parse(new o0(Y,G,Y.path,[B,"key"])),value:W._parse(new o0(Y,H,Y.path,[B,"value"]))}});if(Y.common.async){let G=new Map;return Promise.resolve().then(async()=>{for(let H of J){let B=await H.key,z=await H.value;if(B.status==="aborted"||z.status==="aborted")return g;if(B.status==="dirty"||z.status==="dirty")X.dirty();G.set(B.value,z.value)}return{status:X.value,value:G}})}else{let G=new Map;for(let H of J){let{key:B,value:z}=H;if(B.status==="aborted"||z.status==="aborted")return g;if(B.status==="dirty"||z.status==="dirty")X.dirty();G.set(B.value,z.value)}return{status:X.value,value:G}}}}E9.create=(Q,X,Y)=>{return new E9({valueType:X,keyType:Q,typeName:j.ZodMap,...m(Y)})};class k6 extends d{_parse(Q){let{status:X,ctx:Y}=this._processInputParams(Q);if(Y.parsedType!==I.set)return b(Y,{code:M.invalid_type,expected:I.set,received:Y.parsedType}),g;let $=this._def;if($.minSize!==null){if(Y.data.size<$.minSize.value)b(Y,{code:M.too_small,minimum:$.minSize.value,type:"set",inclusive:!0,exact:!1,message:$.minSize.message}),X.dirty()}if($.maxSize!==null){if(Y.data.size>$.maxSize.value)b(Y,{code:M.too_big,maximum:$.maxSize.value,type:"set",inclusive:!0,exact:!1,message:$.maxSize.message}),X.dirty()}let W=this._def.valueType;function J(H){let B=new Set;for(let z of H){if(z.status==="aborted")return g;if(z.status==="dirty")X.dirty();B.add(z.value)}return{status:X.value,value:B}}let G=[...Y.data.values()].map((H,B)=>W._parse(new o0(Y,H,Y.path,B)));if(Y.common.async)return Promise.all(G).then((H)=>J(H));else return J(G)}min(Q,X){return new k6({...this._def,minSize:{value:Q,message:Z.toString(X)}})}max(Q,X){return new k6({...this._def,maxSize:{value:Q,message:Z.toString(X)}})}size(Q,X){return this.min(Q,X).max(Q,X)}nonempty(Q){return this.min(1,Q)}}k6.create=(Q,X)=>{return new k6({valueType:Q,minSize:null,maxSize:null,typeName:j.ZodSet,...m(X)})};class H4 extends d{constructor(){super(...arguments);this.validate=this.implement}_parse(Q){let{ctx:X}=this._processInputParams(Q);if(X.parsedType!==I.function)return b(X,{code:M.invalid_type,expected:I.function,received:X.parsedType}),g;function Y(G,H){return w9({data:G,path:X.path,errorMaps:[X.common.contextualErrorMap,X.schemaErrorMap,J4(),x1].filter((B)=>!!B),issueData:{code:M.invalid_arguments,argumentsError:H}})}function $(G,H){return w9({data:G,path:X.path,errorMaps:[X.common.contextualErrorMap,X.schemaErrorMap,J4(),x1].filter((B)=>!!B),issueData:{code:M.invalid_return_type,returnTypeError:H}})}let W={errorMap:X.common.contextualErrorMap},J=X.data;if(this._def.returns instanceof v6){let G=this;return v0(async function(...H){let B=new l0([]),z=await G._def.args.parseAsync(H,W).catch((U)=>{throw B.addIssue(Y(H,U)),B}),K=await Reflect.apply(J,this,z);return await G._def.returns._def.type.parseAsync(K,W).catch((U)=>{throw B.addIssue($(K,U)),B})})}else{let G=this;return v0(function(...H){let B=G._def.args.safeParse(H,W);if(!B.success)throw new l0([Y(H,B.error)]);let z=Reflect.apply(J,this,B.data),K=G._def.returns.safeParse(z,W);if(!K.success)throw new l0([$(z,K.error)]);return K.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...Q){return new H4({...this._def,args:I1.create(Q).rest(X6.create())})}returns(Q){return new H4({...this._def,returns:Q})}implement(Q){return this.parse(Q)}strictImplement(Q){return this.parse(Q)}static create(Q,X,Y){return new H4({args:Q?Q:I1.create([]).rest(X6.create()),returns:X||X6.create(),typeName:j.ZodFunction,...m(Y)})}}class U4 extends d{get schema(){return this._def.getter()}_parse(Q){let{ctx:X}=this._processInputParams(Q);return this._def.getter()._parse({data:X.data,path:X.path,parent:X})}}U4.create=(Q,X)=>{return new U4({getter:Q,typeName:j.ZodLazy,...m(X)})};class L4 extends d{_parse(Q){if(Q.data!==this._def.value){let X=this._getOrReturnCtx(Q);return b(X,{received:X.data,code:M.invalid_literal,expected:this._def.value}),g}return{status:"valid",value:Q.data}}get value(){return this._def.value}}L4.create=(Q,X)=>{return new L4({value:Q,typeName:j.ZodLiteral,...m(X)})};function UW(Q,X){return new Y6({values:Q,typeName:j.ZodEnum,...m(X)})}class Y6 extends d{_parse(Q){if(typeof Q.data!=="string"){let X=this._getOrReturnCtx(Q),Y=this._def.values;return b(X,{expected:n.joinValues(Y),received:X.parsedType,code:M.invalid_type}),g}if(!this._cache)this._cache=new Set(this._def.values);if(!this._cache.has(Q.data)){let X=this._getOrReturnCtx(Q),Y=this._def.values;return b(X,{received:X.data,code:M.invalid_enum_value,options:Y}),g}return v0(Q.data)}get options(){return this._def.values}get enum(){let Q={};for(let X of this._def.values)Q[X]=X;return Q}get Values(){let Q={};for(let X of this._def.values)Q[X]=X;return Q}get Enum(){let Q={};for(let X of this._def.values)Q[X]=X;return Q}extract(Q,X=this._def){return Y6.create(Q,{...this._def,...X})}exclude(Q,X=this._def){return Y6.create(this.options.filter((Y)=>!Q.includes(Y)),{...this._def,...X})}}Y6.create=UW;class F4 extends d{_parse(Q){let X=n.getValidEnumValues(this._def.values),Y=this._getOrReturnCtx(Q);if(Y.parsedType!==I.string&&Y.parsedType!==I.number){let $=n.objectValues(X);return b(Y,{expected:n.joinValues($),received:Y.parsedType,code:M.invalid_type}),g}if(!this._cache)this._cache=new Set(n.getValidEnumValues(this._def.values));if(!this._cache.has(Q.data)){let $=n.objectValues(X);return b(Y,{received:Y.data,code:M.invalid_enum_value,options:$}),g}return v0(Q.data)}get enum(){return this._def.values}}F4.create=(Q,X)=>{return new F4({values:Q,typeName:j.ZodNativeEnum,...m(X)})};class v6 extends d{unwrap(){return this._def.type}_parse(Q){let{ctx:X}=this._processInputParams(Q);if(X.parsedType!==I.promise&&X.common.async===!1)return b(X,{code:M.invalid_type,expected:I.promise,received:X.parsedType}),g;let Y=X.parsedType===I.promise?X.data:Promise.resolve(X.data);return v0(Y.then(($)=>{return this._def.type.parseAsync($,{path:X.path,errorMap:X.common.contextualErrorMap})}))}}v6.create=(Q,X)=>{return new v6({type:Q,typeName:j.ZodPromise,...m(X)})};class B1 extends d{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===j.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(Q){let{status:X,ctx:Y}=this._processInputParams(Q),$=this._def.effect||null,W={addIssue:(J)=>{if(b(Y,J),J.fatal)X.abort();else X.dirty()},get path(){return Y.path}};if(W.addIssue=W.addIssue.bind(W),$.type==="preprocess"){let J=$.transform(Y.data,W);if(Y.common.async)return Promise.resolve(J).then(async(G)=>{if(X.value==="aborted")return g;let H=await this._def.schema._parseAsync({data:G,path:Y.path,parent:Y});if(H.status==="aborted")return g;if(H.status==="dirty")return P6(H.value);if(X.value==="dirty")return P6(H.value);return H});else{if(X.value==="aborted")return g;let G=this._def.schema._parseSync({data:J,path:Y.path,parent:Y});if(G.status==="aborted")return g;if(G.status==="dirty")return P6(G.value);if(X.value==="dirty")return P6(G.value);return G}}if($.type==="refinement"){let J=(G)=>{let H=$.refinement(G,W);if(Y.common.async)return Promise.resolve(H);if(H instanceof Promise)throw Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return G};if(Y.common.async===!1){let G=this._def.schema._parseSync({data:Y.data,path:Y.path,parent:Y});if(G.status==="aborted")return g;if(G.status==="dirty")X.dirty();return J(G.value),{status:X.value,value:G.value}}else return this._def.schema._parseAsync({data:Y.data,path:Y.path,parent:Y}).then((G)=>{if(G.status==="aborted")return g;if(G.status==="dirty")X.dirty();return J(G.value).then(()=>{return{status:X.value,value:G.value}})})}if($.type==="transform")if(Y.common.async===!1){let J=this._def.schema._parseSync({data:Y.data,path:Y.path,parent:Y});if(!Q6(J))return g;let G=$.transform(J.value,W);if(G instanceof Promise)throw Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:X.value,value:G}}else return this._def.schema._parseAsync({data:Y.data,path:Y.path,parent:Y}).then((J)=>{if(!Q6(J))return g;return Promise.resolve($.transform(J.value,W)).then((G)=>({status:X.value,value:G}))});n.assertNever($)}}B1.create=(Q,X,Y)=>{return new B1({schema:Q,typeName:j.ZodEffects,effect:X,...m(Y)})};B1.createWithPreprocess=(Q,X,Y)=>{return new B1({schema:X,effect:{type:"preprocess",transform:Q},typeName:j.ZodEffects,...m(Y)})};class H1 extends d{_parse(Q){if(this._getType(Q)===I.undefined)return v0(void 0);return this._def.innerType._parse(Q)}unwrap(){return this._def.innerType}}H1.create=(Q,X)=>{return new H1({innerType:Q,typeName:j.ZodOptional,...m(X)})};class y1 extends d{_parse(Q){if(this._getType(Q)===I.null)return v0(null);return this._def.innerType._parse(Q)}unwrap(){return this._def.innerType}}y1.create=(Q,X)=>{return new y1({innerType:Q,typeName:j.ZodNullable,...m(X)})};class N4 extends d{_parse(Q){let{ctx:X}=this._processInputParams(Q),Y=X.data;if(X.parsedType===I.undefined)Y=this._def.defaultValue();return this._def.innerType._parse({data:Y,path:X.path,parent:X})}removeDefault(){return this._def.innerType}}N4.create=(Q,X)=>{return new N4({innerType:Q,typeName:j.ZodDefault,defaultValue:typeof X.default==="function"?X.default:()=>X.default,...m(X)})};class D4 extends d{_parse(Q){let{ctx:X}=this._processInputParams(Q),Y={...X,common:{...X.common,issues:[]}},$=this._def.innerType._parse({data:Y.data,path:Y.path,parent:{...Y}});if(G4($))return $.then((W)=>{return{status:"valid",value:W.status==="valid"?W.value:this._def.catchValue({get error(){return new l0(Y.common.issues)},input:Y.data})}});else return{status:"valid",value:$.status==="valid"?$.value:this._def.catchValue({get error(){return new l0(Y.common.issues)},input:Y.data})}}removeCatch(){return this._def.innerType}}D4.create=(Q,X)=>{return new D4({innerType:Q,typeName:j.ZodCatch,catchValue:typeof X.catch==="function"?X.catch:()=>X.catch,...m(X)})};class b9 extends d{_parse(Q){if(this._getType(Q)!==I.nan){let Y=this._getOrReturnCtx(Q);return b(Y,{code:M.invalid_type,expected:I.nan,received:Y.parsedType}),g}return{status:"valid",value:Q.data}}}b9.create=(Q)=>{return new b9({typeName:j.ZodNaN,...m(Q)})};var OP=Symbol("zod_brand");class wQ extends d{_parse(Q){let{ctx:X}=this._processInputParams(Q),Y=X.data;return this._def.type._parse({data:Y,path:X.path,parent:X})}unwrap(){return this._def.type}}class P9 extends d{_parse(Q){let{status:X,ctx:Y}=this._processInputParams(Q);if(Y.common.async)return(async()=>{let W=await this._def.in._parseAsync({data:Y.data,path:Y.path,parent:Y});if(W.status==="aborted")return g;if(W.status==="dirty")return X.dirty(),P6(W.value);else return this._def.out._parseAsync({data:W.value,path:Y.path,parent:Y})})();else{let $=this._def.in._parseSync({data:Y.data,path:Y.path,parent:Y});if($.status==="aborted")return g;if($.status==="dirty")return X.dirty(),{status:"dirty",value:$.value};else return this._def.out._parseSync({data:$.value,path:Y.path,parent:Y})}}static create(Q,X){return new P9({in:Q,out:X,typeName:j.ZodPipeline})}}class O4 extends d{_parse(Q){let X=this._def.innerType._parse(Q),Y=($)=>{if(Q6($))$.value=Object.freeze($.value);return $};return G4(X)?X.then(($)=>Y($)):Y(X)}unwrap(){return this._def.innerType}}O4.create=(Q,X)=>{return new O4({innerType:Q,typeName:j.ZodReadonly,...m(X)})};var wP={object:F0.lazycreate},j;(function(Q){Q.ZodString="ZodString",Q.ZodNumber="ZodNumber",Q.ZodNaN="ZodNaN",Q.ZodBigInt="ZodBigInt",Q.ZodBoolean="ZodBoolean",Q.ZodDate="ZodDate",Q.ZodSymbol="ZodSymbol",Q.ZodUndefined="ZodUndefined",Q.ZodNull="ZodNull",Q.ZodAny="ZodAny",Q.ZodUnknown="ZodUnknown",Q.ZodNever="ZodNever",Q.ZodVoid="ZodVoid",Q.ZodArray="ZodArray",Q.ZodObject="ZodObject",Q.ZodUnion="ZodUnion",Q.ZodDiscriminatedUnion="ZodDiscriminatedUnion",Q.ZodIntersection="ZodIntersection",Q.ZodTuple="ZodTuple",Q.ZodRecord="ZodRecord",Q.ZodMap="ZodMap",Q.ZodSet="ZodSet",Q.ZodFunction="ZodFunction",Q.ZodLazy="ZodLazy",Q.ZodLiteral="ZodLiteral",Q.ZodEnum="ZodEnum",Q.ZodEffects="ZodEffects",Q.ZodNativeEnum="ZodNativeEnum",Q.ZodOptional="ZodOptional",Q.ZodNullable="ZodNullable",Q.ZodDefault="ZodDefault",Q.ZodCatch="ZodCatch",Q.ZodPromise="ZodPromise",Q.ZodBranded="ZodBranded",Q.ZodPipeline="ZodPipeline",Q.ZodReadonly="ZodReadonly"})(j||(j={}));var MP=j1.create,AP=Z6.create,jP=b9.create,RP=C6.create,IP=M9.create,EP=B4.create,bP=A9.create,PP=z4.create,SP=K4.create,ZP=j9.create,CP=X6.create,kP=R1.create,vP=R9.create,_P=G1.create,LW=F0.create,TP=F0.strictCreate,xP=V4.create,yP=OQ.create,gP=q4.create,hP=I1.create,fP=I9.create,uP=E9.create,lP=k6.create,mP=H4.create,cP=U4.create,pP=L4.create,dP=Y6.create,iP=F4.create,nP=v6.create,rP=B1.create,oP=H1.create,tP=y1.create,aP=B1.createWithPreprocess,sP=P9.create;var vq=Object.freeze({status:"aborted"});function D(Q,X,Y){function $(H,B){var z;Object.defineProperty(H,"_zod",{value:H._zod??{},enumerable:!1}),(z=H._zod).traits??(z.traits=new Set),H._zod.traits.add(Q),X(H,B);for(let K in G.prototype)if(!(K in H))Object.defineProperty(H,K,{value:G.prototype[K].bind(H)});H._zod.constr=G,H._zod.def=B}let W=Y?.Parent??Object;class J extends W{}Object.defineProperty(J,"name",{value:Q});function G(H){var B;let z=Y?.Parent?new J:this;$(z,H),(B=z._zod).deferred??(B.deferred=[]);for(let K of z._zod.deferred)K();return z}return Object.defineProperty(G,"init",{value:$}),Object.defineProperty(G,Symbol.hasInstance,{value:(H)=>{if(Y?.Parent&&H instanceof Y.Parent)return!0;return H?._zod?.traits?.has(Q)}}),Object.defineProperty(G,"name",{value:Q}),G}var _q=Symbol("zod_brand");class g1 extends Error{constructor(){super("Encountered Promise during synchronous parse. Use .parseAsync() instead.")}}var S9={};function m0(Q){if(Q)Object.assign(S9,Q);return S9}var i={};q7(i,{unwrapMessage:()=>w4,stringifyPrimitive:()=>k9,required:()=>tq,randomString:()=>lq,propertyKeyTypes:()=>EQ,promiseAllObject:()=>uq,primitiveTypes:()=>FW,prefixIssues:()=>z1,pick:()=>dq,partial:()=>oq,optionalKeys:()=>bQ,omit:()=>iq,numKeys:()=>mq,nullish:()=>j4,normalizeParams:()=>y,merge:()=>rq,jsonStringifyReplacer:()=>AQ,joinValues:()=>Z9,issue:()=>SQ,isPlainObject:()=>T6,isObject:()=>_6,getSizableOrigin:()=>DW,getParsedType:()=>cq,getLengthableOrigin:()=>I4,getEnumValues:()=>M4,getElementAtPath:()=>fq,floatSafeRemainder:()=>jQ,finalizeIssue:()=>t0,extend:()=>nq,escapeRegex:()=>h1,esc:()=>$6,defineLazy:()=>J0,createTransparentProxy:()=>pq,clone:()=>c0,cleanRegex:()=>R4,cleanEnum:()=>aq,captureStackTrace:()=>C9,cached:()=>A4,assignProp:()=>RQ,assertNotEqual:()=>xq,assertNever:()=>gq,assertIs:()=>yq,assertEqual:()=>Tq,assert:()=>hq,allowsEval:()=>IQ,aborted:()=>W6,NUMBER_FORMAT_RANGES:()=>PQ,Class:()=>OW,BIGINT_FORMAT_RANGES:()=>NW});function Tq(Q){return Q}function xq(Q){return Q}function yq(Q){}function gq(Q){throw Error()}function hq(Q){}function M4(Q){let X=Object.values(Q).filter(($)=>typeof $==="number");return Object.entries(Q).filter(([$,W])=>X.indexOf(+$)===-1).map(([$,W])=>W)}function Z9(Q,X="|"){return Q.map((Y)=>k9(Y)).join(X)}function AQ(Q,X){if(typeof X==="bigint")return X.toString();return X}function A4(Q){return{get value(){{let Y=Q();return Object.defineProperty(this,"value",{value:Y}),Y}throw Error("cached value already set")}}}function j4(Q){return Q===null||Q===void 0}function R4(Q){let X=Q.startsWith("^")?1:0,Y=Q.endsWith("$")?Q.length-1:Q.length;return Q.slice(X,Y)}function jQ(Q,X){let Y=(Q.toString().split(".")[1]||"").length,$=(X.toString().split(".")[1]||"").length,W=Y>$?Y:$,J=Number.parseInt(Q.toFixed(W).replace(".","")),G=Number.parseInt(X.toFixed(W).replace(".",""));return J%G/10**W}function J0(Q,X,Y){Object.defineProperty(Q,X,{get(){{let W=Y();return Q[X]=W,W}throw Error("cached value already set")},set(W){Object.defineProperty(Q,X,{value:W})},configurable:!0})}function RQ(Q,X,Y){Object.defineProperty(Q,X,{value:Y,writable:!0,enumerable:!0,configurable:!0})}function fq(Q,X){if(!X)return Q;return X.reduce((Y,$)=>Y?.[$],Q)}function uq(Q){let X=Object.keys(Q),Y=X.map(($)=>Q[$]);return Promise.all(Y).then(($)=>{let W={};for(let J=0;J<X.length;J++)W[X[J]]=$[J];return W})}function lq(Q=10){let Y="";for(let $=0;$<Q;$++)Y+="abcdefghijklmnopqrstuvwxyz"[Math.floor(Math.random()*26)];return Y}function $6(Q){return JSON.stringify(Q)}var C9=Error.captureStackTrace?Error.captureStackTrace:(...Q)=>{};function _6(Q){return typeof Q==="object"&&Q!==null&&!Array.isArray(Q)}var IQ=A4(()=>{if(typeof navigator<"u"&&navigator?.userAgent?.includes("Cloudflare"))return!1;try{return new Function(""),!0}catch(Q){return!1}});function T6(Q){if(_6(Q)===!1)return!1;let X=Q.constructor;if(X===void 0)return!0;let Y=X.prototype;if(_6(Y)===!1)return!1;if(Object.prototype.hasOwnProperty.call(Y,"isPrototypeOf")===!1)return!1;return!0}function mq(Q){let X=0;for(let Y in Q)if(Object.prototype.hasOwnProperty.call(Q,Y))X++;return X}var cq=(Q)=>{let X=typeof Q;switch(X){case"undefined":return"undefined";case"string":return"string";case"number":return Number.isNaN(Q)?"nan":"number";case"boolean":return"boolean";case"function":return"function";case"bigint":return"bigint";case"symbol":return"symbol";case"object":if(Array.isArray(Q))return"array";if(Q===null)return"null";if(Q.then&&typeof Q.then==="function"&&Q.catch&&typeof Q.catch==="function")return"promise";if(typeof Map<"u"&&Q instanceof Map)return"map";if(typeof Set<"u"&&Q instanceof Set)return"set";if(typeof Date<"u"&&Q instanceof Date)return"date";if(typeof File<"u"&&Q instanceof File)return"file";return"object";default:throw Error(`Unknown data type: ${X}`)}},EQ=new Set(["string","number","symbol"]),FW=new Set(["string","number","bigint","boolean","symbol","undefined"]);function h1(Q){return Q.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function c0(Q,X,Y){let $=new Q._zod.constr(X??Q._zod.def);if(!X||Y?.parent)$._zod.parent=Q;return $}function y(Q){let X=Q;if(!X)return{};if(typeof X==="string")return{error:()=>X};if(X?.message!==void 0){if(X?.error!==void 0)throw Error("Cannot specify both `message` and `error` params");X.error=X.message}if(delete X.message,typeof X.error==="string")return{...X,error:()=>X.error};return X}function pq(Q){let X;return new Proxy({},{get(Y,$,W){return X??(X=Q()),Reflect.get(X,$,W)},set(Y,$,W,J){return X??(X=Q()),Reflect.set(X,$,W,J)},has(Y,$){return X??(X=Q()),Reflect.has(X,$)},deleteProperty(Y,$){return X??(X=Q()),Reflect.deleteProperty(X,$)},ownKeys(Y){return X??(X=Q()),Reflect.ownKeys(X)},getOwnPropertyDescriptor(Y,$){return X??(X=Q()),Reflect.getOwnPropertyDescriptor(X,$)},defineProperty(Y,$,W){return X??(X=Q()),Reflect.defineProperty(X,$,W)}})}function k9(Q){if(typeof Q==="bigint")return Q.toString()+"n";if(typeof Q==="string")return`"${Q}"`;return`${Q}`}function bQ(Q){return Object.keys(Q).filter((X)=>{return Q[X]._zod.optin==="optional"&&Q[X]._zod.optout==="optional"})}var PQ={safeint:[Number.MIN_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],int32:[-2147483648,2147483647],uint32:[0,4294967295],float32:[-340282346638528860000000000000000000000,340282346638528860000000000000000000000],float64:[-Number.MAX_VALUE,Number.MAX_VALUE]},NW={int64:[BigInt("-9223372036854775808"),BigInt("9223372036854775807")],uint64:[BigInt(0),BigInt("18446744073709551615")]};function dq(Q,X){let Y={},$=Q._zod.def;for(let W in X){if(!(W in $.shape))throw Error(`Unrecognized key: "${W}"`);if(!X[W])continue;Y[W]=$.shape[W]}return c0(Q,{...Q._zod.def,shape:Y,checks:[]})}function iq(Q,X){let Y={...Q._zod.def.shape},$=Q._zod.def;for(let W in X){if(!(W in $.shape))throw Error(`Unrecognized key: "${W}"`);if(!X[W])continue;delete Y[W]}return c0(Q,{...Q._zod.def,shape:Y,checks:[]})}function nq(Q,X){if(!T6(X))throw Error("Invalid input to extend: expected a plain object");let Y={...Q._zod.def,get shape(){let $={...Q._zod.def.shape,...X};return RQ(this,"shape",$),$},checks:[]};return c0(Q,Y)}function rq(Q,X){return c0(Q,{...Q._zod.def,get shape(){let Y={...Q._zod.def.shape,...X._zod.def.shape};return RQ(this,"shape",Y),Y},catchall:X._zod.def.catchall,checks:[]})}function oq(Q,X,Y){let $=X._zod.def.shape,W={...$};if(Y)for(let J in Y){if(!(J in $))throw Error(`Unrecognized key: "${J}"`);if(!Y[J])continue;W[J]=Q?new Q({type:"optional",innerType:$[J]}):$[J]}else for(let J in $)W[J]=Q?new Q({type:"optional",innerType:$[J]}):$[J];return c0(X,{...X._zod.def,shape:W,checks:[]})}function tq(Q,X,Y){let $=X._zod.def.shape,W={...$};if(Y)for(let J in Y){if(!(J in W))throw Error(`Unrecognized key: "${J}"`);if(!Y[J])continue;W[J]=new Q({type:"nonoptional",innerType:$[J]})}else for(let J in $)W[J]=new Q({type:"nonoptional",innerType:$[J]});return c0(X,{...X._zod.def,shape:W,checks:[]})}function W6(Q,X=0){for(let Y=X;Y<Q.issues.length;Y++)if(Q.issues[Y]?.continue!==!0)return!0;return!1}function z1(Q,X){return X.map((Y)=>{var $;return($=Y).path??($.path=[]),Y.path.unshift(Q),Y})}function w4(Q){return typeof Q==="string"?Q:Q?.message}function t0(Q,X,Y){let $={...Q,path:Q.path??[]};if(!Q.message){let W=w4(Q.inst?._zod.def?.error?.(Q))??w4(X?.error?.(Q))??w4(Y.customError?.(Q))??w4(Y.localeError?.(Q))??"Invalid input";$.message=W}if(delete $.inst,delete $.continue,!X?.reportInput)delete $.input;return $}function DW(Q){if(Q instanceof Set)return"set";if(Q instanceof Map)return"map";if(Q instanceof File)return"file";return"unknown"}function I4(Q){if(Array.isArray(Q))return"array";if(typeof Q==="string")return"string";return"unknown"}function SQ(...Q){let[X,Y,$]=Q;if(typeof X==="string")return{message:X,code:"custom",input:Y,inst:$};return{...X}}function aq(Q){return Object.entries(Q).filter(([X,Y])=>{return Number.isNaN(Number.parseInt(X,10))}).map((X)=>X[1])}class OW{constructor(...Q){}}var wW=(Q,X)=>{Q.name="$ZodError",Object.defineProperty(Q,"_zod",{value:Q._zod,enumerable:!1}),Object.defineProperty(Q,"issues",{value:X,enumerable:!1}),Object.defineProperty(Q,"message",{get(){return JSON.stringify(X,AQ,2)},enumerable:!0})},v9=D("$ZodError",wW),E4=D("$ZodError",wW,{Parent:Error});function ZQ(Q,X=(Y)=>Y.message){let Y={},$=[];for(let W of Q.issues)if(W.path.length>0)Y[W.path[0]]=Y[W.path[0]]||[],Y[W.path[0]].push(X(W));else $.push(X(W));return{formErrors:$,fieldErrors:Y}}function CQ(Q,X){let Y=X||function(J){return J.message},$={_errors:[]},W=(J)=>{for(let G of J.issues)if(G.code==="invalid_union"&&G.errors.length)G.errors.map((H)=>W({issues:H}));else if(G.code==="invalid_key")W({issues:G.issues});else if(G.code==="invalid_element")W({issues:G.issues});else if(G.path.length===0)$._errors.push(Y(G));else{let H=$,B=0;while(B<G.path.length){let z=G.path[B];if(B!==G.path.length-1)H[z]=H[z]||{_errors:[]};else H[z]=H[z]||{_errors:[]},H[z]._errors.push(Y(G));H=H[z],B++}}};return W(Q),$}var kQ=(Q)=>(X,Y,$,W)=>{let J=$?Object.assign($,{async:!1}):{async:!1},G=X._zod.run({value:Y,issues:[]},J);if(G instanceof Promise)throw new g1;if(G.issues.length){let H=new(W?.Err??Q)(G.issues.map((B)=>t0(B,J,m0())));throw C9(H,W?.callee),H}return G.value},vQ=kQ(E4),_Q=(Q)=>async(X,Y,$,W)=>{let J=$?Object.assign($,{async:!0}):{async:!0},G=X._zod.run({value:Y,issues:[]},J);if(G instanceof Promise)G=await G;if(G.issues.length){let H=new(W?.Err??Q)(G.issues.map((B)=>t0(B,J,m0())));throw C9(H,W?.callee),H}return G.value},TQ=_Q(E4),xQ=(Q)=>(X,Y,$)=>{let W=$?{...$,async:!1}:{async:!1},J=X._zod.run({value:Y,issues:[]},W);if(J instanceof Promise)throw new g1;return J.issues.length?{success:!1,error:new(Q??v9)(J.issues.map((G)=>t0(G,W,m0())))}:{success:!0,data:J.value}},J6=xQ(E4),yQ=(Q)=>async(X,Y,$)=>{let W=$?Object.assign($,{async:!0}):{async:!0},J=X._zod.run({value:Y,issues:[]},W);if(J instanceof Promise)J=await J;return J.issues.length?{success:!1,error:new Q(J.issues.map((G)=>t0(G,W,m0())))}:{success:!0,data:J.value}},G6=yQ(E4);var MW=/^[cC][^\s-]{8,}$/,AW=/^[0-9a-z]+$/,jW=/^[0-9A-HJKMNP-TV-Za-hjkmnp-tv-z]{26}$/,RW=/^[0-9a-vA-V]{20}$/,IW=/^[A-Za-z0-9]{27}$/,EW=/^[a-zA-Z0-9_-]{21}$/,bW=/^P(?:(\d+W)|(?!.*W)(?=\d|T\d)(\d+Y)?(\d+M)?(\d+D)?(T(?=\d)(\d+H)?(\d+M)?(\d+([.,]\d+)?S)?)?)$/;var PW=/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12})$/,gQ=(Q)=>{if(!Q)return/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[1-8][0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12}|00000000-0000-0000-0000-000000000000)$/;return new RegExp(`^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-${Q}[0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12})$`)};var SW=/^(?!\.)(?!.*\.\.)([A-Za-z0-9_'+\-\.]*)[A-Za-z0-9_+-]@([A-Za-z0-9][A-Za-z0-9\-]*\.)+[A-Za-z]{2,}$/;function ZW(){return new RegExp("^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$","u")}var CW=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,kW=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|::|([0-9a-fA-F]{1,4})?::([0-9a-fA-F]{1,4}:?){0,6})$/,vW=/^((25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/([0-9]|[1-2][0-9]|3[0-2])$/,_W=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|::|([0-9a-fA-F]{1,4})?::([0-9a-fA-F]{1,4}:?){0,6})\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,TW=/^$|^(?:[0-9a-zA-Z+/]{4})*(?:(?:[0-9a-zA-Z+/]{2}==)|(?:[0-9a-zA-Z+/]{3}=))?$/,hQ=/^[A-Za-z0-9_-]*$/,xW=/^([a-zA-Z0-9-]+\.)*[a-zA-Z0-9-]+$/;var yW=/^\+(?:[0-9]){6,14}[0-9]$/,gW="(?:(?:\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-(?:(?:0[13578]|1[02])-(?:0[1-9]|[12]\\d|3[01])|(?:0[469]|11)-(?:0[1-9]|[12]\\d|30)|(?:02)-(?:0[1-9]|1\\d|2[0-8])))",hW=new RegExp(`^${gW}$`);function fW(Q){return typeof Q.precision==="number"?Q.precision===-1?"(?:[01]\\d|2[0-3]):[0-5]\\d":Q.precision===0?"(?:[01]\\d|2[0-3]):[0-5]\\d:[0-5]\\d":`(?:[01]\\d|2[0-3]):[0-5]\\d:[0-5]\\d\\.\\d{${Q.precision}}`:"(?:[01]\\d|2[0-3]):[0-5]\\d(?::[0-5]\\d(?:\\.\\d+)?)?"}function uW(Q){return new RegExp(`^${fW(Q)}$`)}function lW(Q){let X=fW({precision:Q.precision}),Y=["Z"];if(Q.local)Y.push("");if(Q.offset)Y.push("([+-]\\d{2}:\\d{2})");let $=`${X}(?:${Y.join("|")})`;return new RegExp(`^${gW}T(?:${$})$`)}var mW=(Q)=>{let X=Q?`[\\s\\S]{${Q?.minimum??0},${Q?.maximum??""}}`:"[\\s\\S]*";return new RegExp(`^${X}$`)};var cW=/^\d+$/,pW=/^-?\d+(?:\.\d+)?/i,dW=/true|false/i,iW=/null/i;var nW=/^[^A-Z]*$/,rW=/^[^a-z]*$/;var j0=D("$ZodCheck",(Q,X)=>{var Y;Q._zod??(Q._zod={}),Q._zod.def=X,(Y=Q._zod).onattach??(Y.onattach=[])}),oW={number:"number",bigint:"bigint",object:"date"},fQ=D("$ZodCheckLessThan",(Q,X)=>{j0.init(Q,X);let Y=oW[typeof X.value];Q._zod.onattach.push(($)=>{let W=$._zod.bag,J=(X.inclusive?W.maximum:W.exclusiveMaximum)??Number.POSITIVE_INFINITY;if(X.value<J)if(X.inclusive)W.maximum=X.value;else W.exclusiveMaximum=X.value}),Q._zod.check=($)=>{if(X.inclusive?$.value<=X.value:$.value<X.value)return;$.issues.push({origin:Y,code:"too_big",maximum:X.value,input:$.value,inclusive:X.inclusive,inst:Q,continue:!X.abort})}}),uQ=D("$ZodCheckGreaterThan",(Q,X)=>{j0.init(Q,X);let Y=oW[typeof X.value];Q._zod.onattach.push(($)=>{let W=$._zod.bag,J=(X.inclusive?W.minimum:W.exclusiveMinimum)??Number.NEGATIVE_INFINITY;if(X.value>J)if(X.inclusive)W.minimum=X.value;else W.exclusiveMinimum=X.value}),Q._zod.check=($)=>{if(X.inclusive?$.value>=X.value:$.value>X.value)return;$.issues.push({origin:Y,code:"too_small",minimum:X.value,input:$.value,inclusive:X.inclusive,inst:Q,continue:!X.abort})}}),tW=D("$ZodCheckMultipleOf",(Q,X)=>{j0.init(Q,X),Q._zod.onattach.push((Y)=>{var $;($=Y._zod.bag).multipleOf??($.multipleOf=X.value)}),Q._zod.check=(Y)=>{if(typeof Y.value!==typeof X.value)throw Error("Cannot mix number and bigint in multiple_of check.");if(typeof Y.value==="bigint"?Y.value%X.value===BigInt(0):jQ(Y.value,X.value)===0)return;Y.issues.push({origin:typeof Y.value,code:"not_multiple_of",divisor:X.value,input:Y.value,inst:Q,continue:!X.abort})}}),aW=D("$ZodCheckNumberFormat",(Q,X)=>{j0.init(Q,X),X.format=X.format||"float64";let Y=X.format?.includes("int"),$=Y?"int":"number",[W,J]=PQ[X.format];Q._zod.onattach.push((G)=>{let H=G._zod.bag;if(H.format=X.format,H.minimum=W,H.maximum=J,Y)H.pattern=cW}),Q._zod.check=(G)=>{let H=G.value;if(Y){if(!Number.isInteger(H)){G.issues.push({expected:$,format:X.format,code:"invalid_type",input:H,inst:Q});return}if(!Number.isSafeInteger(H)){if(H>0)G.issues.push({input:H,code:"too_big",maximum:Number.MAX_SAFE_INTEGER,note:"Integers must be within the safe integer range.",inst:Q,origin:$,continue:!X.abort});else G.issues.push({input:H,code:"too_small",minimum:Number.MIN_SAFE_INTEGER,note:"Integers must be within the safe integer range.",inst:Q,origin:$,continue:!X.abort});return}}if(H<W)G.issues.push({origin:"number",input:H,code:"too_small",minimum:W,inclusive:!0,inst:Q,continue:!X.abort});if(H>J)G.issues.push({origin:"number",input:H,code:"too_big",maximum:J,inst:Q})}});var sW=D("$ZodCheckMaxLength",(Q,X)=>{j0.init(Q,X),Q._zod.when=(Y)=>{let $=Y.value;return!j4($)&&$.length!==void 0},Q._zod.onattach.push((Y)=>{let $=Y._zod.bag.maximum??Number.POSITIVE_INFINITY;if(X.maximum<$)Y._zod.bag.maximum=X.maximum}),Q._zod.check=(Y)=>{let $=Y.value;if($.length<=X.maximum)return;let J=I4($);Y.issues.push({origin:J,code:"too_big",maximum:X.maximum,inclusive:!0,input:$,inst:Q,continue:!X.abort})}}),eW=D("$ZodCheckMinLength",(Q,X)=>{j0.init(Q,X),Q._zod.when=(Y)=>{let $=Y.value;return!j4($)&&$.length!==void 0},Q._zod.onattach.push((Y)=>{let $=Y._zod.bag.minimum??Number.NEGATIVE_INFINITY;if(X.minimum>$)Y._zod.bag.minimum=X.minimum}),Q._zod.check=(Y)=>{let $=Y.value;if($.length>=X.minimum)return;let J=I4($);Y.issues.push({origin:J,code:"too_small",minimum:X.minimum,inclusive:!0,input:$,inst:Q,continue:!X.abort})}}),QJ=D("$ZodCheckLengthEquals",(Q,X)=>{j0.init(Q,X),Q._zod.when=(Y)=>{let $=Y.value;return!j4($)&&$.length!==void 0},Q._zod.onattach.push((Y)=>{let $=Y._zod.bag;$.minimum=X.length,$.maximum=X.length,$.length=X.length}),Q._zod.check=(Y)=>{let $=Y.value,W=$.length;if(W===X.length)return;let J=I4($),G=W>X.length;Y.issues.push({origin:J,...G?{code:"too_big",maximum:X.length}:{code:"too_small",minimum:X.length},inclusive:!0,exact:!0,input:Y.value,inst:Q,continue:!X.abort})}}),b4=D("$ZodCheckStringFormat",(Q,X)=>{var Y,$;if(j0.init(Q,X),Q._zod.onattach.push((W)=>{let J=W._zod.bag;if(J.format=X.format,X.pattern)J.patterns??(J.patterns=new Set),J.patterns.add(X.pattern)}),X.pattern)(Y=Q._zod).check??(Y.check=(W)=>{if(X.pattern.lastIndex=0,X.pattern.test(W.value))return;W.issues.push({origin:"string",code:"invalid_format",format:X.format,input:W.value,...X.pattern?{pattern:X.pattern.toString()}:{},inst:Q,continue:!X.abort})});else($=Q._zod).check??($.check=()=>{})}),XJ=D("$ZodCheckRegex",(Q,X)=>{b4.init(Q,X),Q._zod.check=(Y)=>{if(X.pattern.lastIndex=0,X.pattern.test(Y.value))return;Y.issues.push({origin:"string",code:"invalid_format",format:"regex",input:Y.value,pattern:X.pattern.toString(),inst:Q,continue:!X.abort})}}),YJ=D("$ZodCheckLowerCase",(Q,X)=>{X.pattern??(X.pattern=nW),b4.init(Q,X)}),$J=D("$ZodCheckUpperCase",(Q,X)=>{X.pattern??(X.pattern=rW),b4.init(Q,X)}),WJ=D("$ZodCheckIncludes",(Q,X)=>{j0.init(Q,X);let Y=h1(X.includes),$=new RegExp(typeof X.position==="number"?`^.{${X.position}}${Y}`:Y);X.pattern=$,Q._zod.onattach.push((W)=>{let J=W._zod.bag;J.patterns??(J.patterns=new Set),J.patterns.add($)}),Q._zod.check=(W)=>{if(W.value.includes(X.includes,X.position))return;W.issues.push({origin:"string",code:"invalid_format",format:"includes",includes:X.includes,input:W.value,inst:Q,continue:!X.abort})}}),JJ=D("$ZodCheckStartsWith",(Q,X)=>{j0.init(Q,X);let Y=new RegExp(`^${h1(X.prefix)}.*`);X.pattern??(X.pattern=Y),Q._zod.onattach.push(($)=>{let W=$._zod.bag;W.patterns??(W.patterns=new Set),W.patterns.add(Y)}),Q._zod.check=($)=>{if($.value.startsWith(X.prefix))return;$.issues.push({origin:"string",code:"invalid_format",format:"starts_with",prefix:X.prefix,input:$.value,inst:Q,continue:!X.abort})}}),GJ=D("$ZodCheckEndsWith",(Q,X)=>{j0.init(Q,X);let Y=new RegExp(`.*${h1(X.suffix)}$`);X.pattern??(X.pattern=Y),Q._zod.onattach.push(($)=>{let W=$._zod.bag;W.patterns??(W.patterns=new Set),W.patterns.add(Y)}),Q._zod.check=($)=>{if($.value.endsWith(X.suffix))return;$.issues.push({origin:"string",code:"invalid_format",format:"ends_with",suffix:X.suffix,input:$.value,inst:Q,continue:!X.abort})}});var HJ=D("$ZodCheckOverwrite",(Q,X)=>{j0.init(Q,X),Q._zod.check=(Y)=>{Y.value=X.tx(Y.value)}});class lQ{constructor(Q=[]){if(this.content=[],this.indent=0,this)this.args=Q}indented(Q){this.indent+=1,Q(this),this.indent-=1}write(Q){if(typeof Q==="function"){Q(this,{execution:"sync"}),Q(this,{execution:"async"});return}let Y=Q.split(`
`).filter((J)=>J),$=Math.min(...Y.map((J)=>J.length-J.trimStart().length)),W=Y.map((J)=>J.slice($)).map((J)=>" ".repeat(this.indent*2)+J);for(let J of W)this.content.push(J)}compile(){let Q=Function,X=this?.args,$=[...(this?.content??[""]).map((W)=>`  ${W}`)];return new Q(...X,$.join(`
`))}}var zJ={major:4,minor:0,patch:0};var Q0=D("$ZodType",(Q,X)=>{var Y;Q??(Q={}),Q._zod.def=X,Q._zod.bag=Q._zod.bag||{},Q._zod.version=zJ;let $=[...Q._zod.def.checks??[]];if(Q._zod.traits.has("$ZodCheck"))$.unshift(Q);for(let W of $)for(let J of W._zod.onattach)J(Q);if($.length===0)(Y=Q._zod).deferred??(Y.deferred=[]),Q._zod.deferred?.push(()=>{Q._zod.run=Q._zod.parse});else{let W=(J,G,H)=>{let B=W6(J),z;for(let K of G){if(K._zod.when){if(!K._zod.when(J))continue}else if(B)continue;let q=J.issues.length,U=K._zod.check(J);if(U instanceof Promise&&H?.async===!1)throw new g1;if(z||U instanceof Promise)z=(z??Promise.resolve()).then(async()=>{if(await U,J.issues.length===q)return;if(!B)B=W6(J,q)});else{if(J.issues.length===q)continue;if(!B)B=W6(J,q)}}if(z)return z.then(()=>{return J});return J};Q._zod.run=(J,G)=>{let H=Q._zod.parse(J,G);if(H instanceof Promise){if(G.async===!1)throw new g1;return H.then((B)=>W(B,$,G))}return W(H,$,G)}}Q["~standard"]={validate:(W)=>{try{let J=J6(Q,W);return J.success?{value:J.data}:{issues:J.error?.issues}}catch(J){return G6(Q,W).then((G)=>G.success?{value:G.data}:{issues:G.error?.issues})}},vendor:"zod",version:1}}),P4=D("$ZodString",(Q,X)=>{Q0.init(Q,X),Q._zod.pattern=[...Q?._zod.bag?.patterns??[]].pop()??mW(Q._zod.bag),Q._zod.parse=(Y,$)=>{if(X.coerce)try{Y.value=String(Y.value)}catch(W){}if(typeof Y.value==="string")return Y;return Y.issues.push({expected:"string",code:"invalid_type",input:Y.value,inst:Q}),Y}}),G0=D("$ZodStringFormat",(Q,X)=>{b4.init(Q,X),P4.init(Q,X)}),cQ=D("$ZodGUID",(Q,X)=>{X.pattern??(X.pattern=PW),G0.init(Q,X)}),pQ=D("$ZodUUID",(Q,X)=>{if(X.version){let $={v1:1,v2:2,v3:3,v4:4,v5:5,v6:6,v7:7,v8:8}[X.version];if($===void 0)throw Error(`Invalid UUID version: "${X.version}"`);X.pattern??(X.pattern=gQ($))}else X.pattern??(X.pattern=gQ());G0.init(Q,X)}),dQ=D("$ZodEmail",(Q,X)=>{X.pattern??(X.pattern=SW),G0.init(Q,X)}),iQ=D("$ZodURL",(Q,X)=>{G0.init(Q,X),Q._zod.check=(Y)=>{try{let $=Y.value,W=new URL($),J=W.href;if(X.hostname){if(X.hostname.lastIndex=0,!X.hostname.test(W.hostname))Y.issues.push({code:"invalid_format",format:"url",note:"Invalid hostname",pattern:xW.source,input:Y.value,inst:Q,continue:!X.abort})}if(X.protocol){if(X.protocol.lastIndex=0,!X.protocol.test(W.protocol.endsWith(":")?W.protocol.slice(0,-1):W.protocol))Y.issues.push({code:"invalid_format",format:"url",note:"Invalid protocol",pattern:X.protocol.source,input:Y.value,inst:Q,continue:!X.abort})}if(!$.endsWith("/")&&J.endsWith("/"))Y.value=J.slice(0,-1);else Y.value=J;return}catch($){Y.issues.push({code:"invalid_format",format:"url",input:Y.value,inst:Q,continue:!X.abort})}}}),nQ=D("$ZodEmoji",(Q,X)=>{X.pattern??(X.pattern=ZW()),G0.init(Q,X)}),rQ=D("$ZodNanoID",(Q,X)=>{X.pattern??(X.pattern=EW),G0.init(Q,X)}),oQ=D("$ZodCUID",(Q,X)=>{X.pattern??(X.pattern=MW),G0.init(Q,X)}),tQ=D("$ZodCUID2",(Q,X)=>{X.pattern??(X.pattern=AW),G0.init(Q,X)}),aQ=D("$ZodULID",(Q,X)=>{X.pattern??(X.pattern=jW),G0.init(Q,X)}),sQ=D("$ZodXID",(Q,X)=>{X.pattern??(X.pattern=RW),G0.init(Q,X)}),eQ=D("$ZodKSUID",(Q,X)=>{X.pattern??(X.pattern=IW),G0.init(Q,X)}),wJ=D("$ZodISODateTime",(Q,X)=>{X.pattern??(X.pattern=lW(X)),G0.init(Q,X)}),MJ=D("$ZodISODate",(Q,X)=>{X.pattern??(X.pattern=hW),G0.init(Q,X)}),AJ=D("$ZodISOTime",(Q,X)=>{X.pattern??(X.pattern=uW(X)),G0.init(Q,X)}),jJ=D("$ZodISODuration",(Q,X)=>{X.pattern??(X.pattern=bW),G0.init(Q,X)}),QX=D("$ZodIPv4",(Q,X)=>{X.pattern??(X.pattern=CW),G0.init(Q,X),Q._zod.onattach.push((Y)=>{let $=Y._zod.bag;$.format="ipv4"})}),XX=D("$ZodIPv6",(Q,X)=>{X.pattern??(X.pattern=kW),G0.init(Q,X),Q._zod.onattach.push((Y)=>{let $=Y._zod.bag;$.format="ipv6"}),Q._zod.check=(Y)=>{try{new URL(`http://[${Y.value}]`)}catch{Y.issues.push({code:"invalid_format",format:"ipv6",input:Y.value,inst:Q,continue:!X.abort})}}}),YX=D("$ZodCIDRv4",(Q,X)=>{X.pattern??(X.pattern=vW),G0.init(Q,X)}),$X=D("$ZodCIDRv6",(Q,X)=>{X.pattern??(X.pattern=_W),G0.init(Q,X),Q._zod.check=(Y)=>{let[$,W]=Y.value.split("/");try{if(!W)throw Error();let J=Number(W);if(`${J}`!==W)throw Error();if(J<0||J>128)throw Error();new URL(`http://[${$}]`)}catch{Y.issues.push({code:"invalid_format",format:"cidrv6",input:Y.value,inst:Q,continue:!X.abort})}}});function RJ(Q){if(Q==="")return!0;if(Q.length%4!==0)return!1;try{return atob(Q),!0}catch{return!1}}var WX=D("$ZodBase64",(Q,X)=>{X.pattern??(X.pattern=TW),G0.init(Q,X),Q._zod.onattach.push((Y)=>{Y._zod.bag.contentEncoding="base64"}),Q._zod.check=(Y)=>{if(RJ(Y.value))return;Y.issues.push({code:"invalid_format",format:"base64",input:Y.value,inst:Q,continue:!X.abort})}});function eq(Q){if(!hQ.test(Q))return!1;let X=Q.replace(/[-_]/g,($)=>$==="-"?"+":"/"),Y=X.padEnd(Math.ceil(X.length/4)*4,"=");return RJ(Y)}var JX=D("$ZodBase64URL",(Q,X)=>{X.pattern??(X.pattern=hQ),G0.init(Q,X),Q._zod.onattach.push((Y)=>{Y._zod.bag.contentEncoding="base64url"}),Q._zod.check=(Y)=>{if(eq(Y.value))return;Y.issues.push({code:"invalid_format",format:"base64url",input:Y.value,inst:Q,continue:!X.abort})}}),GX=D("$ZodE164",(Q,X)=>{X.pattern??(X.pattern=yW),G0.init(Q,X)});function QU(Q,X=null){try{let Y=Q.split(".");if(Y.length!==3)return!1;let[$]=Y;if(!$)return!1;let W=JSON.parse(atob($));if("typ"in W&&W?.typ!=="JWT")return!1;if(!W.alg)return!1;if(X&&(!("alg"in W)||W.alg!==X))return!1;return!0}catch{return!1}}var HX=D("$ZodJWT",(Q,X)=>{G0.init(Q,X),Q._zod.check=(Y)=>{if(QU(Y.value,X.alg))return;Y.issues.push({code:"invalid_format",format:"jwt",input:Y.value,inst:Q,continue:!X.abort})}});var x9=D("$ZodNumber",(Q,X)=>{Q0.init(Q,X),Q._zod.pattern=Q._zod.bag.pattern??pW,Q._zod.parse=(Y,$)=>{if(X.coerce)try{Y.value=Number(Y.value)}catch(G){}let W=Y.value;if(typeof W==="number"&&!Number.isNaN(W)&&Number.isFinite(W))return Y;let J=typeof W==="number"?Number.isNaN(W)?"NaN":!Number.isFinite(W)?"Infinity":void 0:void 0;return Y.issues.push({expected:"number",code:"invalid_type",input:W,inst:Q,...J?{received:J}:{}}),Y}}),BX=D("$ZodNumber",(Q,X)=>{aW.init(Q,X),x9.init(Q,X)}),zX=D("$ZodBoolean",(Q,X)=>{Q0.init(Q,X),Q._zod.pattern=dW,Q._zod.parse=(Y,$)=>{if(X.coerce)try{Y.value=Boolean(Y.value)}catch(J){}let W=Y.value;if(typeof W==="boolean")return Y;return Y.issues.push({expected:"boolean",code:"invalid_type",input:W,inst:Q}),Y}});var KX=D("$ZodNull",(Q,X)=>{Q0.init(Q,X),Q._zod.pattern=iW,Q._zod.values=new Set([null]),Q._zod.parse=(Y,$)=>{let W=Y.value;if(W===null)return Y;return Y.issues.push({expected:"null",code:"invalid_type",input:W,inst:Q}),Y}});var VX=D("$ZodUnknown",(Q,X)=>{Q0.init(Q,X),Q._zod.parse=(Y)=>Y}),qX=D("$ZodNever",(Q,X)=>{Q0.init(Q,X),Q._zod.parse=(Y,$)=>{return Y.issues.push({expected:"never",code:"invalid_type",input:Y.value,inst:Q}),Y}});function KJ(Q,X,Y){if(Q.issues.length)X.issues.push(...z1(Y,Q.issues));X.value[Y]=Q.value}var UX=D("$ZodArray",(Q,X)=>{Q0.init(Q,X),Q._zod.parse=(Y,$)=>{let W=Y.value;if(!Array.isArray(W))return Y.issues.push({expected:"array",code:"invalid_type",input:W,inst:Q}),Y;Y.value=Array(W.length);let J=[];for(let G=0;G<W.length;G++){let H=W[G],B=X.element._zod.run({value:H,issues:[]},$);if(B instanceof Promise)J.push(B.then((z)=>KJ(z,Y,G)));else KJ(B,Y,G)}if(J.length)return Promise.all(J).then(()=>Y);return Y}});function T9(Q,X,Y){if(Q.issues.length)X.issues.push(...z1(Y,Q.issues));X.value[Y]=Q.value}function VJ(Q,X,Y,$){if(Q.issues.length)if($[Y]===void 0)if(Y in $)X.value[Y]=void 0;else X.value[Y]=Q.value;else X.issues.push(...z1(Y,Q.issues));else if(Q.value===void 0){if(Y in $)X.value[Y]=void 0}else X.value[Y]=Q.value}var y9=D("$ZodObject",(Q,X)=>{Q0.init(Q,X);let Y=A4(()=>{let q=Object.keys(X.shape);for(let V of q)if(!(X.shape[V]instanceof Q0))throw Error(`Invalid element at key "${V}": expected a Zod schema`);let U=bQ(X.shape);return{shape:X.shape,keys:q,keySet:new Set(q),numKeys:q.length,optionalKeys:new Set(U)}});J0(Q._zod,"propValues",()=>{let q=X.shape,U={};for(let V in q){let F=q[V]._zod;if(F.values){U[V]??(U[V]=new Set);for(let L of F.values)U[V].add(L)}}return U});let $=(q)=>{let U=new lQ(["shape","payload","ctx"]),V=Y.value,F=(A)=>{let R=$6(A);return`shape[${R}]._zod.run({ value: input[${R}], issues: [] }, ctx)`};U.write("const input = payload.value;");let L=Object.create(null),N=0;for(let A of V.keys)L[A]=`key_${N++}`;U.write("const newResult = {}");for(let A of V.keys)if(V.optionalKeys.has(A)){let R=L[A];U.write(`const ${R} = ${F(A)};`);let S=$6(A);U.write(`
        if (${R}.issues.length) {
          if (input[${S}] === undefined) {
            if (${S} in input) {
              newResult[${S}] = undefined;
            }
          } else {
            payload.issues = payload.issues.concat(
              ${R}.issues.map((iss) => ({
                ...iss,
                path: iss.path ? [${S}, ...iss.path] : [${S}],
              }))
            );
          }
        } else if (${R}.value === undefined) {
          if (${S} in input) newResult[${S}] = undefined;
        } else {
          newResult[${S}] = ${R}.value;
        }
        `)}else{let R=L[A];U.write(`const ${R} = ${F(A)};`),U.write(`
          if (${R}.issues.length) payload.issues = payload.issues.concat(${R}.issues.map(iss => ({
            ...iss,
            path: iss.path ? [${$6(A)}, ...iss.path] : [${$6(A)}]
          })));`),U.write(`newResult[${$6(A)}] = ${R}.value`)}U.write("payload.value = newResult;"),U.write("return payload;");let w=U.compile();return(A,R)=>w(q,A,R)},W,J=_6,G=!S9.jitless,B=G&&IQ.value,z=X.catchall,K;Q._zod.parse=(q,U)=>{K??(K=Y.value);let V=q.value;if(!J(V))return q.issues.push({expected:"object",code:"invalid_type",input:V,inst:Q}),q;let F=[];if(G&&B&&U?.async===!1&&U.jitless!==!0){if(!W)W=$(X.shape);q=W(q,U)}else{q.value={};let R=K.shape;for(let S of K.keys){let C=R[S],U0=C._zod.run({value:V[S],issues:[]},U),L0=C._zod.optin==="optional"&&C._zod.optout==="optional";if(U0 instanceof Promise)F.push(U0.then((s)=>L0?VJ(s,q,S,V):T9(s,q,S)));else if(L0)VJ(U0,q,S,V);else T9(U0,q,S)}}if(!z)return F.length?Promise.all(F).then(()=>q):q;let L=[],N=K.keySet,w=z._zod,A=w.def.type;for(let R of Object.keys(V)){if(N.has(R))continue;if(A==="never"){L.push(R);continue}let S=w.run({value:V[R],issues:[]},U);if(S instanceof Promise)F.push(S.then((C)=>T9(C,q,R)));else T9(S,q,R)}if(L.length)q.issues.push({code:"unrecognized_keys",keys:L,input:V,inst:Q});if(!F.length)return q;return Promise.all(F).then(()=>{return q})}});function qJ(Q,X,Y,$){for(let W of Q)if(W.issues.length===0)return X.value=W.value,X;return X.issues.push({code:"invalid_union",input:X.value,inst:Y,errors:Q.map((W)=>W.issues.map((J)=>t0(J,$,m0())))}),X}var g9=D("$ZodUnion",(Q,X)=>{Q0.init(Q,X),J0(Q._zod,"optin",()=>X.options.some((Y)=>Y._zod.optin==="optional")?"optional":void 0),J0(Q._zod,"optout",()=>X.options.some((Y)=>Y._zod.optout==="optional")?"optional":void 0),J0(Q._zod,"values",()=>{if(X.options.every((Y)=>Y._zod.values))return new Set(X.options.flatMap((Y)=>Array.from(Y._zod.values)));return}),J0(Q._zod,"pattern",()=>{if(X.options.every((Y)=>Y._zod.pattern)){let Y=X.options.map(($)=>$._zod.pattern);return new RegExp(`^(${Y.map(($)=>R4($.source)).join("|")})$`)}return}),Q._zod.parse=(Y,$)=>{let W=!1,J=[];for(let G of X.options){let H=G._zod.run({value:Y.value,issues:[]},$);if(H instanceof Promise)J.push(H),W=!0;else{if(H.issues.length===0)return H;J.push(H)}}if(!W)return qJ(J,Y,Q,$);return Promise.all(J).then((G)=>{return qJ(G,Y,Q,$)})}}),LX=D("$ZodDiscriminatedUnion",(Q,X)=>{g9.init(Q,X);let Y=Q._zod.parse;J0(Q._zod,"propValues",()=>{let W={};for(let J of X.options){let G=J._zod.propValues;if(!G||Object.keys(G).length===0)throw Error(`Invalid discriminated union option at index "${X.options.indexOf(J)}"`);for(let[H,B]of Object.entries(G)){if(!W[H])W[H]=new Set;for(let z of B)W[H].add(z)}}return W});let $=A4(()=>{let W=X.options,J=new Map;for(let G of W){let H=G._zod.propValues[X.discriminator];if(!H||H.size===0)throw Error(`Invalid discriminated union option at index "${X.options.indexOf(G)}"`);for(let B of H){if(J.has(B))throw Error(`Duplicate discriminator value "${String(B)}"`);J.set(B,G)}}return J});Q._zod.parse=(W,J)=>{let G=W.value;if(!_6(G))return W.issues.push({code:"invalid_type",expected:"object",input:G,inst:Q}),W;let H=$.value.get(G?.[X.discriminator]);if(H)return H._zod.run(W,J);if(X.unionFallback)return Y(W,J);return W.issues.push({code:"invalid_union",errors:[],note:"No matching discriminator",input:G,path:[X.discriminator],inst:Q}),W}}),FX=D("$ZodIntersection",(Q,X)=>{Q0.init(Q,X),Q._zod.parse=(Y,$)=>{let W=Y.value,J=X.left._zod.run({value:W,issues:[]},$),G=X.right._zod.run({value:W,issues:[]},$);if(J instanceof Promise||G instanceof Promise)return Promise.all([J,G]).then(([B,z])=>{return UJ(Y,B,z)});return UJ(Y,J,G)}});function mQ(Q,X){if(Q===X)return{valid:!0,data:Q};if(Q instanceof Date&&X instanceof Date&&+Q===+X)return{valid:!0,data:Q};if(T6(Q)&&T6(X)){let Y=Object.keys(X),$=Object.keys(Q).filter((J)=>Y.indexOf(J)!==-1),W={...Q,...X};for(let J of $){let G=mQ(Q[J],X[J]);if(!G.valid)return{valid:!1,mergeErrorPath:[J,...G.mergeErrorPath]};W[J]=G.data}return{valid:!0,data:W}}if(Array.isArray(Q)&&Array.isArray(X)){if(Q.length!==X.length)return{valid:!1,mergeErrorPath:[]};let Y=[];for(let $=0;$<Q.length;$++){let W=Q[$],J=X[$],G=mQ(W,J);if(!G.valid)return{valid:!1,mergeErrorPath:[$,...G.mergeErrorPath]};Y.push(G.data)}return{valid:!0,data:Y}}return{valid:!1,mergeErrorPath:[]}}function UJ(Q,X,Y){if(X.issues.length)Q.issues.push(...X.issues);if(Y.issues.length)Q.issues.push(...Y.issues);if(W6(Q))return Q;let $=mQ(X.value,Y.value);if(!$.valid)throw Error(`Unmergable intersection. Error path: ${JSON.stringify($.mergeErrorPath)}`);return Q.value=$.data,Q}var NX=D("$ZodRecord",(Q,X)=>{Q0.init(Q,X),Q._zod.parse=(Y,$)=>{let W=Y.value;if(!T6(W))return Y.issues.push({expected:"record",code:"invalid_type",input:W,inst:Q}),Y;let J=[];if(X.keyType._zod.values){let G=X.keyType._zod.values;Y.value={};for(let B of G)if(typeof B==="string"||typeof B==="number"||typeof B==="symbol"){let z=X.valueType._zod.run({value:W[B],issues:[]},$);if(z instanceof Promise)J.push(z.then((K)=>{if(K.issues.length)Y.issues.push(...z1(B,K.issues));Y.value[B]=K.value}));else{if(z.issues.length)Y.issues.push(...z1(B,z.issues));Y.value[B]=z.value}}let H;for(let B in W)if(!G.has(B))H=H??[],H.push(B);if(H&&H.length>0)Y.issues.push({code:"unrecognized_keys",input:W,inst:Q,keys:H})}else{Y.value={};for(let G of Reflect.ownKeys(W)){if(G==="__proto__")continue;let H=X.keyType._zod.run({value:G,issues:[]},$);if(H instanceof Promise)throw Error("Async schemas not supported in object keys currently");if(H.issues.length){Y.issues.push({origin:"record",code:"invalid_key",issues:H.issues.map((z)=>t0(z,$,m0())),input:G,path:[G],inst:Q}),Y.value[H.value]=H.value;continue}let B=X.valueType._zod.run({value:W[G],issues:[]},$);if(B instanceof Promise)J.push(B.then((z)=>{if(z.issues.length)Y.issues.push(...z1(G,z.issues));Y.value[H.value]=z.value}));else{if(B.issues.length)Y.issues.push(...z1(G,B.issues));Y.value[H.value]=B.value}}}if(J.length)return Promise.all(J).then(()=>Y);return Y}});var DX=D("$ZodEnum",(Q,X)=>{Q0.init(Q,X);let Y=M4(X.entries);Q._zod.values=new Set(Y),Q._zod.pattern=new RegExp(`^(${Y.filter(($)=>EQ.has(typeof $)).map(($)=>typeof $==="string"?h1($):$.toString()).join("|")})$`),Q._zod.parse=($,W)=>{let J=$.value;if(Q._zod.values.has(J))return $;return $.issues.push({code:"invalid_value",values:Y,input:J,inst:Q}),$}}),OX=D("$ZodLiteral",(Q,X)=>{Q0.init(Q,X),Q._zod.values=new Set(X.values),Q._zod.pattern=new RegExp(`^(${X.values.map((Y)=>typeof Y==="string"?h1(Y):Y?Y.toString():String(Y)).join("|")})$`),Q._zod.parse=(Y,$)=>{let W=Y.value;if(Q._zod.values.has(W))return Y;return Y.issues.push({code:"invalid_value",values:X.values,input:W,inst:Q}),Y}});var wX=D("$ZodTransform",(Q,X)=>{Q0.init(Q,X),Q._zod.parse=(Y,$)=>{let W=X.transform(Y.value,Y);if($.async)return(W instanceof Promise?W:Promise.resolve(W)).then((G)=>{return Y.value=G,Y});if(W instanceof Promise)throw new g1;return Y.value=W,Y}}),MX=D("$ZodOptional",(Q,X)=>{Q0.init(Q,X),Q._zod.optin="optional",Q._zod.optout="optional",J0(Q._zod,"values",()=>{return X.innerType._zod.values?new Set([...X.innerType._zod.values,void 0]):void 0}),J0(Q._zod,"pattern",()=>{let Y=X.innerType._zod.pattern;return Y?new RegExp(`^(${R4(Y.source)})?$`):void 0}),Q._zod.parse=(Y,$)=>{if(X.innerType._zod.optin==="optional")return X.innerType._zod.run(Y,$);if(Y.value===void 0)return Y;return X.innerType._zod.run(Y,$)}}),AX=D("$ZodNullable",(Q,X)=>{Q0.init(Q,X),J0(Q._zod,"optin",()=>X.innerType._zod.optin),J0(Q._zod,"optout",()=>X.innerType._zod.optout),J0(Q._zod,"pattern",()=>{let Y=X.innerType._zod.pattern;return Y?new RegExp(`^(${R4(Y.source)}|null)$`):void 0}),J0(Q._zod,"values",()=>{return X.innerType._zod.values?new Set([...X.innerType._zod.values,null]):void 0}),Q._zod.parse=(Y,$)=>{if(Y.value===null)return Y;return X.innerType._zod.run(Y,$)}}),jX=D("$ZodDefault",(Q,X)=>{Q0.init(Q,X),Q._zod.optin="optional",J0(Q._zod,"values",()=>X.innerType._zod.values),Q._zod.parse=(Y,$)=>{if(Y.value===void 0)return Y.value=X.defaultValue,Y;let W=X.innerType._zod.run(Y,$);if(W instanceof Promise)return W.then((J)=>LJ(J,X));return LJ(W,X)}});function LJ(Q,X){if(Q.value===void 0)Q.value=X.defaultValue;return Q}var RX=D("$ZodPrefault",(Q,X)=>{Q0.init(Q,X),Q._zod.optin="optional",J0(Q._zod,"values",()=>X.innerType._zod.values),Q._zod.parse=(Y,$)=>{if(Y.value===void 0)Y.value=X.defaultValue;return X.innerType._zod.run(Y,$)}}),IX=D("$ZodNonOptional",(Q,X)=>{Q0.init(Q,X),J0(Q._zod,"values",()=>{let Y=X.innerType._zod.values;return Y?new Set([...Y].filter(($)=>$!==void 0)):void 0}),Q._zod.parse=(Y,$)=>{let W=X.innerType._zod.run(Y,$);if(W instanceof Promise)return W.then((J)=>FJ(J,Q));return FJ(W,Q)}});function FJ(Q,X){if(!Q.issues.length&&Q.value===void 0)Q.issues.push({code:"invalid_type",expected:"nonoptional",input:Q.value,inst:X});return Q}var EX=D("$ZodCatch",(Q,X)=>{Q0.init(Q,X),Q._zod.optin="optional",J0(Q._zod,"optout",()=>X.innerType._zod.optout),J0(Q._zod,"values",()=>X.innerType._zod.values),Q._zod.parse=(Y,$)=>{let W=X.innerType._zod.run(Y,$);if(W instanceof Promise)return W.then((J)=>{if(Y.value=J.value,J.issues.length)Y.value=X.catchValue({...Y,error:{issues:J.issues.map((G)=>t0(G,$,m0()))},input:Y.value}),Y.issues=[];return Y});if(Y.value=W.value,W.issues.length)Y.value=X.catchValue({...Y,error:{issues:W.issues.map((J)=>t0(J,$,m0()))},input:Y.value}),Y.issues=[];return Y}});var bX=D("$ZodPipe",(Q,X)=>{Q0.init(Q,X),J0(Q._zod,"values",()=>X.in._zod.values),J0(Q._zod,"optin",()=>X.in._zod.optin),J0(Q._zod,"optout",()=>X.out._zod.optout),Q._zod.parse=(Y,$)=>{let W=X.in._zod.run(Y,$);if(W instanceof Promise)return W.then((J)=>NJ(J,X,$));return NJ(W,X,$)}});function NJ(Q,X,Y){if(W6(Q))return Q;return X.out._zod.run({value:Q.value,issues:Q.issues},Y)}var PX=D("$ZodReadonly",(Q,X)=>{Q0.init(Q,X),J0(Q._zod,"propValues",()=>X.innerType._zod.propValues),J0(Q._zod,"values",()=>X.innerType._zod.values),J0(Q._zod,"optin",()=>X.innerType._zod.optin),J0(Q._zod,"optout",()=>X.innerType._zod.optout),Q._zod.parse=(Y,$)=>{let W=X.innerType._zod.run(Y,$);if(W instanceof Promise)return W.then(DJ);return DJ(W)}});function DJ(Q){return Q.value=Object.freeze(Q.value),Q}var SX=D("$ZodCustom",(Q,X)=>{j0.init(Q,X),Q0.init(Q,X),Q._zod.parse=(Y,$)=>{return Y},Q._zod.check=(Y)=>{let $=Y.value,W=X.fn($);if(W instanceof Promise)return W.then((J)=>OJ(J,Y,$,Q));OJ(W,Y,$,Q);return}});function OJ(Q,X,Y,$){if(!Q){let W={code:"custom",input:Y,inst:$,path:[...$._zod.def.path??[]],continue:!$._zod.def.abort};if($._zod.def.params)W.params=$._zod.def.params;X.issues.push(SQ(W))}}var XU=(Q)=>{let X=typeof Q;switch(X){case"number":return Number.isNaN(Q)?"NaN":"number";case"object":{if(Array.isArray(Q))return"array";if(Q===null)return"null";if(Object.getPrototypeOf(Q)!==Object.prototype&&Q.constructor)return Q.constructor.name}}return X},YU=()=>{let Q={string:{unit:"characters",verb:"to have"},file:{unit:"bytes",verb:"to have"},array:{unit:"items",verb:"to have"},set:{unit:"items",verb:"to have"}};function X($){return Q[$]??null}let Y={regex:"input",email:"email address",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO datetime",date:"ISO date",time:"ISO time",duration:"ISO duration",ipv4:"IPv4 address",ipv6:"IPv6 address",cidrv4:"IPv4 range",cidrv6:"IPv6 range",base64:"base64-encoded string",base64url:"base64url-encoded string",json_string:"JSON string",e164:"E.164 number",jwt:"JWT",template_literal:"input"};return($)=>{switch($.code){case"invalid_type":return`Invalid input: expected ${$.expected}, received ${XU($.input)}`;case"invalid_value":if($.values.length===1)return`Invalid input: expected ${k9($.values[0])}`;return`Invalid option: expected one of ${Z9($.values,"|")}`;case"too_big":{let W=$.inclusive?"<=":"<",J=X($.origin);if(J)return`Too big: expected ${$.origin??"value"} to have ${W}${$.maximum.toString()} ${J.unit??"elements"}`;return`Too big: expected ${$.origin??"value"} to be ${W}${$.maximum.toString()}`}case"too_small":{let W=$.inclusive?">=":">",J=X($.origin);if(J)return`Too small: expected ${$.origin} to have ${W}${$.minimum.toString()} ${J.unit}`;return`Too small: expected ${$.origin} to be ${W}${$.minimum.toString()}`}case"invalid_format":{let W=$;if(W.format==="starts_with")return`Invalid string: must start with "${W.prefix}"`;if(W.format==="ends_with")return`Invalid string: must end with "${W.suffix}"`;if(W.format==="includes")return`Invalid string: must include "${W.includes}"`;if(W.format==="regex")return`Invalid string: must match pattern ${W.pattern}`;return`Invalid ${Y[W.format]??$.format}`}case"not_multiple_of":return`Invalid number: must be a multiple of ${$.divisor}`;case"unrecognized_keys":return`Unrecognized key${$.keys.length>1?"s":""}: ${Z9($.keys,", ")}`;case"invalid_key":return`Invalid key in ${$.origin}`;case"invalid_union":return"Invalid input";case"invalid_element":return`Invalid value in ${$.origin}`;default:return"Invalid input"}}};function ZX(){return{localeError:YU()}}var $U=Symbol("ZodOutput"),WU=Symbol("ZodInput");class h9{constructor(){this._map=new WeakMap,this._idmap=new Map}add(Q,...X){let Y=X[0];if(this._map.set(Q,Y),Y&&typeof Y==="object"&&"id"in Y){if(this._idmap.has(Y.id))throw Error(`ID ${Y.id} already exists in the registry`);this._idmap.set(Y.id,Q)}return this}remove(Q){return this._map.delete(Q),this}get(Q){let X=Q._zod.parent;if(X){let Y={...this.get(X)??{}};return delete Y.id,{...Y,...this._map.get(Q)}}return this._map.get(Q)}has(Q){return this._map.has(Q)}}function IJ(){return new h9}var f1=IJ();function CX(Q,X){return new Q({type:"string",...y(X)})}function kX(Q,X){return new Q({type:"string",format:"email",check:"string_format",abort:!1,...y(X)})}function f9(Q,X){return new Q({type:"string",format:"guid",check:"string_format",abort:!1,...y(X)})}function vX(Q,X){return new Q({type:"string",format:"uuid",check:"string_format",abort:!1,...y(X)})}function _X(Q,X){return new Q({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v4",...y(X)})}function TX(Q,X){return new Q({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v6",...y(X)})}function xX(Q,X){return new Q({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v7",...y(X)})}function yX(Q,X){return new Q({type:"string",format:"url",check:"string_format",abort:!1,...y(X)})}function gX(Q,X){return new Q({type:"string",format:"emoji",check:"string_format",abort:!1,...y(X)})}function hX(Q,X){return new Q({type:"string",format:"nanoid",check:"string_format",abort:!1,...y(X)})}function fX(Q,X){return new Q({type:"string",format:"cuid",check:"string_format",abort:!1,...y(X)})}function uX(Q,X){return new Q({type:"string",format:"cuid2",check:"string_format",abort:!1,...y(X)})}function lX(Q,X){return new Q({type:"string",format:"ulid",check:"string_format",abort:!1,...y(X)})}function mX(Q,X){return new Q({type:"string",format:"xid",check:"string_format",abort:!1,...y(X)})}function cX(Q,X){return new Q({type:"string",format:"ksuid",check:"string_format",abort:!1,...y(X)})}function pX(Q,X){return new Q({type:"string",format:"ipv4",check:"string_format",abort:!1,...y(X)})}function dX(Q,X){return new Q({type:"string",format:"ipv6",check:"string_format",abort:!1,...y(X)})}function iX(Q,X){return new Q({type:"string",format:"cidrv4",check:"string_format",abort:!1,...y(X)})}function nX(Q,X){return new Q({type:"string",format:"cidrv6",check:"string_format",abort:!1,...y(X)})}function rX(Q,X){return new Q({type:"string",format:"base64",check:"string_format",abort:!1,...y(X)})}function oX(Q,X){return new Q({type:"string",format:"base64url",check:"string_format",abort:!1,...y(X)})}function tX(Q,X){return new Q({type:"string",format:"e164",check:"string_format",abort:!1,...y(X)})}function aX(Q,X){return new Q({type:"string",format:"jwt",check:"string_format",abort:!1,...y(X)})}function EJ(Q,X){return new Q({type:"string",format:"datetime",check:"string_format",offset:!1,local:!1,precision:null,...y(X)})}function bJ(Q,X){return new Q({type:"string",format:"date",check:"string_format",...y(X)})}function PJ(Q,X){return new Q({type:"string",format:"time",check:"string_format",precision:null,...y(X)})}function SJ(Q,X){return new Q({type:"string",format:"duration",check:"string_format",...y(X)})}function sX(Q,X){return new Q({type:"number",checks:[],...y(X)})}function eX(Q,X){return new Q({type:"number",check:"number_format",abort:!1,format:"safeint",...y(X)})}function QY(Q,X){return new Q({type:"boolean",...y(X)})}function XY(Q,X){return new Q({type:"null",...y(X)})}function YY(Q){return new Q({type:"unknown"})}function $Y(Q,X){return new Q({type:"never",...y(X)})}function u9(Q,X){return new fQ({check:"less_than",...y(X),value:Q,inclusive:!1})}function S4(Q,X){return new fQ({check:"less_than",...y(X),value:Q,inclusive:!0})}function l9(Q,X){return new uQ({check:"greater_than",...y(X),value:Q,inclusive:!1})}function Z4(Q,X){return new uQ({check:"greater_than",...y(X),value:Q,inclusive:!0})}function m9(Q,X){return new tW({check:"multiple_of",...y(X),value:Q})}function c9(Q,X){return new sW({check:"max_length",...y(X),maximum:Q})}function x6(Q,X){return new eW({check:"min_length",...y(X),minimum:Q})}function p9(Q,X){return new QJ({check:"length_equals",...y(X),length:Q})}function WY(Q,X){return new XJ({check:"string_format",format:"regex",...y(X),pattern:Q})}function JY(Q){return new YJ({check:"string_format",format:"lowercase",...y(Q)})}function GY(Q){return new $J({check:"string_format",format:"uppercase",...y(Q)})}function HY(Q,X){return new WJ({check:"string_format",format:"includes",...y(X),includes:Q})}function BY(Q,X){return new JJ({check:"string_format",format:"starts_with",...y(X),prefix:Q})}function zY(Q,X){return new GJ({check:"string_format",format:"ends_with",...y(X),suffix:Q})}function H6(Q){return new HJ({check:"overwrite",tx:Q})}function KY(Q){return H6((X)=>X.normalize(Q))}function VY(){return H6((Q)=>Q.trim())}function qY(){return H6((Q)=>Q.toLowerCase())}function UY(){return H6((Q)=>Q.toUpperCase())}function ZJ(Q,X,Y){return new Q({type:"array",element:X,...y(Y)})}function LY(Q,X,Y){let $=y(Y);return $.abort??($.abort=!0),new Q({type:"custom",check:"custom",fn:X,...$})}function FY(Q,X,Y){return new Q({type:"custom",check:"custom",fn:X,...y(Y)})}class NY{constructor(Q){this.counter=0,this.metadataRegistry=Q?.metadata??f1,this.target=Q?.target??"draft-2020-12",this.unrepresentable=Q?.unrepresentable??"throw",this.override=Q?.override??(()=>{}),this.io=Q?.io??"output",this.seen=new Map}process(Q,X={path:[],schemaPath:[]}){var Y;let $=Q._zod.def,W={guid:"uuid",url:"uri",datetime:"date-time",json_string:"json-string",regex:""},J=this.seen.get(Q);if(J){if(J.count++,X.schemaPath.includes(Q))J.cycle=X.path;return J.schema}let G={schema:{},count:1,cycle:void 0,path:X.path};this.seen.set(Q,G);let H=Q._zod.toJSONSchema?.();if(H)G.schema=H;else{let K={...X,schemaPath:[...X.schemaPath,Q],path:X.path},q=Q._zod.parent;if(q)G.ref=q,this.process(q,K),this.seen.get(q).isParent=!0;else{let U=G.schema;switch($.type){case"string":{let V=U;V.type="string";let{minimum:F,maximum:L,format:N,patterns:w,contentEncoding:A}=Q._zod.bag;if(typeof F==="number")V.minLength=F;if(typeof L==="number")V.maxLength=L;if(N){if(V.format=W[N]??N,V.format==="")delete V.format}if(A)V.contentEncoding=A;if(w&&w.size>0){let R=[...w];if(R.length===1)V.pattern=R[0].source;else if(R.length>1)G.schema.allOf=[...R.map((S)=>({...this.target==="draft-7"?{type:"string"}:{},pattern:S.source}))]}break}case"number":{let V=U,{minimum:F,maximum:L,format:N,multipleOf:w,exclusiveMaximum:A,exclusiveMinimum:R}=Q._zod.bag;if(typeof N==="string"&&N.includes("int"))V.type="integer";else V.type="number";if(typeof R==="number")V.exclusiveMinimum=R;if(typeof F==="number"){if(V.minimum=F,typeof R==="number")if(R>=F)delete V.minimum;else delete V.exclusiveMinimum}if(typeof A==="number")V.exclusiveMaximum=A;if(typeof L==="number"){if(V.maximum=L,typeof A==="number")if(A<=L)delete V.maximum;else delete V.exclusiveMaximum}if(typeof w==="number")V.multipleOf=w;break}case"boolean":{let V=U;V.type="boolean";break}case"bigint":{if(this.unrepresentable==="throw")throw Error("BigInt cannot be represented in JSON Schema");break}case"symbol":{if(this.unrepresentable==="throw")throw Error("Symbols cannot be represented in JSON Schema");break}case"null":{U.type="null";break}case"any":break;case"unknown":break;case"undefined":case"never":{U.not={};break}case"void":{if(this.unrepresentable==="throw")throw Error("Void cannot be represented in JSON Schema");break}case"date":{if(this.unrepresentable==="throw")throw Error("Date cannot be represented in JSON Schema");break}case"array":{let V=U,{minimum:F,maximum:L}=Q._zod.bag;if(typeof F==="number")V.minItems=F;if(typeof L==="number")V.maxItems=L;V.type="array",V.items=this.process($.element,{...K,path:[...K.path,"items"]});break}case"object":{let V=U;V.type="object",V.properties={};let F=$.shape;for(let w in F)V.properties[w]=this.process(F[w],{...K,path:[...K.path,"properties",w]});let L=new Set(Object.keys(F)),N=new Set([...L].filter((w)=>{let A=$.shape[w]._zod;if(this.io==="input")return A.optin===void 0;else return A.optout===void 0}));if(N.size>0)V.required=Array.from(N);if($.catchall?._zod.def.type==="never")V.additionalProperties=!1;else if(!$.catchall){if(this.io==="output")V.additionalProperties=!1}else if($.catchall)V.additionalProperties=this.process($.catchall,{...K,path:[...K.path,"additionalProperties"]});break}case"union":{let V=U;V.anyOf=$.options.map((F,L)=>this.process(F,{...K,path:[...K.path,"anyOf",L]}));break}case"intersection":{let V=U,F=this.process($.left,{...K,path:[...K.path,"allOf",0]}),L=this.process($.right,{...K,path:[...K.path,"allOf",1]}),N=(A)=>("allOf"in A)&&Object.keys(A).length===1,w=[...N(F)?F.allOf:[F],...N(L)?L.allOf:[L]];V.allOf=w;break}case"tuple":{let V=U;V.type="array";let F=$.items.map((w,A)=>this.process(w,{...K,path:[...K.path,"prefixItems",A]}));if(this.target==="draft-2020-12")V.prefixItems=F;else V.items=F;if($.rest){let w=this.process($.rest,{...K,path:[...K.path,"items"]});if(this.target==="draft-2020-12")V.items=w;else V.additionalItems=w}if($.rest)V.items=this.process($.rest,{...K,path:[...K.path,"items"]});let{minimum:L,maximum:N}=Q._zod.bag;if(typeof L==="number")V.minItems=L;if(typeof N==="number")V.maxItems=N;break}case"record":{let V=U;V.type="object",V.propertyNames=this.process($.keyType,{...K,path:[...K.path,"propertyNames"]}),V.additionalProperties=this.process($.valueType,{...K,path:[...K.path,"additionalProperties"]});break}case"map":{if(this.unrepresentable==="throw")throw Error("Map cannot be represented in JSON Schema");break}case"set":{if(this.unrepresentable==="throw")throw Error("Set cannot be represented in JSON Schema");break}case"enum":{let V=U,F=M4($.entries);if(F.every((L)=>typeof L==="number"))V.type="number";if(F.every((L)=>typeof L==="string"))V.type="string";V.enum=F;break}case"literal":{let V=U,F=[];for(let L of $.values)if(L===void 0){if(this.unrepresentable==="throw")throw Error("Literal `undefined` cannot be represented in JSON Schema")}else if(typeof L==="bigint")if(this.unrepresentable==="throw")throw Error("BigInt literals cannot be represented in JSON Schema");else F.push(Number(L));else F.push(L);if(F.length===0);else if(F.length===1){let L=F[0];V.type=L===null?"null":typeof L,V.const=L}else{if(F.every((L)=>typeof L==="number"))V.type="number";if(F.every((L)=>typeof L==="string"))V.type="string";if(F.every((L)=>typeof L==="boolean"))V.type="string";if(F.every((L)=>L===null))V.type="null";V.enum=F}break}case"file":{let V=U,F={type:"string",format:"binary",contentEncoding:"binary"},{minimum:L,maximum:N,mime:w}=Q._zod.bag;if(L!==void 0)F.minLength=L;if(N!==void 0)F.maxLength=N;if(w)if(w.length===1)F.contentMediaType=w[0],Object.assign(V,F);else V.anyOf=w.map((A)=>{return{...F,contentMediaType:A}});else Object.assign(V,F);break}case"transform":{if(this.unrepresentable==="throw")throw Error("Transforms cannot be represented in JSON Schema");break}case"nullable":{let V=this.process($.innerType,K);U.anyOf=[V,{type:"null"}];break}case"nonoptional":{this.process($.innerType,K),G.ref=$.innerType;break}case"success":{let V=U;V.type="boolean";break}case"default":{this.process($.innerType,K),G.ref=$.innerType,U.default=JSON.parse(JSON.stringify($.defaultValue));break}case"prefault":{if(this.process($.innerType,K),G.ref=$.innerType,this.io==="input")U._prefault=JSON.parse(JSON.stringify($.defaultValue));break}case"catch":{this.process($.innerType,K),G.ref=$.innerType;let V;try{V=$.catchValue(void 0)}catch{throw Error("Dynamic catch values are not supported in JSON Schema")}U.default=V;break}case"nan":{if(this.unrepresentable==="throw")throw Error("NaN cannot be represented in JSON Schema");break}case"template_literal":{let V=U,F=Q._zod.pattern;if(!F)throw Error("Pattern not found in template literal");V.type="string",V.pattern=F.source;break}case"pipe":{let V=this.io==="input"?$.in._zod.def.type==="transform"?$.out:$.in:$.out;this.process(V,K),G.ref=V;break}case"readonly":{this.process($.innerType,K),G.ref=$.innerType,U.readOnly=!0;break}case"promise":{this.process($.innerType,K),G.ref=$.innerType;break}case"optional":{this.process($.innerType,K),G.ref=$.innerType;break}case"lazy":{let V=Q._zod.innerType;this.process(V,K),G.ref=V;break}case"custom":{if(this.unrepresentable==="throw")throw Error("Custom types cannot be represented in JSON Schema");break}default:}}}let B=this.metadataRegistry.get(Q);if(B)Object.assign(G.schema,B);if(this.io==="input"&&A0(Q))delete G.schema.examples,delete G.schema.default;if(this.io==="input"&&G.schema._prefault)(Y=G.schema).default??(Y.default=G.schema._prefault);return delete G.schema._prefault,this.seen.get(Q).schema}emit(Q,X){let Y={cycles:X?.cycles??"ref",reused:X?.reused??"inline",external:X?.external??void 0},$=this.seen.get(Q);if(!$)throw Error("Unprocessed schema. This is a bug in Zod.");let W=(z)=>{let K=this.target==="draft-2020-12"?"$defs":"definitions";if(Y.external){let F=Y.external.registry.get(z[0])?.id;if(F)return{ref:Y.external.uri(F)};let L=z[1].defId??z[1].schema.id??`schema${this.counter++}`;return z[1].defId=L,{defId:L,ref:`${Y.external.uri("__shared")}#/${K}/${L}`}}if(z[1]===$)return{ref:"#"};let U=`${"#"}/${K}/`,V=z[1].schema.id??`__schema${this.counter++}`;return{defId:V,ref:U+V}},J=(z)=>{if(z[1].schema.$ref)return;let K=z[1],{ref:q,defId:U}=W(z);if(K.def={...K.schema},U)K.defId=U;let V=K.schema;for(let F in V)delete V[F];V.$ref=q};for(let z of this.seen.entries()){let K=z[1];if(Q===z[0]){J(z);continue}if(Y.external){let U=Y.external.registry.get(z[0])?.id;if(Q!==z[0]&&U){J(z);continue}}if(this.metadataRegistry.get(z[0])?.id){J(z);continue}if(K.cycle){if(Y.cycles==="throw")throw Error(`Cycle detected: #/${K.cycle?.join("/")}/<root>

Set the \`cycles\` parameter to \`"ref"\` to resolve cyclical schemas with defs.`);else if(Y.cycles==="ref")J(z);continue}if(K.count>1){if(Y.reused==="ref"){J(z);continue}}}let G=(z,K)=>{let q=this.seen.get(z),U=q.def??q.schema,V={...U};if(q.ref===null)return;let F=q.ref;if(q.ref=null,F){G(F,K);let L=this.seen.get(F).schema;if(L.$ref&&K.target==="draft-7")U.allOf=U.allOf??[],U.allOf.push(L);else Object.assign(U,L),Object.assign(U,V)}if(!q.isParent)this.override({zodSchema:z,jsonSchema:U,path:q.path??[]})};for(let z of[...this.seen.entries()].reverse())G(z[0],{target:this.target});let H={};if(this.target==="draft-2020-12")H.$schema="https://json-schema.org/draft/2020-12/schema";else if(this.target==="draft-7")H.$schema="http://json-schema.org/draft-07/schema#";else console.warn(`Invalid target: ${this.target}`);Object.assign(H,$.def);let B=Y.external?.defs??{};for(let z of this.seen.entries()){let K=z[1];if(K.def&&K.defId)B[K.defId]=K.def}if(!Y.external&&Object.keys(B).length>0)if(this.target==="draft-2020-12")H.$defs=B;else H.definitions=B;try{return JSON.parse(JSON.stringify(H))}catch(z){throw Error("Error converting schema to JSON.")}}}function DY(Q,X){if(Q instanceof h9){let $=new NY(X),W={};for(let H of Q._idmap.entries()){let[B,z]=H;$.process(z)}let J={},G={registry:Q,uri:X?.uri||((H)=>H),defs:W};for(let H of Q._idmap.entries()){let[B,z]=H;J[B]=$.emit(z,{...X,external:G})}if(Object.keys(W).length>0){let H=$.target==="draft-2020-12"?"$defs":"definitions";J.__shared={[H]:W}}return{schemas:J}}let Y=new NY(X);return Y.process(Q),Y.emit(Q,X)}function A0(Q,X){let Y=X??{seen:new Set};if(Y.seen.has(Q))return!1;Y.seen.add(Q);let W=Q._zod.def;switch(W.type){case"string":case"number":case"bigint":case"boolean":case"date":case"symbol":case"undefined":case"null":case"any":case"unknown":case"never":case"void":case"literal":case"enum":case"nan":case"file":case"template_literal":return!1;case"array":return A0(W.element,Y);case"object":{for(let J in W.shape)if(A0(W.shape[J],Y))return!0;return!1}case"union":{for(let J of W.options)if(A0(J,Y))return!0;return!1}case"intersection":return A0(W.left,Y)||A0(W.right,Y);case"tuple":{for(let J of W.items)if(A0(J,Y))return!0;if(W.rest&&A0(W.rest,Y))return!0;return!1}case"record":return A0(W.keyType,Y)||A0(W.valueType,Y);case"map":return A0(W.keyType,Y)||A0(W.valueType,Y);case"set":return A0(W.valueType,Y);case"promise":case"optional":case"nonoptional":case"nullable":case"readonly":return A0(W.innerType,Y);case"lazy":return A0(W.getter(),Y);case"default":return A0(W.innerType,Y);case"prefault":return A0(W.innerType,Y);case"custom":return!1;case"transform":return!0;case"pipe":return A0(W.in,Y)||A0(W.out,Y);case"success":return!1;case"catch":return!1;default:}throw Error(`Unknown schema type: ${W.type}`)}var fU=D("ZodMiniType",(Q,X)=>{if(!Q._zod)throw Error("Uninitialized schema in ZodMiniType.");Q0.init(Q,X),Q.def=X,Q.parse=(Y,$)=>vQ(Q,Y,$,{callee:Q.parse}),Q.safeParse=(Y,$)=>J6(Q,Y,$),Q.parseAsync=async(Y,$)=>TQ(Q,Y,$,{callee:Q.parseAsync}),Q.safeParseAsync=async(Y,$)=>G6(Q,Y,$),Q.check=(...Y)=>{return Q.clone({...X,checks:[...X.checks??[],...Y.map(($)=>typeof $==="function"?{_zod:{check:$,def:{check:"custom"},onattach:[]}}:$)]})},Q.clone=(Y,$)=>c0(Q,Y,$),Q.brand=()=>Q,Q.register=(Y,$)=>{return Y.add(Q,$),Q}});var uU=D("ZodMiniObject",(Q,X)=>{y9.init(Q,X),fU.init(Q,X),i.defineLazy(Q,"shape",()=>X.shape)});function OY(Q,X){let Y={type:"object",get shape(){return i.assignProp(this,"shape",{...Q}),this.shape},...i.normalizeParams(X)};return new uU(Y)}function p0(Q){return!!Q._zod}function y6(Q){let X=Object.values(Q);if(X.length===0)return OY({});let Y=X.every(p0),$=X.every((W)=>!p0(W));if(Y)return OY(Q);if($)return LW(Q);throw Error("Mixed Zod versions detected in object shape.")}function u1(Q,X){if(p0(Q))return J6(Q,X);return Q.safeParse(X)}async function d9(Q,X){if(p0(Q))return await G6(Q,X);return await Q.safeParseAsync(X)}function l1(Q){var X,Y;if(!Q)return;let $;if(p0(Q))$=(Y=(X=Q._zod)===null||X===void 0?void 0:X.def)===null||Y===void 0?void 0:Y.shape;else $=Q.shape;if(!$)return;if(typeof $==="function")try{return $()}catch(W){return}return $}function g6(Q){var X;if(!Q)return;if(typeof Q==="object"){let Y=Q,$=Q;if(!Y._def&&!$._zod){let W=Object.values(Q);if(W.length>0&&W.every((J)=>typeof J==="object"&&J!==null&&(J._def!==void 0||J._zod!==void 0||typeof J.parse==="function")))return y6(Q)}}if(p0(Q)){let $=(X=Q._zod)===null||X===void 0?void 0:X.def;if($&&($.type==="object"||$.shape!==void 0))return Q}else if(Q.shape!==void 0)return Q;return}function i9(Q){if(Q&&typeof Q==="object"){if("message"in Q&&typeof Q.message==="string")return Q.message;if("issues"in Q&&Array.isArray(Q.issues)&&Q.issues.length>0){let X=Q.issues[0];if(X&&typeof X==="object"&&"message"in X)return String(X.message)}try{return JSON.stringify(Q)}catch(X){return String(Q)}}return String(Q)}function kJ(Q){var X,Y,$,W;if(p0(Q))return(Y=(X=Q._zod)===null||X===void 0?void 0:X.def)===null||Y===void 0?void 0:Y.description;let J=Q;return($=Q.description)!==null&&$!==void 0?$:(W=J._def)===null||W===void 0?void 0:W.description}function vJ(Q){var X,Y,$;if(p0(Q))return((Y=(X=Q._zod)===null||X===void 0?void 0:X.def)===null||Y===void 0?void 0:Y.type)==="optional";let W=Q;if(typeof Q.isOptional==="function")return Q.isOptional();return(($=W._def)===null||$===void 0?void 0:$.typeName)==="ZodOptional"}function n9(Q){var X;if(p0(Q)){let G=(X=Q._zod)===null||X===void 0?void 0:X.def;if(G){if(G.value!==void 0)return G.value;if(Array.isArray(G.values)&&G.values.length>0)return G.values[0]}}let $=Q._def;if($){if($.value!==void 0)return $.value;if(Array.isArray($.values)&&$.values.length>0)return $.values[0]}let W=Q.value;if(W!==void 0)return W;return}var C4={};q7(C4,{time:()=>AY,duration:()=>jY,datetime:()=>wY,date:()=>MY,ZodISOTime:()=>xJ,ZodISODuration:()=>yJ,ZodISODateTime:()=>_J,ZodISODate:()=>TJ});var _J=D("ZodISODateTime",(Q,X)=>{wJ.init(Q,X),z0.init(Q,X)});function wY(Q){return EJ(_J,Q)}var TJ=D("ZodISODate",(Q,X)=>{MJ.init(Q,X),z0.init(Q,X)});function MY(Q){return bJ(TJ,Q)}var xJ=D("ZodISOTime",(Q,X)=>{AJ.init(Q,X),z0.init(Q,X)});function AY(Q){return PJ(xJ,Q)}var yJ=D("ZodISODuration",(Q,X)=>{jJ.init(Q,X),z0.init(Q,X)});function jY(Q){return SJ(yJ,Q)}var gJ=(Q,X)=>{v9.init(Q,X),Q.name="ZodError",Object.defineProperties(Q,{format:{value:(Y)=>CQ(Q,Y)},flatten:{value:(Y)=>ZQ(Q,Y)},addIssue:{value:(Y)=>Q.issues.push(Y)},addIssues:{value:(Y)=>Q.issues.push(...Y)},isEmpty:{get(){return Q.issues.length===0}}})},WZ=D("ZodError",gJ),k4=D("ZodError",gJ,{Parent:Error});var hJ=kQ(k4),fJ=_Q(k4),uJ=xQ(k4),lJ=yQ(k4);var q0=D("ZodType",(Q,X)=>{return Q0.init(Q,X),Q.def=X,Object.defineProperty(Q,"_def",{value:X}),Q.check=(...Y)=>{return Q.clone({...X,checks:[...X.checks??[],...Y.map(($)=>typeof $==="function"?{_zod:{check:$,def:{check:"custom"},onattach:[]}}:$)]})},Q.clone=(Y,$)=>c0(Q,Y,$),Q.brand=()=>Q,Q.register=(Y,$)=>{return Y.add(Q,$),Q},Q.parse=(Y,$)=>hJ(Q,Y,$,{callee:Q.parse}),Q.safeParse=(Y,$)=>uJ(Q,Y,$),Q.parseAsync=async(Y,$)=>fJ(Q,Y,$,{callee:Q.parseAsync}),Q.safeParseAsync=async(Y,$)=>lJ(Q,Y,$),Q.spa=Q.safeParseAsync,Q.refine=(Y,$)=>Q.check(gL(Y,$)),Q.superRefine=(Y)=>Q.check(hL(Y)),Q.overwrite=(Y)=>Q.check(H6(Y)),Q.optional=()=>v(Q),Q.nullable=()=>pJ(Q),Q.nullish=()=>v(pJ(Q)),Q.nonoptional=(Y)=>CL(Q,Y),Q.array=()=>r(Q),Q.or=(Y)=>H0([Q,Y]),Q.and=(Y)=>o9(Q,Y),Q.transform=(Y)=>IY(Q,oJ(Y)),Q.default=(Y)=>PL(Q,Y),Q.prefault=(Y)=>ZL(Q,Y),Q.catch=(Y)=>vL(Q,Y),Q.pipe=(Y)=>IY(Q,Y),Q.readonly=()=>xL(Q),Q.describe=(Y)=>{let $=Q.clone();return f1.add($,{description:Y}),$},Object.defineProperty(Q,"description",{get(){return f1.get(Q)?.description},configurable:!0}),Q.meta=(...Y)=>{if(Y.length===0)return f1.get(Q);let $=Q.clone();return f1.add($,Y[0]),$},Q.isOptional=()=>Q.safeParse(void 0).success,Q.isNullable=()=>Q.safeParse(null).success,Q}),dJ=D("_ZodString",(Q,X)=>{P4.init(Q,X),q0.init(Q,X);let Y=Q._zod.bag;Q.format=Y.format??null,Q.minLength=Y.minimum??null,Q.maxLength=Y.maximum??null,Q.regex=(...$)=>Q.check(WY(...$)),Q.includes=(...$)=>Q.check(HY(...$)),Q.startsWith=(...$)=>Q.check(BY(...$)),Q.endsWith=(...$)=>Q.check(zY(...$)),Q.min=(...$)=>Q.check(x6(...$)),Q.max=(...$)=>Q.check(c9(...$)),Q.length=(...$)=>Q.check(p9(...$)),Q.nonempty=(...$)=>Q.check(x6(1,...$)),Q.lowercase=($)=>Q.check(JY($)),Q.uppercase=($)=>Q.check(GY($)),Q.trim=()=>Q.check(VY()),Q.normalize=(...$)=>Q.check(KY(...$)),Q.toLowerCase=()=>Q.check(qY()),Q.toUpperCase=()=>Q.check(UY())}),oU=D("ZodString",(Q,X)=>{P4.init(Q,X),dJ.init(Q,X),Q.email=(Y)=>Q.check(kX(tU,Y)),Q.url=(Y)=>Q.check(yX(aU,Y)),Q.jwt=(Y)=>Q.check(aX(qL,Y)),Q.emoji=(Y)=>Q.check(gX(sU,Y)),Q.guid=(Y)=>Q.check(f9(mJ,Y)),Q.uuid=(Y)=>Q.check(vX(r9,Y)),Q.uuidv4=(Y)=>Q.check(_X(r9,Y)),Q.uuidv6=(Y)=>Q.check(TX(r9,Y)),Q.uuidv7=(Y)=>Q.check(xX(r9,Y)),Q.nanoid=(Y)=>Q.check(hX(eU,Y)),Q.guid=(Y)=>Q.check(f9(mJ,Y)),Q.cuid=(Y)=>Q.check(fX(QL,Y)),Q.cuid2=(Y)=>Q.check(uX(XL,Y)),Q.ulid=(Y)=>Q.check(lX(YL,Y)),Q.base64=(Y)=>Q.check(rX(zL,Y)),Q.base64url=(Y)=>Q.check(oX(KL,Y)),Q.xid=(Y)=>Q.check(mX($L,Y)),Q.ksuid=(Y)=>Q.check(cX(WL,Y)),Q.ipv4=(Y)=>Q.check(pX(JL,Y)),Q.ipv6=(Y)=>Q.check(dX(GL,Y)),Q.cidrv4=(Y)=>Q.check(iX(HL,Y)),Q.cidrv6=(Y)=>Q.check(nX(BL,Y)),Q.e164=(Y)=>Q.check(tX(VL,Y)),Q.datetime=(Y)=>Q.check(wY(Y)),Q.date=(Y)=>Q.check(MY(Y)),Q.time=(Y)=>Q.check(AY(Y)),Q.duration=(Y)=>Q.check(jY(Y))});function O(Q){return CX(oU,Q)}var z0=D("ZodStringFormat",(Q,X)=>{G0.init(Q,X),dJ.init(Q,X)}),tU=D("ZodEmail",(Q,X)=>{dQ.init(Q,X),z0.init(Q,X)});var mJ=D("ZodGUID",(Q,X)=>{cQ.init(Q,X),z0.init(Q,X)});var r9=D("ZodUUID",(Q,X)=>{pQ.init(Q,X),z0.init(Q,X)});var aU=D("ZodURL",(Q,X)=>{iQ.init(Q,X),z0.init(Q,X)});var sU=D("ZodEmoji",(Q,X)=>{nQ.init(Q,X),z0.init(Q,X)});var eU=D("ZodNanoID",(Q,X)=>{rQ.init(Q,X),z0.init(Q,X)});var QL=D("ZodCUID",(Q,X)=>{oQ.init(Q,X),z0.init(Q,X)});var XL=D("ZodCUID2",(Q,X)=>{tQ.init(Q,X),z0.init(Q,X)});var YL=D("ZodULID",(Q,X)=>{aQ.init(Q,X),z0.init(Q,X)});var $L=D("ZodXID",(Q,X)=>{sQ.init(Q,X),z0.init(Q,X)});var WL=D("ZodKSUID",(Q,X)=>{eQ.init(Q,X),z0.init(Q,X)});var JL=D("ZodIPv4",(Q,X)=>{QX.init(Q,X),z0.init(Q,X)});var GL=D("ZodIPv6",(Q,X)=>{XX.init(Q,X),z0.init(Q,X)});var HL=D("ZodCIDRv4",(Q,X)=>{YX.init(Q,X),z0.init(Q,X)});var BL=D("ZodCIDRv6",(Q,X)=>{$X.init(Q,X),z0.init(Q,X)});var zL=D("ZodBase64",(Q,X)=>{WX.init(Q,X),z0.init(Q,X)});var KL=D("ZodBase64URL",(Q,X)=>{JX.init(Q,X),z0.init(Q,X)});var VL=D("ZodE164",(Q,X)=>{GX.init(Q,X),z0.init(Q,X)});var qL=D("ZodJWT",(Q,X)=>{HX.init(Q,X),z0.init(Q,X)});var iJ=D("ZodNumber",(Q,X)=>{x9.init(Q,X),q0.init(Q,X),Q.gt=($,W)=>Q.check(l9($,W)),Q.gte=($,W)=>Q.check(Z4($,W)),Q.min=($,W)=>Q.check(Z4($,W)),Q.lt=($,W)=>Q.check(u9($,W)),Q.lte=($,W)=>Q.check(S4($,W)),Q.max=($,W)=>Q.check(S4($,W)),Q.int=($)=>Q.check(cJ($)),Q.safe=($)=>Q.check(cJ($)),Q.positive=($)=>Q.check(l9(0,$)),Q.nonnegative=($)=>Q.check(Z4(0,$)),Q.negative=($)=>Q.check(u9(0,$)),Q.nonpositive=($)=>Q.check(S4(0,$)),Q.multipleOf=($,W)=>Q.check(m9($,W)),Q.step=($,W)=>Q.check(m9($,W)),Q.finite=()=>Q;let Y=Q._zod.bag;Q.minValue=Math.max(Y.minimum??Number.NEGATIVE_INFINITY,Y.exclusiveMinimum??Number.NEGATIVE_INFINITY)??null,Q.maxValue=Math.min(Y.maximum??Number.POSITIVE_INFINITY,Y.exclusiveMaximum??Number.POSITIVE_INFINITY)??null,Q.isInt=(Y.format??"").includes("int")||Number.isSafeInteger(Y.multipleOf??0.5),Q.isFinite=!0,Q.format=Y.format??null});function X0(Q){return sX(iJ,Q)}var UL=D("ZodNumberFormat",(Q,X)=>{BX.init(Q,X),iJ.init(Q,X)});function cJ(Q){return eX(UL,Q)}var LL=D("ZodBoolean",(Q,X)=>{zX.init(Q,X),q0.init(Q,X)});function R0(Q){return QY(LL,Q)}var FL=D("ZodNull",(Q,X)=>{KX.init(Q,X),q0.init(Q,X)});function EY(Q){return XY(FL,Q)}var NL=D("ZodUnknown",(Q,X)=>{VX.init(Q,X),q0.init(Q,X)});function O0(){return YY(NL)}var DL=D("ZodNever",(Q,X)=>{qX.init(Q,X),q0.init(Q,X)});function OL(Q){return $Y(DL,Q)}var wL=D("ZodArray",(Q,X)=>{UX.init(Q,X),q0.init(Q,X),Q.element=X.element,Q.min=(Y,$)=>Q.check(x6(Y,$)),Q.nonempty=(Y)=>Q.check(x6(1,Y)),Q.max=(Y,$)=>Q.check(c9(Y,$)),Q.length=(Y,$)=>Q.check(p9(Y,$)),Q.unwrap=()=>Q.element});function r(Q,X){return ZJ(wL,Q,X)}var nJ=D("ZodObject",(Q,X)=>{y9.init(Q,X),q0.init(Q,X),i.defineLazy(Q,"shape",()=>X.shape),Q.keyof=()=>I0(Object.keys(Q._zod.def.shape)),Q.catchall=(Y)=>Q.clone({...Q._zod.def,catchall:Y}),Q.passthrough=()=>Q.clone({...Q._zod.def,catchall:O0()}),Q.loose=()=>Q.clone({...Q._zod.def,catchall:O0()}),Q.strict=()=>Q.clone({...Q._zod.def,catchall:OL()}),Q.strip=()=>Q.clone({...Q._zod.def,catchall:void 0}),Q.extend=(Y)=>{return i.extend(Q,Y)},Q.merge=(Y)=>i.merge(Q,Y),Q.pick=(Y)=>i.pick(Q,Y),Q.omit=(Y)=>i.omit(Q,Y),Q.partial=(...Y)=>i.partial(tJ,Q,Y[0]),Q.required=(...Y)=>i.required(aJ,Q,Y[0])});function E(Q,X){let Y={type:"object",get shape(){return i.assignProp(this,"shape",{...Q}),this.shape},...i.normalizeParams(X)};return new nJ(Y)}function d0(Q,X){return new nJ({type:"object",get shape(){return i.assignProp(this,"shape",{...Q}),this.shape},catchall:O0(),...i.normalizeParams(X)})}var rJ=D("ZodUnion",(Q,X)=>{g9.init(Q,X),q0.init(Q,X),Q.options=X.options});function H0(Q,X){return new rJ({type:"union",options:Q,...i.normalizeParams(X)})}var ML=D("ZodDiscriminatedUnion",(Q,X)=>{rJ.init(Q,X),LX.init(Q,X)});function bY(Q,X,Y){return new ML({type:"union",options:X,discriminator:Q,...i.normalizeParams(Y)})}var AL=D("ZodIntersection",(Q,X)=>{FX.init(Q,X),q0.init(Q,X)});function o9(Q,X){return new AL({type:"intersection",left:Q,right:X})}var jL=D("ZodRecord",(Q,X)=>{NX.init(Q,X),q0.init(Q,X),Q.keyType=X.keyType,Q.valueType=X.valueType});function w0(Q,X,Y){return new jL({type:"record",keyType:Q,valueType:X,...i.normalizeParams(Y)})}var RY=D("ZodEnum",(Q,X)=>{DX.init(Q,X),q0.init(Q,X),Q.enum=X.entries,Q.options=Object.values(X.entries);let Y=new Set(Object.keys(X.entries));Q.extract=($,W)=>{let J={};for(let G of $)if(Y.has(G))J[G]=X.entries[G];else throw Error(`Key ${G} not found in enum`);return new RY({...X,checks:[],...i.normalizeParams(W),entries:J})},Q.exclude=($,W)=>{let J={...X.entries};for(let G of $)if(Y.has(G))delete J[G];else throw Error(`Key ${G} not found in enum`);return new RY({...X,checks:[],...i.normalizeParams(W),entries:J})}});function I0(Q,X){let Y=Array.isArray(Q)?Object.fromEntries(Q.map(($)=>[$,$])):Q;return new RY({type:"enum",entries:Y,...i.normalizeParams(X)})}var RL=D("ZodLiteral",(Q,X)=>{OX.init(Q,X),q0.init(Q,X),Q.values=new Set(X.values),Object.defineProperty(Q,"value",{get(){if(X.values.length>1)throw Error("This schema contains multiple valid literal values. Use `.values` instead.");return X.values[0]}})});function _(Q,X){return new RL({type:"literal",values:Array.isArray(Q)?Q:[Q],...i.normalizeParams(X)})}var IL=D("ZodTransform",(Q,X)=>{wX.init(Q,X),q0.init(Q,X),Q._zod.parse=(Y,$)=>{Y.addIssue=(J)=>{if(typeof J==="string")Y.issues.push(i.issue(J,Y.value,X));else{let G=J;if(G.fatal)G.continue=!1;G.code??(G.code="custom"),G.input??(G.input=Y.value),G.inst??(G.inst=Q),G.continue??(G.continue=!0),Y.issues.push(i.issue(G))}};let W=X.transform(Y.value,Y);if(W instanceof Promise)return W.then((J)=>{return Y.value=J,Y});return Y.value=W,Y}});function oJ(Q){return new IL({type:"transform",transform:Q})}var tJ=D("ZodOptional",(Q,X)=>{MX.init(Q,X),q0.init(Q,X),Q.unwrap=()=>Q._zod.def.innerType});function v(Q){return new tJ({type:"optional",innerType:Q})}var EL=D("ZodNullable",(Q,X)=>{AX.init(Q,X),q0.init(Q,X),Q.unwrap=()=>Q._zod.def.innerType});function pJ(Q){return new EL({type:"nullable",innerType:Q})}var bL=D("ZodDefault",(Q,X)=>{jX.init(Q,X),q0.init(Q,X),Q.unwrap=()=>Q._zod.def.innerType,Q.removeDefault=Q.unwrap});function PL(Q,X){return new bL({type:"default",innerType:Q,get defaultValue(){return typeof X==="function"?X():X}})}var SL=D("ZodPrefault",(Q,X)=>{RX.init(Q,X),q0.init(Q,X),Q.unwrap=()=>Q._zod.def.innerType});function ZL(Q,X){return new SL({type:"prefault",innerType:Q,get defaultValue(){return typeof X==="function"?X():X}})}var aJ=D("ZodNonOptional",(Q,X)=>{IX.init(Q,X),q0.init(Q,X),Q.unwrap=()=>Q._zod.def.innerType});function CL(Q,X){return new aJ({type:"nonoptional",innerType:Q,...i.normalizeParams(X)})}var kL=D("ZodCatch",(Q,X)=>{EX.init(Q,X),q0.init(Q,X),Q.unwrap=()=>Q._zod.def.innerType,Q.removeCatch=Q.unwrap});function vL(Q,X){return new kL({type:"catch",innerType:Q,catchValue:typeof X==="function"?X:()=>X})}var _L=D("ZodPipe",(Q,X)=>{bX.init(Q,X),q0.init(Q,X),Q.in=X.in,Q.out=X.out});function IY(Q,X){return new _L({type:"pipe",in:Q,out:X})}var TL=D("ZodReadonly",(Q,X)=>{PX.init(Q,X),q0.init(Q,X)});function xL(Q){return new TL({type:"readonly",innerType:Q})}var sJ=D("ZodCustom",(Q,X)=>{SX.init(Q,X),q0.init(Q,X)});function yL(Q,X){let Y=new j0({check:"custom",...i.normalizeParams(X)});return Y._zod.check=Q,Y}function eJ(Q,X){return LY(sJ,Q??(()=>!0),X)}function gL(Q,X={}){return FY(sJ,Q,X)}function hL(Q,X){let Y=yL(($)=>{return $.addIssue=(W)=>{if(typeof W==="string")$.issues.push(i.issue(W,$.value,Y._zod.def));else{let J=W;if(J.fatal)J.continue=!1;J.code??(J.code="custom"),J.input??(J.input=$.value),J.inst??(J.inst=Y),J.continue??(J.continue=!Y._zod.def.abort),$.issues.push(i.issue(J))}},Q($.value,$)},X);return Y}function PY(Q,X){return IY(oJ(Q),X)}m0(ZX());var SY="2025-11-25";var Q5=[SY,"2025-06-18","2025-03-26","2024-11-05","2024-10-07"],V1="io.modelcontextprotocol/related-task",a9="2.0",K1=eJ((Q)=>Q!==null&&(typeof Q==="object"||typeof Q==="function")),X5=H0([O(),X0().int()]),Y5=O(),fL=d0({ttl:H0([X0(),EY()]).optional(),pollInterval:X0().optional()}),ZY=d0({taskId:O()}),uL=d0({progressToken:X5.optional(),[V1]:ZY.optional()}),y0=d0({task:fL.optional(),_meta:uL.optional()}),E0=E({method:O(),params:y0.optional()}),z6=d0({_meta:E({[V1]:v(ZY)}).passthrough().optional()}),i0=E({method:O(),params:z6.optional()}),Z0=d0({_meta:d0({[V1]:ZY.optional()}).optional()}),s9=H0([O(),X0().int()]),$5=E({jsonrpc:_(a9),id:s9,...E0.shape}).strict(),CY=(Q)=>$5.safeParse(Q).success,W5=E({jsonrpc:_(a9),...i0.shape}).strict(),J5=(Q)=>W5.safeParse(Q).success,G5=E({jsonrpc:_(a9),id:s9,result:Z0}).strict(),v4=(Q)=>G5.safeParse(Q).success,x;(function(Q){Q[Q.ConnectionClosed=-32000]="ConnectionClosed",Q[Q.RequestTimeout=-32001]="RequestTimeout",Q[Q.ParseError=-32700]="ParseError",Q[Q.InvalidRequest=-32600]="InvalidRequest",Q[Q.MethodNotFound=-32601]="MethodNotFound",Q[Q.InvalidParams=-32602]="InvalidParams",Q[Q.InternalError=-32603]="InternalError",Q[Q.UrlElicitationRequired=-32042]="UrlElicitationRequired"})(x||(x={}));var H5=E({jsonrpc:_(a9),id:s9,error:E({code:X0().int(),message:O(),data:v(O0())})}).strict(),B5=(Q)=>H5.safeParse(Q).success,OZ=H0([$5,W5,G5,H5]),e9=Z0.strict(),lL=z6.extend({requestId:s9,reason:O().optional()}),Q8=i0.extend({method:_("notifications/cancelled"),params:lL}),mL=E({src:O(),mimeType:O().optional(),sizes:r(O()).optional()}),_4=E({icons:r(mL).optional()}),h6=E({name:O(),title:O().optional()}),z5=h6.extend({...h6.shape,..._4.shape,version:O(),websiteUrl:O().optional()}),cL=o9(E({applyDefaults:R0().optional()}),w0(O(),O0())),pL=PY((Q)=>{if(Q&&typeof Q==="object"&&!Array.isArray(Q)){if(Object.keys(Q).length===0)return{form:{}}}return Q},o9(E({form:cL.optional(),url:K1.optional()}),w0(O(),O0()).optional())),dL=E({list:v(E({}).passthrough()),cancel:v(E({}).passthrough()),requests:v(E({sampling:v(E({createMessage:v(E({}).passthrough())}).passthrough()),elicitation:v(E({create:v(E({}).passthrough())}).passthrough())}).passthrough())}).passthrough(),iL=E({list:v(E({}).passthrough()),cancel:v(E({}).passthrough()),requests:v(E({tools:v(E({call:v(E({}).passthrough())}).passthrough())}).passthrough())}).passthrough(),nL=E({experimental:w0(O(),K1).optional(),sampling:E({context:K1.optional(),tools:K1.optional()}).optional(),elicitation:pL.optional(),roots:E({listChanged:R0().optional()}).optional(),tasks:v(dL)}),rL=y0.extend({protocolVersion:O(),capabilities:nL,clientInfo:z5}),kY=E0.extend({method:_("initialize"),params:rL});var oL=E({experimental:w0(O(),K1).optional(),logging:K1.optional(),completions:K1.optional(),prompts:v(E({listChanged:v(R0())})),resources:E({subscribe:R0().optional(),listChanged:R0().optional()}).optional(),tools:E({listChanged:R0().optional()}).optional(),tasks:v(iL)}).passthrough(),tL=Z0.extend({protocolVersion:O(),capabilities:oL,serverInfo:z5,instructions:O().optional()}),vY=i0.extend({method:_("notifications/initialized")});var X8=E0.extend({method:_("ping")}),aL=E({progress:X0(),total:v(X0()),message:v(O())}),sL=E({...z6.shape,...aL.shape,progressToken:X5}),Y8=i0.extend({method:_("notifications/progress"),params:sL}),eL=y0.extend({cursor:Y5.optional()}),T4=E0.extend({params:eL.optional()}),x4=Z0.extend({nextCursor:v(Y5)}),y4=E({taskId:O(),status:I0(["working","input_required","completed","failed","cancelled"]),ttl:H0([X0(),EY()]),createdAt:O(),lastUpdatedAt:O(),pollInterval:v(X0()),statusMessage:v(O())}),f6=Z0.extend({task:y4}),QF=z6.merge(y4),g4=i0.extend({method:_("notifications/tasks/status"),params:QF}),$8=E0.extend({method:_("tasks/get"),params:y0.extend({taskId:O()})}),W8=Z0.merge(y4),J8=E0.extend({method:_("tasks/result"),params:y0.extend({taskId:O()})}),G8=T4.extend({method:_("tasks/list")}),H8=x4.extend({tasks:r(y4)}),K5=E0.extend({method:_("tasks/cancel"),params:y0.extend({taskId:O()})}),V5=Z0.merge(y4),q5=E({uri:O(),mimeType:v(O()),_meta:w0(O(),O0()).optional()}),U5=q5.extend({text:O()}),_Y=O().refine((Q)=>{try{return atob(Q),!0}catch(X){return!1}},{message:"Invalid Base64 string"}),L5=q5.extend({blob:_Y}),u6=E({audience:r(I0(["user","assistant"])).optional(),priority:X0().min(0).max(1).optional(),lastModified:C4.datetime({offset:!0}).optional()}),F5=E({...h6.shape,..._4.shape,uri:O(),description:v(O()),mimeType:v(O()),annotations:u6.optional(),_meta:v(d0({}))}),XF=E({...h6.shape,..._4.shape,uriTemplate:O(),description:v(O()),mimeType:v(O()),annotations:u6.optional(),_meta:v(d0({}))}),B8=T4.extend({method:_("resources/list")}),YF=x4.extend({resources:r(F5)}),z8=T4.extend({method:_("resources/templates/list")}),$F=x4.extend({resourceTemplates:r(XF)}),TY=y0.extend({uri:O()}),WF=TY,K8=E0.extend({method:_("resources/read"),params:WF}),JF=Z0.extend({contents:r(H0([U5,L5]))}),GF=i0.extend({method:_("notifications/resources/list_changed")}),HF=TY,BF=E0.extend({method:_("resources/subscribe"),params:HF}),zF=TY,KF=E0.extend({method:_("resources/unsubscribe"),params:zF}),VF=z6.extend({uri:O()}),qF=i0.extend({method:_("notifications/resources/updated"),params:VF}),UF=E({name:O(),description:v(O()),required:v(R0())}),LF=E({...h6.shape,..._4.shape,description:v(O()),arguments:v(r(UF)),_meta:v(d0({}))}),V8=T4.extend({method:_("prompts/list")}),FF=x4.extend({prompts:r(LF)}),NF=y0.extend({name:O(),arguments:w0(O(),O()).optional()}),q8=E0.extend({method:_("prompts/get"),params:NF}),xY=E({type:_("text"),text:O(),annotations:u6.optional(),_meta:w0(O(),O0()).optional()}),yY=E({type:_("image"),data:_Y,mimeType:O(),annotations:u6.optional(),_meta:w0(O(),O0()).optional()}),gY=E({type:_("audio"),data:_Y,mimeType:O(),annotations:u6.optional(),_meta:w0(O(),O0()).optional()}),DF=E({type:_("tool_use"),name:O(),id:O(),input:E({}).passthrough(),_meta:v(E({}).passthrough())}).passthrough(),OF=E({type:_("resource"),resource:H0([U5,L5]),annotations:u6.optional(),_meta:w0(O(),O0()).optional()}),wF=F5.extend({type:_("resource_link")}),hY=H0([xY,yY,gY,wF,OF]),MF=E({role:I0(["user","assistant"]),content:hY}),AF=Z0.extend({description:v(O()),messages:r(MF)}),jF=i0.extend({method:_("notifications/prompts/list_changed")}),RF=E({title:O().optional(),readOnlyHint:R0().optional(),destructiveHint:R0().optional(),idempotentHint:R0().optional(),openWorldHint:R0().optional()}),IF=E({taskSupport:I0(["required","optional","forbidden"]).optional()}),N5=E({...h6.shape,..._4.shape,description:O().optional(),inputSchema:E({type:_("object"),properties:w0(O(),K1).optional(),required:r(O()).optional()}).catchall(O0()),outputSchema:E({type:_("object"),properties:w0(O(),K1).optional(),required:r(O()).optional()}).catchall(O0()).optional(),annotations:v(RF),execution:v(IF),_meta:w0(O(),O0()).optional()}),U8=T4.extend({method:_("tools/list")}),EF=x4.extend({tools:r(N5)}),L8=Z0.extend({content:r(hY).default([]),structuredContent:w0(O(),O0()).optional(),isError:v(R0())}),wZ=L8.or(Z0.extend({toolResult:O0()})),bF=y0.extend({name:O(),arguments:v(w0(O(),O0()))}),l6=E0.extend({method:_("tools/call"),params:bF}),PF=i0.extend({method:_("notifications/tools/list_changed")}),h4=I0(["debug","info","notice","warning","error","critical","alert","emergency"]),SF=y0.extend({level:h4}),fY=E0.extend({method:_("logging/setLevel"),params:SF}),ZF=z6.extend({level:h4,logger:O().optional(),data:O0()}),CF=i0.extend({method:_("notifications/message"),params:ZF}),kF=E({name:O().optional()}),vF=E({hints:v(r(kF)),costPriority:v(X0().min(0).max(1)),speedPriority:v(X0().min(0).max(1)),intelligencePriority:v(X0().min(0).max(1))}),_F=E({mode:v(I0(["auto","required","none"]))}),TF=E({type:_("tool_result"),toolUseId:O().describe("The unique identifier for the corresponding tool call."),content:r(hY).default([]),structuredContent:E({}).passthrough().optional(),isError:v(R0()),_meta:v(E({}).passthrough())}).passthrough(),xF=bY("type",[xY,yY,gY]),t9=bY("type",[xY,yY,gY,DF,TF]),yF=E({role:I0(["user","assistant"]),content:H0([t9,r(t9)]),_meta:v(E({}).passthrough())}).passthrough(),gF=y0.extend({messages:r(yF),modelPreferences:vF.optional(),systemPrompt:O().optional(),includeContext:I0(["none","thisServer","allServers"]).optional(),temperature:X0().optional(),maxTokens:X0().int(),stopSequences:r(O()).optional(),metadata:K1.optional(),tools:v(r(N5)),toolChoice:v(_F)}),hF=E0.extend({method:_("sampling/createMessage"),params:gF}),uY=Z0.extend({model:O(),stopReason:v(I0(["endTurn","stopSequence","maxTokens"]).or(O())),role:I0(["user","assistant"]),content:xF}),lY=Z0.extend({model:O(),stopReason:v(I0(["endTurn","stopSequence","maxTokens","toolUse"]).or(O())),role:I0(["user","assistant"]),content:H0([t9,r(t9)])}),fF=E({type:_("boolean"),title:O().optional(),description:O().optional(),default:R0().optional()}),uF=E({type:_("string"),title:O().optional(),description:O().optional(),minLength:X0().optional(),maxLength:X0().optional(),format:I0(["email","uri","date","date-time"]).optional(),default:O().optional()}),lF=E({type:I0(["number","integer"]),title:O().optional(),description:O().optional(),minimum:X0().optional(),maximum:X0().optional(),default:X0().optional()}),mF=E({type:_("string"),title:O().optional(),description:O().optional(),enum:r(O()),default:O().optional()}),cF=E({type:_("string"),title:O().optional(),description:O().optional(),oneOf:r(E({const:O(),title:O()})),default:O().optional()}),pF=E({type:_("string"),title:O().optional(),description:O().optional(),enum:r(O()),enumNames:r(O()).optional(),default:O().optional()}),dF=H0([mF,cF]),iF=E({type:_("array"),title:O().optional(),description:O().optional(),minItems:X0().optional(),maxItems:X0().optional(),items:E({type:_("string"),enum:r(O())}),default:r(O()).optional()}),nF=E({type:_("array"),title:O().optional(),description:O().optional(),minItems:X0().optional(),maxItems:X0().optional(),items:E({anyOf:r(E({const:O(),title:O()}))}),default:r(O()).optional()}),rF=H0([iF,nF]),oF=H0([pF,dF,rF]),tF=H0([oF,fF,uF,lF]),aF=y0.extend({mode:_("form").optional(),message:O(),requestedSchema:E({type:_("object"),properties:w0(O(),tF),required:r(O()).optional()})}),sF=y0.extend({mode:_("url"),message:O(),elicitationId:O(),url:O().url()}),eF=H0([aF,sF]),QN=E0.extend({method:_("elicitation/create"),params:eF}),XN=z6.extend({elicitationId:O()}),YN=i0.extend({method:_("notifications/elicitation/complete"),params:XN}),F8=Z0.extend({action:I0(["accept","decline","cancel"]),content:PY((Q)=>Q===null?void 0:Q,w0(O(),H0([O(),X0(),R0(),r(O())])).optional())}),$N=E({type:_("ref/resource"),uri:O()});var WN=E({type:_("ref/prompt"),name:O()}),JN=y0.extend({ref:H0([WN,$N]),argument:E({name:O(),value:O()}),context:E({arguments:w0(O(),O()).optional()}).optional()}),N8=E0.extend({method:_("completion/complete"),params:JN});function D5(Q){if(Q.params.ref.type!=="ref/prompt")throw TypeError(`Expected CompleteRequestPrompt, but got ${Q.params.ref.type}`)}function O5(Q){if(Q.params.ref.type!=="ref/resource")throw TypeError(`Expected CompleteRequestResourceTemplate, but got ${Q.params.ref.type}`)}var GN=Z0.extend({completion:d0({values:r(O()).max(100),total:v(X0().int()),hasMore:v(R0())})}),HN=E({uri:O().startsWith("file://"),name:O().optional(),_meta:w0(O(),O0()).optional()}),BN=E0.extend({method:_("roots/list")}),mY=Z0.extend({roots:r(HN)}),zN=i0.extend({method:_("notifications/roots/list_changed")}),MZ=H0([X8,kY,N8,fY,q8,V8,B8,z8,K8,BF,KF,l6,U8,$8,J8,G8]),AZ=H0([Q8,Y8,vY,zN,g4]),jZ=H0([e9,uY,lY,F8,mY,W8,H8,f6]),RZ=H0([X8,hF,QN,BN,$8,J8,G8]),IZ=H0([Q8,Y8,CF,qF,GF,PF,jF,g4,YN]),EZ=H0([e9,tL,GN,AF,FF,YF,$F,JF,L8,EF,W8,H8,f6]);class k extends Error{constructor(Q,X,Y){super(`MCP error ${Q}: ${X}`);this.code=Q,this.data=Y,this.name="McpError"}static fromError(Q,X,Y){if(Q===x.UrlElicitationRequired&&Y){let $=Y;if($.elicitations)return new w5($.elicitations,X)}return new k(Q,X,Y)}}class w5 extends k{constructor(Q,X=`URL elicitation${Q.length>1?"s":""} required`){super(x.UrlElicitationRequired,X,{elicitations:Q})}get elicitations(){var Q,X;return(X=(Q=this.data)===null||Q===void 0?void 0:Q.elicitations)!==null&&X!==void 0?X:[]}}function m1(Q){return Q==="completed"||Q==="failed"||Q==="cancelled"}var A5=Symbol("Let zodToJsonSchema decide on which parser to use");var M5={name:void 0,$refStrategy:"root",basePath:["#"],effectStrategy:"input",pipeStrategy:"all",dateStrategy:"format:date-time",mapStrategy:"entries",removeAdditionalStrategy:"passthrough",allowedAdditionalProperties:!0,rejectedAdditionalProperties:!1,definitionPath:"definitions",target:"jsonSchema7",strictUnions:!1,definitions:{},errorMessages:!1,markdownDescription:!1,patternStrategy:"escape",applyRegexFlags:!1,emailStrategy:"format:email",base64Strategy:"contentEncoding:base64",nameStrategy:"ref",openAiAnyTypeName:"OpenAiAnyType"},j5=(Q)=>typeof Q==="string"?{...M5,name:Q}:{...M5,...Q};var R5=(Q)=>{let X=j5(Q),Y=X.name!==void 0?[...X.basePath,X.definitionPath,X.name]:X.basePath;return{...X,flags:{hasReferencedOpenAiAnyType:!1},currentPath:Y,propertyPath:void 0,seen:new Map(Object.entries(X.definitions).map(([$,W])=>[W._def,{def:W._def,path:[...X.basePath,X.definitionPath,$],jsonSchema:void 0}]))}};function cY(Q,X,Y,$){if(!$?.errorMessages)return;if(Y)Q.errorMessage={...Q.errorMessage,[X]:Y}}function o(Q,X,Y,$,W){Q[X]=Y,cY(Q,X,$,W)}var D8=(Q,X)=>{let Y=0;for(;Y<Q.length&&Y<X.length;Y++)if(Q[Y]!==X[Y])break;return[(Q.length-Y).toString(),...X.slice(Y)].join("/")};function K0(Q){if(Q.target!=="openAi")return{};let X=[...Q.basePath,Q.definitionPath,Q.openAiAnyTypeName];return Q.flags.hasReferencedOpenAiAnyType=!0,{$ref:Q.$refStrategy==="relative"?D8(X,Q.currentPath):X.join("/")}}function I5(Q,X){let Y={type:"array"};if(Q.type?._def&&Q.type?._def?.typeName!==j.ZodAny)Y.items=h(Q.type._def,{...X,currentPath:[...X.currentPath,"items"]});if(Q.minLength)o(Y,"minItems",Q.minLength.value,Q.minLength.message,X);if(Q.maxLength)o(Y,"maxItems",Q.maxLength.value,Q.maxLength.message,X);if(Q.exactLength)o(Y,"minItems",Q.exactLength.value,Q.exactLength.message,X),o(Y,"maxItems",Q.exactLength.value,Q.exactLength.message,X);return Y}function E5(Q,X){let Y={type:"integer",format:"int64"};if(!Q.checks)return Y;for(let $ of Q.checks)switch($.kind){case"min":if(X.target==="jsonSchema7")if($.inclusive)o(Y,"minimum",$.value,$.message,X);else o(Y,"exclusiveMinimum",$.value,$.message,X);else{if(!$.inclusive)Y.exclusiveMinimum=!0;o(Y,"minimum",$.value,$.message,X)}break;case"max":if(X.target==="jsonSchema7")if($.inclusive)o(Y,"maximum",$.value,$.message,X);else o(Y,"exclusiveMaximum",$.value,$.message,X);else{if(!$.inclusive)Y.exclusiveMaximum=!0;o(Y,"maximum",$.value,$.message,X)}break;case"multipleOf":o(Y,"multipleOf",$.value,$.message,X);break}return Y}function b5(){return{type:"boolean"}}function O8(Q,X){return h(Q.type._def,X)}var P5=(Q,X)=>{return h(Q.innerType._def,X)};function pY(Q,X,Y){let $=Y??X.dateStrategy;if(Array.isArray($))return{anyOf:$.map((W,J)=>pY(Q,X,W))};switch($){case"string":case"format:date-time":return{type:"string",format:"date-time"};case"format:date":return{type:"string",format:"date"};case"integer":return KN(Q,X)}}var KN=(Q,X)=>{let Y={type:"integer",format:"unix-time"};if(X.target==="openApi3")return Y;for(let $ of Q.checks)switch($.kind){case"min":o(Y,"minimum",$.value,$.message,X);break;case"max":o(Y,"maximum",$.value,$.message,X);break}return Y};function S5(Q,X){return{...h(Q.innerType._def,X),default:Q.defaultValue()}}function Z5(Q,X){return X.effectStrategy==="input"?h(Q.schema._def,X):K0(X)}function C5(Q){return{type:"string",enum:Array.from(Q.values)}}var VN=(Q)=>{if("type"in Q&&Q.type==="string")return!1;return"allOf"in Q};function k5(Q,X){let Y=[h(Q.left._def,{...X,currentPath:[...X.currentPath,"allOf","0"]}),h(Q.right._def,{...X,currentPath:[...X.currentPath,"allOf","1"]})].filter((J)=>!!J),$=X.target==="jsonSchema2019-09"?{unevaluatedProperties:!1}:void 0,W=[];return Y.forEach((J)=>{if(VN(J)){if(W.push(...J.allOf),J.unevaluatedProperties===void 0)$=void 0}else{let G=J;if("additionalProperties"in J&&J.additionalProperties===!1){let{additionalProperties:H,...B}=J;G=B}else $=void 0;W.push(G)}}),W.length?{allOf:W,...$}:void 0}function v5(Q,X){let Y=typeof Q.value;if(Y!=="bigint"&&Y!=="number"&&Y!=="boolean"&&Y!=="string")return{type:Array.isArray(Q.value)?"array":"object"};if(X.target==="openApi3")return{type:Y==="bigint"?"integer":Y,enum:[Q.value]};return{type:Y==="bigint"?"integer":Y,const:Q.value}}var dY=void 0,a0={cuid:/^[cC][^\s-]{8,}$/,cuid2:/^[0-9a-z]+$/,ulid:/^[0-9A-HJKMNP-TV-Z]{26}$/,email:/^(?!\.)(?!.*\.\.)([a-zA-Z0-9_'+\-\.]*)[a-zA-Z0-9_+-]@([a-zA-Z0-9][a-zA-Z0-9\-]*\.)+[a-zA-Z]{2,}$/,emoji:()=>{if(dY===void 0)dY=RegExp("^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$","u");return dY},uuid:/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/,ipv4:/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,ipv4Cidr:/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,ipv6:/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,ipv6Cidr:/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,base64:/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,base64url:/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,nanoid:/^[a-zA-Z0-9_-]{21}$/,jwt:/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/};function w8(Q,X){let Y={type:"string"};if(Q.checks)for(let $ of Q.checks)switch($.kind){case"min":o(Y,"minLength",typeof Y.minLength==="number"?Math.max(Y.minLength,$.value):$.value,$.message,X);break;case"max":o(Y,"maxLength",typeof Y.maxLength==="number"?Math.min(Y.maxLength,$.value):$.value,$.message,X);break;case"email":switch(X.emailStrategy){case"format:email":s0(Y,"email",$.message,X);break;case"format:idn-email":s0(Y,"idn-email",$.message,X);break;case"pattern:zod":_0(Y,a0.email,$.message,X);break}break;case"url":s0(Y,"uri",$.message,X);break;case"uuid":s0(Y,"uuid",$.message,X);break;case"regex":_0(Y,$.regex,$.message,X);break;case"cuid":_0(Y,a0.cuid,$.message,X);break;case"cuid2":_0(Y,a0.cuid2,$.message,X);break;case"startsWith":_0(Y,RegExp(`^${iY($.value,X)}`),$.message,X);break;case"endsWith":_0(Y,RegExp(`${iY($.value,X)}$`),$.message,X);break;case"datetime":s0(Y,"date-time",$.message,X);break;case"date":s0(Y,"date",$.message,X);break;case"time":s0(Y,"time",$.message,X);break;case"duration":s0(Y,"duration",$.message,X);break;case"length":o(Y,"minLength",typeof Y.minLength==="number"?Math.max(Y.minLength,$.value):$.value,$.message,X),o(Y,"maxLength",typeof Y.maxLength==="number"?Math.min(Y.maxLength,$.value):$.value,$.message,X);break;case"includes":{_0(Y,RegExp(iY($.value,X)),$.message,X);break}case"ip":{if($.version!=="v6")s0(Y,"ipv4",$.message,X);if($.version!=="v4")s0(Y,"ipv6",$.message,X);break}case"base64url":_0(Y,a0.base64url,$.message,X);break;case"jwt":_0(Y,a0.jwt,$.message,X);break;case"cidr":{if($.version!=="v6")_0(Y,a0.ipv4Cidr,$.message,X);if($.version!=="v4")_0(Y,a0.ipv6Cidr,$.message,X);break}case"emoji":_0(Y,a0.emoji(),$.message,X);break;case"ulid":{_0(Y,a0.ulid,$.message,X);break}case"base64":{switch(X.base64Strategy){case"format:binary":{s0(Y,"binary",$.message,X);break}case"contentEncoding:base64":{o(Y,"contentEncoding","base64",$.message,X);break}case"pattern:zod":{_0(Y,a0.base64,$.message,X);break}}break}case"nanoid":_0(Y,a0.nanoid,$.message,X);case"toLowerCase":case"toUpperCase":case"trim":break;default:((W)=>{})($)}return Y}function iY(Q,X){return X.patternStrategy==="escape"?UN(Q):Q}var qN=new Set("ABCDEFGHIJKLMNOPQRSTUVXYZabcdefghijklmnopqrstuvxyz0123456789");function UN(Q){let X="";for(let Y=0;Y<Q.length;Y++){if(!qN.has(Q[Y]))X+="\\";X+=Q[Y]}return X}function s0(Q,X,Y,$){if(Q.format||Q.anyOf?.some((W)=>W.format)){if(!Q.anyOf)Q.anyOf=[];if(Q.format){if(Q.anyOf.push({format:Q.format,...Q.errorMessage&&$.errorMessages&&{errorMessage:{format:Q.errorMessage.format}}}),delete Q.format,Q.errorMessage){if(delete Q.errorMessage.format,Object.keys(Q.errorMessage).length===0)delete Q.errorMessage}}Q.anyOf.push({format:X,...Y&&$.errorMessages&&{errorMessage:{format:Y}}})}else o(Q,"format",X,Y,$)}function _0(Q,X,Y,$){if(Q.pattern||Q.allOf?.some((W)=>W.pattern)){if(!Q.allOf)Q.allOf=[];if(Q.pattern){if(Q.allOf.push({pattern:Q.pattern,...Q.errorMessage&&$.errorMessages&&{errorMessage:{pattern:Q.errorMessage.pattern}}}),delete Q.pattern,Q.errorMessage){if(delete Q.errorMessage.pattern,Object.keys(Q.errorMessage).length===0)delete Q.errorMessage}}Q.allOf.push({pattern:_5(X,$),...Y&&$.errorMessages&&{errorMessage:{pattern:Y}}})}else o(Q,"pattern",_5(X,$),Y,$)}function _5(Q,X){if(!X.applyRegexFlags||!Q.flags)return Q.source;let Y={i:Q.flags.includes("i"),m:Q.flags.includes("m"),s:Q.flags.includes("s")},$=Y.i?Q.source.toLowerCase():Q.source,W="",J=!1,G=!1,H=!1;for(let B=0;B<$.length;B++){if(J){W+=$[B],J=!1;continue}if(Y.i){if(G){if($[B].match(/[a-z]/)){if(H)W+=$[B],W+=`${$[B-2]}-${$[B]}`.toUpperCase(),H=!1;else if($[B+1]==="-"&&$[B+2]?.match(/[a-z]/))W+=$[B],H=!0;else W+=`${$[B]}${$[B].toUpperCase()}`;continue}}else if($[B].match(/[a-z]/)){W+=`[${$[B]}${$[B].toUpperCase()}]`;continue}}if(Y.m){if($[B]==="^"){W+=`(^|(?<=[\r
]))`;continue}else if($[B]==="$"){W+=`($|(?=[\r
]))`;continue}}if(Y.s&&$[B]==="."){W+=G?`${$[B]}\r
`:`[${$[B]}\r
]`;continue}if(W+=$[B],$[B]==="\\")J=!0;else if(G&&$[B]==="]")G=!1;else if(!G&&$[B]==="[")G=!0}try{new RegExp(W)}catch{return console.warn(`Could not convert regex pattern at ${X.currentPath.join("/")} to a flag-independent form! Falling back to the flag-ignorant source`),Q.source}return W}function M8(Q,X){if(X.target==="openAi")console.warn("Warning: OpenAI may not support records in schemas! Try an array of key-value pairs instead.");if(X.target==="openApi3"&&Q.keyType?._def.typeName===j.ZodEnum)return{type:"object",required:Q.keyType._def.values,properties:Q.keyType._def.values.reduce(($,W)=>({...$,[W]:h(Q.valueType._def,{...X,currentPath:[...X.currentPath,"properties",W]})??K0(X)}),{}),additionalProperties:X.rejectedAdditionalProperties};let Y={type:"object",additionalProperties:h(Q.valueType._def,{...X,currentPath:[...X.currentPath,"additionalProperties"]})??X.allowedAdditionalProperties};if(X.target==="openApi3")return Y;if(Q.keyType?._def.typeName===j.ZodString&&Q.keyType._def.checks?.length){let{type:$,...W}=w8(Q.keyType._def,X);return{...Y,propertyNames:W}}else if(Q.keyType?._def.typeName===j.ZodEnum)return{...Y,propertyNames:{enum:Q.keyType._def.values}};else if(Q.keyType?._def.typeName===j.ZodBranded&&Q.keyType._def.type._def.typeName===j.ZodString&&Q.keyType._def.type._def.checks?.length){let{type:$,...W}=O8(Q.keyType._def,X);return{...Y,propertyNames:W}}return Y}function T5(Q,X){if(X.mapStrategy==="record")return M8(Q,X);let Y=h(Q.keyType._def,{...X,currentPath:[...X.currentPath,"items","items","0"]})||K0(X),$=h(Q.valueType._def,{...X,currentPath:[...X.currentPath,"items","items","1"]})||K0(X);return{type:"array",maxItems:125,items:{type:"array",items:[Y,$],minItems:2,maxItems:2}}}function x5(Q){let X=Q.values,$=Object.keys(Q.values).filter((J)=>{return typeof X[X[J]]!=="number"}).map((J)=>X[J]),W=Array.from(new Set($.map((J)=>typeof J)));return{type:W.length===1?W[0]==="string"?"string":"number":["string","number"],enum:$}}function y5(Q){return Q.target==="openAi"?void 0:{not:K0({...Q,currentPath:[...Q.currentPath,"not"]})}}function g5(Q){return Q.target==="openApi3"?{enum:["null"],nullable:!0}:{type:"null"}}var f4={ZodString:"string",ZodNumber:"number",ZodBigInt:"integer",ZodBoolean:"boolean",ZodNull:"null"};function f5(Q,X){if(X.target==="openApi3")return h5(Q,X);let Y=Q.options instanceof Map?Array.from(Q.options.values()):Q.options;if(Y.every(($)=>($._def.typeName in f4)&&(!$._def.checks||!$._def.checks.length))){let $=Y.reduce((W,J)=>{let G=f4[J._def.typeName];return G&&!W.includes(G)?[...W,G]:W},[]);return{type:$.length>1?$:$[0]}}else if(Y.every(($)=>$._def.typeName==="ZodLiteral"&&!$.description)){let $=Y.reduce((W,J)=>{let G=typeof J._def.value;switch(G){case"string":case"number":case"boolean":return[...W,G];case"bigint":return[...W,"integer"];case"object":if(J._def.value===null)return[...W,"null"];case"symbol":case"undefined":case"function":default:return W}},[]);if($.length===Y.length){let W=$.filter((J,G,H)=>H.indexOf(J)===G);return{type:W.length>1?W:W[0],enum:Y.reduce((J,G)=>{return J.includes(G._def.value)?J:[...J,G._def.value]},[])}}}else if(Y.every(($)=>$._def.typeName==="ZodEnum"))return{type:"string",enum:Y.reduce(($,W)=>[...$,...W._def.values.filter((J)=>!$.includes(J))],[])};return h5(Q,X)}var h5=(Q,X)=>{let Y=(Q.options instanceof Map?Array.from(Q.options.values()):Q.options).map(($,W)=>h($._def,{...X,currentPath:[...X.currentPath,"anyOf",`${W}`]})).filter(($)=>!!$&&(!X.strictUnions||typeof $==="object"&&Object.keys($).length>0));return Y.length?{anyOf:Y}:void 0};function u5(Q,X){if(["ZodString","ZodNumber","ZodBigInt","ZodBoolean","ZodNull"].includes(Q.innerType._def.typeName)&&(!Q.innerType._def.checks||!Q.innerType._def.checks.length)){if(X.target==="openApi3")return{type:f4[Q.innerType._def.typeName],nullable:!0};return{type:[f4[Q.innerType._def.typeName],"null"]}}if(X.target==="openApi3"){let $=h(Q.innerType._def,{...X,currentPath:[...X.currentPath]});if($&&"$ref"in $)return{allOf:[$],nullable:!0};return $&&{...$,nullable:!0}}let Y=h(Q.innerType._def,{...X,currentPath:[...X.currentPath,"anyOf","0"]});return Y&&{anyOf:[Y,{type:"null"}]}}function l5(Q,X){let Y={type:"number"};if(!Q.checks)return Y;for(let $ of Q.checks)switch($.kind){case"int":Y.type="integer",cY(Y,"type",$.message,X);break;case"min":if(X.target==="jsonSchema7")if($.inclusive)o(Y,"minimum",$.value,$.message,X);else o(Y,"exclusiveMinimum",$.value,$.message,X);else{if(!$.inclusive)Y.exclusiveMinimum=!0;o(Y,"minimum",$.value,$.message,X)}break;case"max":if(X.target==="jsonSchema7")if($.inclusive)o(Y,"maximum",$.value,$.message,X);else o(Y,"exclusiveMaximum",$.value,$.message,X);else{if(!$.inclusive)Y.exclusiveMaximum=!0;o(Y,"maximum",$.value,$.message,X)}break;case"multipleOf":o(Y,"multipleOf",$.value,$.message,X);break}return Y}function m5(Q,X){let Y=X.target==="openAi",$={type:"object",properties:{}},W=[],J=Q.shape();for(let H in J){let B=J[H];if(B===void 0||B._def===void 0)continue;let z=FN(B);if(z&&Y){if(B._def.typeName==="ZodOptional")B=B._def.innerType;if(!B.isNullable())B=B.nullable();z=!1}let K=h(B._def,{...X,currentPath:[...X.currentPath,"properties",H],propertyPath:[...X.currentPath,"properties",H]});if(K===void 0)continue;if($.properties[H]=K,!z)W.push(H)}if(W.length)$.required=W;let G=LN(Q,X);if(G!==void 0)$.additionalProperties=G;return $}function LN(Q,X){if(Q.catchall._def.typeName!=="ZodNever")return h(Q.catchall._def,{...X,currentPath:[...X.currentPath,"additionalProperties"]});switch(Q.unknownKeys){case"passthrough":return X.allowedAdditionalProperties;case"strict":return X.rejectedAdditionalProperties;case"strip":return X.removeAdditionalStrategy==="strict"?X.allowedAdditionalProperties:X.rejectedAdditionalProperties}}function FN(Q){try{return Q.isOptional()}catch{return!0}}var c5=(Q,X)=>{if(X.currentPath.toString()===X.propertyPath?.toString())return h(Q.innerType._def,X);let Y=h(Q.innerType._def,{...X,currentPath:[...X.currentPath,"anyOf","1"]});return Y?{anyOf:[{not:K0(X)},Y]}:K0(X)};var p5=(Q,X)=>{if(X.pipeStrategy==="input")return h(Q.in._def,X);else if(X.pipeStrategy==="output")return h(Q.out._def,X);let Y=h(Q.in._def,{...X,currentPath:[...X.currentPath,"allOf","0"]}),$=h(Q.out._def,{...X,currentPath:[...X.currentPath,"allOf",Y?"1":"0"]});return{allOf:[Y,$].filter((W)=>W!==void 0)}};function d5(Q,X){return h(Q.type._def,X)}function i5(Q,X){let $={type:"array",uniqueItems:!0,items:h(Q.valueType._def,{...X,currentPath:[...X.currentPath,"items"]})};if(Q.minSize)o($,"minItems",Q.minSize.value,Q.minSize.message,X);if(Q.maxSize)o($,"maxItems",Q.maxSize.value,Q.maxSize.message,X);return $}function n5(Q,X){if(Q.rest)return{type:"array",minItems:Q.items.length,items:Q.items.map((Y,$)=>h(Y._def,{...X,currentPath:[...X.currentPath,"items",`${$}`]})).reduce((Y,$)=>$===void 0?Y:[...Y,$],[]),additionalItems:h(Q.rest._def,{...X,currentPath:[...X.currentPath,"additionalItems"]})};else return{type:"array",minItems:Q.items.length,maxItems:Q.items.length,items:Q.items.map((Y,$)=>h(Y._def,{...X,currentPath:[...X.currentPath,"items",`${$}`]})).reduce((Y,$)=>$===void 0?Y:[...Y,$],[])}}function r5(Q){return{not:K0(Q)}}function o5(Q){return K0(Q)}var t5=(Q,X)=>{return h(Q.innerType._def,X)};var a5=(Q,X,Y)=>{switch(X){case j.ZodString:return w8(Q,Y);case j.ZodNumber:return l5(Q,Y);case j.ZodObject:return m5(Q,Y);case j.ZodBigInt:return E5(Q,Y);case j.ZodBoolean:return b5();case j.ZodDate:return pY(Q,Y);case j.ZodUndefined:return r5(Y);case j.ZodNull:return g5(Y);case j.ZodArray:return I5(Q,Y);case j.ZodUnion:case j.ZodDiscriminatedUnion:return f5(Q,Y);case j.ZodIntersection:return k5(Q,Y);case j.ZodTuple:return n5(Q,Y);case j.ZodRecord:return M8(Q,Y);case j.ZodLiteral:return v5(Q,Y);case j.ZodEnum:return C5(Q);case j.ZodNativeEnum:return x5(Q);case j.ZodNullable:return u5(Q,Y);case j.ZodOptional:return c5(Q,Y);case j.ZodMap:return T5(Q,Y);case j.ZodSet:return i5(Q,Y);case j.ZodLazy:return()=>Q.getter()._def;case j.ZodPromise:return d5(Q,Y);case j.ZodNaN:case j.ZodNever:return y5(Y);case j.ZodEffects:return Z5(Q,Y);case j.ZodAny:return K0(Y);case j.ZodUnknown:return o5(Y);case j.ZodDefault:return S5(Q,Y);case j.ZodBranded:return O8(Q,Y);case j.ZodReadonly:return t5(Q,Y);case j.ZodCatch:return P5(Q,Y);case j.ZodPipeline:return p5(Q,Y);case j.ZodFunction:case j.ZodVoid:case j.ZodSymbol:return;default:return(($)=>{return})(X)}};function h(Q,X,Y=!1){let $=X.seen.get(Q);if(X.override){let H=X.override?.(Q,X,$,Y);if(H!==A5)return H}if($&&!Y){let H=NN($,X);if(H!==void 0)return H}let W={def:Q,path:X.currentPath,jsonSchema:void 0};X.seen.set(Q,W);let J=a5(Q,Q.typeName,X),G=typeof J==="function"?h(J(),X):J;if(G)DN(Q,X,G);if(X.postProcess){let H=X.postProcess(G,Q,X);return W.jsonSchema=G,H}return W.jsonSchema=G,G}var NN=(Q,X)=>{switch(X.$refStrategy){case"root":return{$ref:Q.path.join("/")};case"relative":return{$ref:D8(X.currentPath,Q.path)};case"none":case"seen":{if(Q.path.length<X.currentPath.length&&Q.path.every((Y,$)=>X.currentPath[$]===Y))return console.warn(`Recursive reference detected at ${X.currentPath.join("/")}! Defaulting to any`),K0(X);return X.$refStrategy==="seen"?K0(X):void 0}}},DN=(Q,X,Y)=>{if(Q.description){if(Y.description=Q.description,X.markdownDescription)Y.markdownDescription=Q.description}return Y};var nY=(Q,X)=>{let Y=R5(X),$=typeof X==="object"&&X.definitions?Object.entries(X.definitions).reduce((B,[z,K])=>({...B,[z]:h(K._def,{...Y,currentPath:[...Y.basePath,Y.definitionPath,z]},!0)??K0(Y)}),{}):void 0,W=typeof X==="string"?X:X?.nameStrategy==="title"?void 0:X?.name,J=h(Q._def,W===void 0?Y:{...Y,currentPath:[...Y.basePath,Y.definitionPath,W]},!1)??K0(Y),G=typeof X==="object"&&X.name!==void 0&&X.nameStrategy==="title"?X.name:void 0;if(G!==void 0)J.title=G;if(Y.flags.hasReferencedOpenAiAnyType){if(!$)$={};if(!$[Y.openAiAnyTypeName])$[Y.openAiAnyTypeName]={type:["string","number","integer","boolean","array","null"],items:{$ref:Y.$refStrategy==="relative"?"1":[...Y.basePath,Y.definitionPath,Y.openAiAnyTypeName].join("/")}}}let H=W===void 0?$?{...J,[Y.definitionPath]:$}:J:{$ref:[...Y.$refStrategy==="relative"?[]:Y.basePath,Y.definitionPath,W].join("/"),[Y.definitionPath]:{...$,[W]:J}};if(Y.target==="jsonSchema7")H.$schema="http://json-schema.org/draft-07/schema#";else if(Y.target==="jsonSchema2019-09"||Y.target==="openAi")H.$schema="https://json-schema.org/draft/2019-09/schema#";if(Y.target==="openAi"&&(("anyOf"in H)||("oneOf"in H)||("allOf"in H)||("type"in H)&&Array.isArray(H.type)))console.warn("Warning: OpenAI may not support schemas with unions as roots! Try wrapping it in an object property.");return H};function ON(Q){if(!Q)return"draft-7";if(Q==="jsonSchema7"||Q==="draft-7")return"draft-7";if(Q==="jsonSchema2019-09"||Q==="draft-2020-12")return"draft-2020-12";return"draft-7"}function rY(Q,X){var Y,$,W;if(p0(Q))return DY(Q,{target:ON(X===null||X===void 0?void 0:X.target),io:(Y=X===null||X===void 0?void 0:X.pipeStrategy)!==null&&Y!==void 0?Y:"input"});return nY(Q,{strictUnions:($=X===null||X===void 0?void 0:X.strictUnions)!==null&&$!==void 0?$:!0,pipeStrategy:(W=X===null||X===void 0?void 0:X.pipeStrategy)!==null&&W!==void 0?W:"input"})}function oY(Q){let X=l1(Q),Y=X===null||X===void 0?void 0:X.method;if(!Y)throw Error("Schema is missing a method literal");let $=n9(Y);if(typeof $!=="string")throw Error("Schema method literal must be a string");return $}function tY(Q,X){let Y=u1(Q,X);if(!Y.success)throw Y.error;return Y.data}var wN=60000;class aY{constructor(Q){if(this._options=Q,this._requestMessageId=0,this._requestHandlers=new Map,this._requestHandlerAbortControllers=new Map,this._notificationHandlers=new Map,this._responseHandlers=new Map,this._progressHandlers=new Map,this._timeoutInfo=new Map,this._pendingDebouncedNotifications=new Set,this._taskProgressTokens=new Map,this._requestResolvers=new Map,this.setNotificationHandler(Q8,(X)=>{this._oncancel(X)}),this.setNotificationHandler(Y8,(X)=>{this._onprogress(X)}),this.setRequestHandler(X8,(X)=>({})),this._taskStore=Q===null||Q===void 0?void 0:Q.taskStore,this._taskMessageQueue=Q===null||Q===void 0?void 0:Q.taskMessageQueue,this._taskStore)this.setRequestHandler($8,async(X,Y)=>{let $=await this._taskStore.getTask(X.params.taskId,Y.sessionId);if(!$)throw new k(x.InvalidParams,"Failed to retrieve task: Task not found");return{...$}}),this.setRequestHandler(J8,async(X,Y)=>{let $=async()=>{var W;let J=X.params.taskId;if(this._taskMessageQueue){let H;while(H=await this._taskMessageQueue.dequeue(J,Y.sessionId)){if(H.type==="response"||H.type==="error"){let B=H.message,z=B.id,K=this._requestResolvers.get(z);if(K)if(this._requestResolvers.delete(z),H.type==="response")K(B);else{let q=B,U=new k(q.error.code,q.error.message,q.error.data);K(U)}else{let q=H.type==="response"?"Response":"Error";this._onerror(Error(`${q} handler missing for request ${z}`))}continue}await((W=this._transport)===null||W===void 0?void 0:W.send(H.message,{relatedRequestId:Y.requestId}))}}let G=await this._taskStore.getTask(J,Y.sessionId);if(!G)throw new k(x.InvalidParams,`Task not found: ${J}`);if(!m1(G.status))return await this._waitForTaskUpdate(J,Y.signal),await $();if(m1(G.status)){let H=await this._taskStore.getTaskResult(J,Y.sessionId);return this._clearTaskQueue(J),{...H,_meta:{...H._meta,[V1]:{taskId:J}}}}return await $()};return await $()}),this.setRequestHandler(G8,async(X,Y)=>{var $;try{let{tasks:W,nextCursor:J}=await this._taskStore.listTasks(($=X.params)===null||$===void 0?void 0:$.cursor,Y.sessionId);return{tasks:W,nextCursor:J,_meta:{}}}catch(W){throw new k(x.InvalidParams,`Failed to list tasks: ${W instanceof Error?W.message:String(W)}`)}}),this.setRequestHandler(K5,async(X,Y)=>{try{let $=await this._taskStore.getTask(X.params.taskId,Y.sessionId);if(!$)throw new k(x.InvalidParams,`Task not found: ${X.params.taskId}`);if(m1($.status))throw new k(x.InvalidParams,`Cannot cancel task in terminal status: ${$.status}`);await this._taskStore.updateTaskStatus(X.params.taskId,"cancelled","Client cancelled task execution.",Y.sessionId),this._clearTaskQueue(X.params.taskId);let W=await this._taskStore.getTask(X.params.taskId,Y.sessionId);if(!W)throw new k(x.InvalidParams,`Task not found after cancellation: ${X.params.taskId}`);return{_meta:{},...W}}catch($){if($ instanceof k)throw $;throw new k(x.InvalidRequest,`Failed to cancel task: ${$ instanceof Error?$.message:String($)}`)}})}async _oncancel(Q){let X=this._requestHandlerAbortControllers.get(Q.params.requestId);X===null||X===void 0||X.abort(Q.params.reason)}_setupTimeout(Q,X,Y,$,W=!1){this._timeoutInfo.set(Q,{timeoutId:setTimeout($,X),startTime:Date.now(),timeout:X,maxTotalTimeout:Y,resetTimeoutOnProgress:W,onTimeout:$})}_resetTimeout(Q){let X=this._timeoutInfo.get(Q);if(!X)return!1;let Y=Date.now()-X.startTime;if(X.maxTotalTimeout&&Y>=X.maxTotalTimeout)throw this._timeoutInfo.delete(Q),k.fromError(x.RequestTimeout,"Maximum total timeout exceeded",{maxTotalTimeout:X.maxTotalTimeout,totalElapsed:Y});return clearTimeout(X.timeoutId),X.timeoutId=setTimeout(X.onTimeout,X.timeout),!0}_cleanupTimeout(Q){let X=this._timeoutInfo.get(Q);if(X)clearTimeout(X.timeoutId),this._timeoutInfo.delete(Q)}async connect(Q){var X,Y,$;this._transport=Q;let W=(X=this.transport)===null||X===void 0?void 0:X.onclose;this._transport.onclose=()=>{W===null||W===void 0||W(),this._onclose()};let J=(Y=this.transport)===null||Y===void 0?void 0:Y.onerror;this._transport.onerror=(H)=>{J===null||J===void 0||J(H),this._onerror(H)};let G=($=this._transport)===null||$===void 0?void 0:$.onmessage;this._transport.onmessage=(H,B)=>{if(G===null||G===void 0||G(H,B),v4(H)||B5(H))this._onresponse(H);else if(CY(H))this._onrequest(H,B);else if(J5(H))this._onnotification(H);else this._onerror(Error(`Unknown message type: ${JSON.stringify(H)}`))},await this._transport.start()}_onclose(){var Q;let X=this._responseHandlers;this._responseHandlers=new Map,this._progressHandlers.clear(),this._taskProgressTokens.clear(),this._pendingDebouncedNotifications.clear();let Y=k.fromError(x.ConnectionClosed,"Connection closed");this._transport=void 0,(Q=this.onclose)===null||Q===void 0||Q.call(this);for(let $ of X.values())$(Y)}_onerror(Q){var X;(X=this.onerror)===null||X===void 0||X.call(this,Q)}_onnotification(Q){var X;let Y=(X=this._notificationHandlers.get(Q.method))!==null&&X!==void 0?X:this.fallbackNotificationHandler;if(Y===void 0)return;Promise.resolve().then(()=>Y(Q)).catch(($)=>this._onerror(Error(`Uncaught error in notification handler: ${$}`)))}_onrequest(Q,X){var Y,$,W,J,G,H;let B=(Y=this._requestHandlers.get(Q.method))!==null&&Y!==void 0?Y:this.fallbackRequestHandler,z=this._transport,K=(J=(W=($=Q.params)===null||$===void 0?void 0:$._meta)===null||W===void 0?void 0:W[V1])===null||J===void 0?void 0:J.taskId;if(B===void 0){let L={jsonrpc:"2.0",id:Q.id,error:{code:x.MethodNotFound,message:"Method not found"}};if(K&&this._taskMessageQueue)this._enqueueTaskMessage(K,{type:"error",message:L,timestamp:Date.now()},z===null||z===void 0?void 0:z.sessionId).catch((N)=>this._onerror(Error(`Failed to enqueue error response: ${N}`)));else z===null||z===void 0||z.send(L).catch((N)=>this._onerror(Error(`Failed to send an error response: ${N}`)));return}let q=new AbortController;this._requestHandlerAbortControllers.set(Q.id,q);let U=(G=Q.params)===null||G===void 0?void 0:G.task,V=this._taskStore?this.requestTaskStore(Q,z===null||z===void 0?void 0:z.sessionId):void 0,F={signal:q.signal,sessionId:z===null||z===void 0?void 0:z.sessionId,_meta:(H=Q.params)===null||H===void 0?void 0:H._meta,sendNotification:async(L)=>{let N={relatedRequestId:Q.id};if(K)N.relatedTask={taskId:K};await this.notification(L,N)},sendRequest:async(L,N,w)=>{var A,R;let S={...w,relatedRequestId:Q.id};if(K&&!S.relatedTask)S.relatedTask={taskId:K};let C=(R=(A=S.relatedTask)===null||A===void 0?void 0:A.taskId)!==null&&R!==void 0?R:K;if(C&&V)await V.updateTaskStatus(C,"input_required");return await this.request(L,N,S)},authInfo:X===null||X===void 0?void 0:X.authInfo,requestId:Q.id,requestInfo:X===null||X===void 0?void 0:X.requestInfo,taskId:K,taskStore:V,taskRequestedTtl:U===null||U===void 0?void 0:U.ttl,closeSSEStream:X===null||X===void 0?void 0:X.closeSSEStream,closeStandaloneSSEStream:X===null||X===void 0?void 0:X.closeStandaloneSSEStream};Promise.resolve().then(()=>{if(U)this.assertTaskHandlerCapability(Q.method)}).then(()=>B(Q,F)).then(async(L)=>{if(q.signal.aborted)return;let N={result:L,jsonrpc:"2.0",id:Q.id};if(K&&this._taskMessageQueue)await this._enqueueTaskMessage(K,{type:"response",message:N,timestamp:Date.now()},z===null||z===void 0?void 0:z.sessionId);else await(z===null||z===void 0?void 0:z.send(N))},async(L)=>{var N;if(q.signal.aborted)return;let w={jsonrpc:"2.0",id:Q.id,error:{code:Number.isSafeInteger(L.code)?L.code:x.InternalError,message:(N=L.message)!==null&&N!==void 0?N:"Internal error",...L.data!==void 0&&{data:L.data}}};if(K&&this._taskMessageQueue)await this._enqueueTaskMessage(K,{type:"error",message:w,timestamp:Date.now()},z===null||z===void 0?void 0:z.sessionId);else await(z===null||z===void 0?void 0:z.send(w))}).catch((L)=>this._onerror(Error(`Failed to send response: ${L}`))).finally(()=>{this._requestHandlerAbortControllers.delete(Q.id)})}_onprogress(Q){let{progressToken:X,...Y}=Q.params,$=Number(X),W=this._progressHandlers.get($);if(!W){this._onerror(Error(`Received a progress notification for an unknown token: ${JSON.stringify(Q)}`));return}let J=this._responseHandlers.get($),G=this._timeoutInfo.get($);if(G&&J&&G.resetTimeoutOnProgress)try{this._resetTimeout($)}catch(H){this._responseHandlers.delete($),this._progressHandlers.delete($),this._cleanupTimeout($),J(H);return}W(Y)}_onresponse(Q){let X=Number(Q.id),Y=this._requestResolvers.get(X);if(Y){if(this._requestResolvers.delete(X),v4(Q))Y(Q);else{let J=new k(Q.error.code,Q.error.message,Q.error.data);Y(J)}return}let $=this._responseHandlers.get(X);if($===void 0){this._onerror(Error(`Received a response for an unknown message ID: ${JSON.stringify(Q)}`));return}this._responseHandlers.delete(X),this._cleanupTimeout(X);let W=!1;if(v4(Q)&&Q.result&&typeof Q.result==="object"){let J=Q.result;if(J.task&&typeof J.task==="object"){let G=J.task;if(typeof G.taskId==="string")W=!0,this._taskProgressTokens.set(G.taskId,X)}}if(!W)this._progressHandlers.delete(X);if(v4(Q))$(Q);else{let J=k.fromError(Q.error.code,Q.error.message,Q.error.data);$(J)}}get transport(){return this._transport}async close(){var Q;await((Q=this._transport)===null||Q===void 0?void 0:Q.close())}async*requestStream(Q,X,Y){var $,W,J,G;let{task:H}=Y!==null&&Y!==void 0?Y:{};if(!H){try{yield{type:"result",result:await this.request(Q,X,Y)}}catch(z){yield{type:"error",error:z instanceof k?z:new k(x.InternalError,String(z))}}return}let B;try{let z=await this.request(Q,f6,Y);if(z.task)B=z.task.taskId,yield{type:"taskCreated",task:z.task};else throw new k(x.InternalError,"Task creation did not return a task");while(!0){let K=await this.getTask({taskId:B},Y);if(yield{type:"taskStatus",task:K},m1(K.status)){if(K.status==="completed")yield{type:"result",result:await this.getTaskResult({taskId:B},X,Y)};else if(K.status==="failed")yield{type:"error",error:new k(x.InternalError,`Task ${B} failed`)};else if(K.status==="cancelled")yield{type:"error",error:new k(x.InternalError,`Task ${B} was cancelled`)};return}if(K.status==="input_required"){yield{type:"result",result:await this.getTaskResult({taskId:B},X,Y)};return}let q=(J=($=K.pollInterval)!==null&&$!==void 0?$:(W=this._options)===null||W===void 0?void 0:W.defaultTaskPollInterval)!==null&&J!==void 0?J:1000;await new Promise((U)=>setTimeout(U,q)),(G=Y===null||Y===void 0?void 0:Y.signal)===null||G===void 0||G.throwIfAborted()}}catch(z){yield{type:"error",error:z instanceof k?z:new k(x.InternalError,String(z))}}}request(Q,X,Y){let{relatedRequestId:$,resumptionToken:W,onresumptiontoken:J,task:G,relatedTask:H}=Y!==null&&Y!==void 0?Y:{};return new Promise((B,z)=>{var K,q,U,V,F,L,N;let w=(s)=>{z(s)};if(!this._transport){w(Error("Not connected"));return}if(((K=this._options)===null||K===void 0?void 0:K.enforceStrictCapabilities)===!0)try{if(this.assertCapabilityForMethod(Q.method),G)this.assertTaskCapability(Q.method)}catch(s){w(s);return}(q=Y===null||Y===void 0?void 0:Y.signal)===null||q===void 0||q.throwIfAborted();let A=this._requestMessageId++,R={...Q,jsonrpc:"2.0",id:A};if(Y===null||Y===void 0?void 0:Y.onprogress)this._progressHandlers.set(A,Y.onprogress),R.params={...Q.params,_meta:{...((U=Q.params)===null||U===void 0?void 0:U._meta)||{},progressToken:A}};if(G)R.params={...R.params,task:G};if(H)R.params={...R.params,_meta:{...((V=R.params)===null||V===void 0?void 0:V._meta)||{},[V1]:H}};let S=(s)=>{var M0;this._responseHandlers.delete(A),this._progressHandlers.delete(A),this._cleanupTimeout(A),(M0=this._transport)===null||M0===void 0||M0.send({jsonrpc:"2.0",method:"notifications/cancelled",params:{requestId:A,reason:String(s)}},{relatedRequestId:$,resumptionToken:W,onresumptiontoken:J}).catch((F1)=>this._onerror(Error(`Failed to send cancellation: ${F1}`)));let D0=s instanceof k?s:new k(x.RequestTimeout,String(s));z(D0)};this._responseHandlers.set(A,(s)=>{var M0;if((M0=Y===null||Y===void 0?void 0:Y.signal)===null||M0===void 0?void 0:M0.aborted)return;if(s instanceof Error)return z(s);try{let D0=u1(X,s.result);if(!D0.success)z(D0.error);else B(D0.data)}catch(D0){z(D0)}}),(F=Y===null||Y===void 0?void 0:Y.signal)===null||F===void 0||F.addEventListener("abort",()=>{var s;S((s=Y===null||Y===void 0?void 0:Y.signal)===null||s===void 0?void 0:s.reason)});let C=(L=Y===null||Y===void 0?void 0:Y.timeout)!==null&&L!==void 0?L:wN,U0=()=>S(k.fromError(x.RequestTimeout,"Request timed out",{timeout:C}));this._setupTimeout(A,C,Y===null||Y===void 0?void 0:Y.maxTotalTimeout,U0,(N=Y===null||Y===void 0?void 0:Y.resetTimeoutOnProgress)!==null&&N!==void 0?N:!1);let L0=H===null||H===void 0?void 0:H.taskId;if(L0){let s=(M0)=>{let D0=this._responseHandlers.get(A);if(D0)D0(M0);else this._onerror(Error(`Response handler missing for side-channeled request ${A}`))};this._requestResolvers.set(A,s),this._enqueueTaskMessage(L0,{type:"request",message:R,timestamp:Date.now()}).catch((M0)=>{this._cleanupTimeout(A),z(M0)})}else this._transport.send(R,{relatedRequestId:$,resumptionToken:W,onresumptiontoken:J}).catch((s)=>{this._cleanupTimeout(A),z(s)})})}async getTask(Q,X){return this.request({method:"tasks/get",params:Q},W8,X)}async getTaskResult(Q,X,Y){return this.request({method:"tasks/result",params:Q},X,Y)}async listTasks(Q,X){return this.request({method:"tasks/list",params:Q},H8,X)}async cancelTask(Q,X){return this.request({method:"tasks/cancel",params:Q},V5,X)}async notification(Q,X){var Y,$,W,J,G;if(!this._transport)throw Error("Not connected");this.assertNotificationCapability(Q.method);let H=(Y=X===null||X===void 0?void 0:X.relatedTask)===null||Y===void 0?void 0:Y.taskId;if(H){let q={...Q,jsonrpc:"2.0",params:{...Q.params,_meta:{...(($=Q.params)===null||$===void 0?void 0:$._meta)||{},[V1]:X.relatedTask}}};await this._enqueueTaskMessage(H,{type:"notification",message:q,timestamp:Date.now()});return}if(((J=(W=this._options)===null||W===void 0?void 0:W.debouncedNotificationMethods)!==null&&J!==void 0?J:[]).includes(Q.method)&&!Q.params&&!(X===null||X===void 0?void 0:X.relatedRequestId)&&!(X===null||X===void 0?void 0:X.relatedTask)){if(this._pendingDebouncedNotifications.has(Q.method))return;this._pendingDebouncedNotifications.add(Q.method),Promise.resolve().then(()=>{var q,U;if(this._pendingDebouncedNotifications.delete(Q.method),!this._transport)return;let V={...Q,jsonrpc:"2.0"};if(X===null||X===void 0?void 0:X.relatedTask)V={...V,params:{...V.params,_meta:{...((q=V.params)===null||q===void 0?void 0:q._meta)||{},[V1]:X.relatedTask}}};(U=this._transport)===null||U===void 0||U.send(V,X).catch((F)=>this._onerror(F))});return}let K={...Q,jsonrpc:"2.0"};if(X===null||X===void 0?void 0:X.relatedTask)K={...K,params:{...K.params,_meta:{...((G=K.params)===null||G===void 0?void 0:G._meta)||{},[V1]:X.relatedTask}}};await this._transport.send(K,X)}setRequestHandler(Q,X){let Y=oY(Q);this.assertRequestHandlerCapability(Y),this._requestHandlers.set(Y,($,W)=>{let J=tY(Q,$);return Promise.resolve(X(J,W))})}removeRequestHandler(Q){this._requestHandlers.delete(Q)}assertCanSetRequestHandler(Q){if(this._requestHandlers.has(Q))throw Error(`A request handler for ${Q} already exists, which would be overridden`)}setNotificationHandler(Q,X){let Y=oY(Q);this._notificationHandlers.set(Y,($)=>{let W=tY(Q,$);return Promise.resolve(X(W))})}removeNotificationHandler(Q){this._notificationHandlers.delete(Q)}_cleanupTaskProgressHandler(Q){let X=this._taskProgressTokens.get(Q);if(X!==void 0)this._progressHandlers.delete(X),this._taskProgressTokens.delete(Q)}async _enqueueTaskMessage(Q,X,Y){var $;if(!this._taskStore||!this._taskMessageQueue)throw Error("Cannot enqueue task message: taskStore and taskMessageQueue are not configured");let W=($=this._options)===null||$===void 0?void 0:$.maxTaskQueueSize;await this._taskMessageQueue.enqueue(Q,X,Y,W)}async _clearTaskQueue(Q,X){if(this._taskMessageQueue){let Y=await this._taskMessageQueue.dequeueAll(Q,X);for(let $ of Y)if($.type==="request"&&CY($.message)){let W=$.message.id,J=this._requestResolvers.get(W);if(J)J(new k(x.InternalError,"Task cancelled or completed")),this._requestResolvers.delete(W);else this._onerror(Error(`Resolver missing for request ${W} during task ${Q} cleanup`))}}}async _waitForTaskUpdate(Q,X){var Y,$,W;let J=($=(Y=this._options)===null||Y===void 0?void 0:Y.defaultTaskPollInterval)!==null&&$!==void 0?$:1000;try{let G=await((W=this._taskStore)===null||W===void 0?void 0:W.getTask(Q));if(G===null||G===void 0?void 0:G.pollInterval)J=G.pollInterval}catch(G){}return new Promise((G,H)=>{if(X.aborted){H(new k(x.InvalidRequest,"Request cancelled"));return}let B=setTimeout(G,J);X.addEventListener("abort",()=>{clearTimeout(B),H(new k(x.InvalidRequest,"Request cancelled"))},{once:!0})})}requestTaskStore(Q,X){let Y=this._taskStore;if(!Y)throw Error("No task store configured");return{createTask:async($)=>{if(!Q)throw Error("No request provided");return await Y.createTask($,Q.id,{method:Q.method,params:Q.params},X)},getTask:async($)=>{let W=await Y.getTask($,X);if(!W)throw new k(x.InvalidParams,"Failed to retrieve task: Task not found");return W},storeTaskResult:async($,W,J)=>{await Y.storeTaskResult($,W,J,X);let G=await Y.getTask($,X);if(G){let H=g4.parse({method:"notifications/tasks/status",params:G});if(await this.notification(H),m1(G.status))this._cleanupTaskProgressHandler($)}},getTaskResult:($)=>{return Y.getTaskResult($,X)},updateTaskStatus:async($,W,J)=>{let G=await Y.getTask($,X);if(!G)throw new k(x.InvalidParams,`Task "${$}" not found - it may have been cleaned up`);if(m1(G.status))throw new k(x.InvalidParams,`Cannot update task "${$}" from terminal status "${G.status}" to "${W}". Terminal states (completed, failed, cancelled) cannot transition to other states.`);await Y.updateTaskStatus($,W,J,X);let H=await Y.getTask($,X);if(H){let B=g4.parse({method:"notifications/tasks/status",params:H});if(await this.notification(B),m1(H.status))this._cleanupTaskProgressHandler($)}},listTasks:($)=>{return Y.listTasks($,X)}}}}function s5(Q){return Q!==null&&typeof Q==="object"&&!Array.isArray(Q)}function e5(Q,X){let Y={...Q};for(let $ in X){let W=$,J=X[W];if(J===void 0)continue;let G=Y[W];if(s5(G)&&s5(J))Y[W]={...G,...J};else Y[W]=J}return Y}var yz=V7(p$(),1),gz=V7(xz(),1);function PI(){let Q=new yz.Ajv({strict:!1,validateFormats:!0,validateSchema:!1,allErrors:!0});return gz.default(Q),Q}class Q7{constructor(Q){this._ajv=Q!==null&&Q!==void 0?Q:PI()}getValidator(Q){var X;let Y="$id"in Q&&typeof Q.$id==="string"?(X=this._ajv.getSchema(Q.$id))!==null&&X!==void 0?X:this._ajv.compile(Q):this._ajv.compile(Q);return($)=>{if(Y($))return{valid:!0,data:$,errorMessage:void 0};else return{valid:!1,data:void 0,errorMessage:this._ajv.errorsText(Y.errors)}}}}class X7{constructor(Q){this._server=Q}requestStream(Q,X,Y){return this._server.requestStream(Q,X,Y)}async getTask(Q,X){return this._server.getTask({taskId:Q},X)}async getTaskResult(Q,X,Y){return this._server.getTaskResult({taskId:Q},X,Y)}async listTasks(Q,X){return this._server.listTasks(Q?{cursor:Q}:void 0,X)}async cancelTask(Q,X){return this._server.cancelTask({taskId:Q},X)}}function hz(Q,X,Y){var $;if(!Q)throw Error(`${Y} does not support task creation (required for ${X})`);switch(X){case"tools/call":if(!(($=Q.tools)===null||$===void 0?void 0:$.call))throw Error(`${Y} does not support task creation for tools/call (required for ${X})`);break;default:break}}function fz(Q,X,Y){var $,W;if(!Q)throw Error(`${Y} does not support task creation (required for ${X})`);switch(X){case"sampling/createMessage":if(!(($=Q.sampling)===null||$===void 0?void 0:$.createMessage))throw Error(`${Y} does not support task creation for sampling/createMessage (required for ${X})`);break;case"elicitation/create":if(!((W=Q.elicitation)===null||W===void 0?void 0:W.create))throw Error(`${Y} does not support task creation for elicitation/create (required for ${X})`);break;default:break}}class Y7 extends aY{constructor(Q,X){var Y,$;super(X);if(this._serverInfo=Q,this._loggingLevels=new Map,this.LOG_LEVEL_SEVERITY=new Map(h4.options.map((W,J)=>[W,J])),this.isMessageIgnored=(W,J)=>{let G=this._loggingLevels.get(J);return G?this.LOG_LEVEL_SEVERITY.get(W)<this.LOG_LEVEL_SEVERITY.get(G):!1},this._capabilities=(Y=X===null||X===void 0?void 0:X.capabilities)!==null&&Y!==void 0?Y:{},this._instructions=X===null||X===void 0?void 0:X.instructions,this._jsonSchemaValidator=($=X===null||X===void 0?void 0:X.jsonSchemaValidator)!==null&&$!==void 0?$:new Q7,this.setRequestHandler(kY,(W)=>this._oninitialize(W)),this.setNotificationHandler(vY,()=>{var W;return(W=this.oninitialized)===null||W===void 0?void 0:W.call(this)}),this._capabilities.logging)this.setRequestHandler(fY,async(W,J)=>{var G;let H=J.sessionId||((G=J.requestInfo)===null||G===void 0?void 0:G.headers["mcp-session-id"])||void 0,{level:B}=W.params,z=h4.safeParse(B);if(z.success)this._loggingLevels.set(H,z.data);return{}})}get experimental(){if(!this._experimental)this._experimental={tasks:new X7(this)};return this._experimental}registerCapabilities(Q){if(this.transport)throw Error("Cannot register capabilities after connecting to transport");this._capabilities=e5(this._capabilities,Q)}setRequestHandler(Q,X){var Y,$,W;let J=l1(Q),G=J===null||J===void 0?void 0:J.method;if(!G)throw Error("Schema is missing a method literal");let H;if(p0(G)){let z=G,K=(Y=z._zod)===null||Y===void 0?void 0:Y.def;H=($=K===null||K===void 0?void 0:K.value)!==null&&$!==void 0?$:z.value}else{let z=G,K=z._def;H=(W=K===null||K===void 0?void 0:K.value)!==null&&W!==void 0?W:z.value}if(typeof H!=="string")throw Error("Schema method literal must be a string");if(H==="tools/call"){let z=async(K,q)=>{let U=u1(l6,K);if(!U.success){let N=U.error instanceof Error?U.error.message:String(U.error);throw new k(x.InvalidParams,`Invalid tools/call request: ${N}`)}let{params:V}=U.data,F=await Promise.resolve(X(K,q));if(V.task){let N=u1(f6,F);if(!N.success){let w=N.error instanceof Error?N.error.message:String(N.error);throw new k(x.InvalidParams,`Invalid task creation result: ${w}`)}return N.data}let L=u1(L8,F);if(!L.success){let N=L.error instanceof Error?L.error.message:String(L.error);throw new k(x.InvalidParams,`Invalid tools/call result: ${N}`)}return L.data};return super.setRequestHandler(Q,z)}return super.setRequestHandler(Q,X)}assertCapabilityForMethod(Q){var X,Y,$;switch(Q){case"sampling/createMessage":if(!((X=this._clientCapabilities)===null||X===void 0?void 0:X.sampling))throw Error(`Client does not support sampling (required for ${Q})`);break;case"elicitation/create":if(!((Y=this._clientCapabilities)===null||Y===void 0?void 0:Y.elicitation))throw Error(`Client does not support elicitation (required for ${Q})`);break;case"roots/list":if(!(($=this._clientCapabilities)===null||$===void 0?void 0:$.roots))throw Error(`Client does not support listing roots (required for ${Q})`);break;case"ping":break}}assertNotificationCapability(Q){var X,Y;switch(Q){case"notifications/message":if(!this._capabilities.logging)throw Error(`Server does not support logging (required for ${Q})`);break;case"notifications/resources/updated":case"notifications/resources/list_changed":if(!this._capabilities.resources)throw Error(`Server does not support notifying about resources (required for ${Q})`);break;case"notifications/tools/list_changed":if(!this._capabilities.tools)throw Error(`Server does not support notifying of tool list changes (required for ${Q})`);break;case"notifications/prompts/list_changed":if(!this._capabilities.prompts)throw Error(`Server does not support notifying of prompt list changes (required for ${Q})`);break;case"notifications/elicitation/complete":if(!((Y=(X=this._clientCapabilities)===null||X===void 0?void 0:X.elicitation)===null||Y===void 0?void 0:Y.url))throw Error(`Client does not support URL elicitation (required for ${Q})`);break;case"notifications/cancelled":break;case"notifications/progress":break}}assertRequestHandlerCapability(Q){if(!this._capabilities)return;switch(Q){case"completion/complete":if(!this._capabilities.completions)throw Error(`Server does not support completions (required for ${Q})`);break;case"logging/setLevel":if(!this._capabilities.logging)throw Error(`Server does not support logging (required for ${Q})`);break;case"prompts/get":case"prompts/list":if(!this._capabilities.prompts)throw Error(`Server does not support prompts (required for ${Q})`);break;case"resources/list":case"resources/templates/list":case"resources/read":if(!this._capabilities.resources)throw Error(`Server does not support resources (required for ${Q})`);break;case"tools/call":case"tools/list":if(!this._capabilities.tools)throw Error(`Server does not support tools (required for ${Q})`);break;case"tasks/get":case"tasks/list":case"tasks/result":case"tasks/cancel":if(!this._capabilities.tasks)throw Error(`Server does not support tasks capability (required for ${Q})`);break;case"ping":case"initialize":break}}assertTaskCapability(Q){var X,Y;fz((Y=(X=this._clientCapabilities)===null||X===void 0?void 0:X.tasks)===null||Y===void 0?void 0:Y.requests,Q,"Client")}assertTaskHandlerCapability(Q){var X;if(!this._capabilities)return;hz((X=this._capabilities.tasks)===null||X===void 0?void 0:X.requests,Q,"Server")}async _oninitialize(Q){let X=Q.params.protocolVersion;return this._clientCapabilities=Q.params.capabilities,this._clientVersion=Q.params.clientInfo,{protocolVersion:Q5.includes(X)?X:SY,capabilities:this.getCapabilities(),serverInfo:this._serverInfo,...this._instructions&&{instructions:this._instructions}}}getClientCapabilities(){return this._clientCapabilities}getClientVersion(){return this._clientVersion}getCapabilities(){return this._capabilities}async ping(){return this.request({method:"ping"},e9)}async createMessage(Q,X){var Y,$;if(Q.tools||Q.toolChoice){if(!(($=(Y=this._clientCapabilities)===null||Y===void 0?void 0:Y.sampling)===null||$===void 0?void 0:$.tools))throw Error("Client does not support sampling tools capability.")}if(Q.messages.length>0){let W=Q.messages[Q.messages.length-1],J=Array.isArray(W.content)?W.content:[W.content],G=J.some((K)=>K.type==="tool_result"),H=Q.messages.length>1?Q.messages[Q.messages.length-2]:void 0,B=H?Array.isArray(H.content)?H.content:[H.content]:[],z=B.some((K)=>K.type==="tool_use");if(G){if(J.some((K)=>K.type!=="tool_result"))throw Error("The last message must contain only tool_result content if any is present");if(!z)throw Error("tool_result blocks are not matching any tool_use from the previous message")}if(z){let K=new Set(B.filter((U)=>U.type==="tool_use").map((U)=>U.id)),q=new Set(J.filter((U)=>U.type==="tool_result").map((U)=>U.toolUseId));if(K.size!==q.size||![...K].every((U)=>q.has(U)))throw Error("ids of tool_result blocks and tool_use blocks from previous message do not match")}}if(Q.tools)return this.request({method:"sampling/createMessage",params:Q},lY,X);return this.request({method:"sampling/createMessage",params:Q},uY,X)}async elicitInput(Q,X){var Y,$,W,J,G;switch((Y=Q.mode)!==null&&Y!==void 0?Y:"form"){case"url":{if(!((W=($=this._clientCapabilities)===null||$===void 0?void 0:$.elicitation)===null||W===void 0?void 0:W.url))throw Error("Client does not support url elicitation.");let B=Q;return this.request({method:"elicitation/create",params:B},F8,X)}case"form":{if(!((G=(J=this._clientCapabilities)===null||J===void 0?void 0:J.elicitation)===null||G===void 0?void 0:G.form))throw Error("Client does not support form elicitation.");let B=Q.mode==="form"?Q:{...Q,mode:"form"},z=await this.request({method:"elicitation/create",params:B},F8,X);if(z.action==="accept"&&z.content&&B.requestedSchema)try{let q=this._jsonSchemaValidator.getValidator(B.requestedSchema)(z.content);if(!q.valid)throw new k(x.InvalidParams,`Elicitation response content does not match requested schema: ${q.errorMessage}`)}catch(K){if(K instanceof k)throw K;throw new k(x.InternalError,`Error validating elicitation response: ${K instanceof Error?K.message:String(K)}`)}return z}}}createElicitationCompletionNotifier(Q,X){var Y,$;if(!(($=(Y=this._clientCapabilities)===null||Y===void 0?void 0:Y.elicitation)===null||$===void 0?void 0:$.url))throw Error("Client does not support URL elicitation (required for notifications/elicitation/complete)");return()=>this.notification({method:"notifications/elicitation/complete",params:{elicitationId:Q}},X)}async listRoots(Q,X){return this.request({method:"roots/list",params:Q},mY,X)}async sendLoggingMessage(Q,X){if(this._capabilities.logging){if(!this.isMessageIgnored(Q.level,X))return this.notification({method:"notifications/message",params:Q})}}async sendResourceUpdated(Q){return this.notification({method:"notifications/resources/updated",params:Q})}async sendResourceListChanged(){return this.notification({method:"notifications/resources/list_changed"})}async sendToolListChanged(){return this.notification({method:"notifications/tools/list_changed"})}async sendPromptListChanged(){return this.notification({method:"notifications/prompts/list_changed"})}}var lz=Symbol.for("mcp.completable");function mz(Q){return!!Q&&typeof Q==="object"&&lz in Q}function cz(Q){let X=Q[lz];return X===null||X===void 0?void 0:X.complete}var uz;(function(Q){Q.Completable="McpCompletable"})(uz||(uz={}));var SI=/^[A-Za-z0-9._-]{1,128}$/;function ZI(Q){let X=[];if(Q.length===0)return{isValid:!1,warnings:["Tool name cannot be empty"]};if(Q.length>128)return{isValid:!1,warnings:[`Tool name exceeds maximum length of 128 characters (current: ${Q.length})`]};if(Q.includes(" "))X.push("Tool name contains spaces, which may cause parsing issues");if(Q.includes(","))X.push("Tool name contains commas, which may cause parsing issues");if(Q.startsWith("-")||Q.endsWith("-"))X.push("Tool name starts or ends with a dash, which may cause parsing issues in some contexts");if(Q.startsWith(".")||Q.endsWith("."))X.push("Tool name starts or ends with a dot, which may cause parsing issues in some contexts");if(!SI.test(Q)){let Y=Q.split("").filter(($)=>!/[A-Za-z0-9._-]/.test($)).filter(($,W,J)=>J.indexOf($)===W);return X.push(`Tool name contains invalid characters: ${Y.map(($)=>`"${$}"`).join(", ")}`,"Allowed characters are: A-Z, a-z, 0-9, underscore (_), dash (-), and dot (.)"),{isValid:!1,warnings:X}}return{isValid:!0,warnings:X}}function CI(Q,X){if(X.length>0){console.warn(`Tool name validation warning for "${Q}":`);for(let Y of X)console.warn(`  - ${Y}`);console.warn("Tool registration will proceed, but this may cause compatibility issues."),console.warn("Consider updating the tool name to conform to the MCP tool naming standard."),console.warn("See SEP: Specify Format for Tool Names (https://github.com/modelcontextprotocol/modelcontextprotocol/issues/986) for more details.")}}function $7(Q){let X=ZI(Q);return CI(Q,X.warnings),X.isValid}class W7{constructor(Q){this._mcpServer=Q}registerToolTask(Q,X,Y){let $={taskSupport:"required",...X.execution};if($.taskSupport==="forbidden")throw Error(`Cannot register task-based tool '${Q}' with taskSupport 'forbidden'. Use registerTool() instead.`);return this._mcpServer._createRegisteredTool(Q,X.title,X.description,X.inputSchema,X.outputSchema,X.annotations,$,X._meta,Y)}}class G7{constructor(Q,X){this._registeredResources={},this._registeredResourceTemplates={},this._registeredTools={},this._registeredPrompts={},this._toolHandlersInitialized=!1,this._completionHandlerInitialized=!1,this._resourceHandlersInitialized=!1,this._promptHandlersInitialized=!1,this.server=new Y7(Q,X)}get experimental(){if(!this._experimental)this._experimental={tasks:new W7(this)};return this._experimental}async connect(Q){return await this.server.connect(Q)}async close(){await this.server.close()}setToolRequestHandlers(){if(this._toolHandlersInitialized)return;this.server.assertCanSetRequestHandler(t1(U8)),this.server.assertCanSetRequestHandler(t1(l6)),this.server.registerCapabilities({tools:{listChanged:!0}}),this.server.setRequestHandler(U8,()=>({tools:Object.entries(this._registeredTools).filter(([,Q])=>Q.enabled).map(([Q,X])=>{let Y={name:Q,title:X.title,description:X.description,inputSchema:(()=>{let $=g6(X.inputSchema);return $?rY($,{strictUnions:!0,pipeStrategy:"input"}):kI})(),annotations:X.annotations,execution:X.execution,_meta:X._meta};if(X.outputSchema){let $=g6(X.outputSchema);if($)Y.outputSchema=rY($,{strictUnions:!0,pipeStrategy:"output"})}return Y})})),this.server.setRequestHandler(l6,async(Q,X)=>{var Y;try{let $=this._registeredTools[Q.params.name];if(!$)throw new k(x.InvalidParams,`Tool ${Q.params.name} not found`);if(!$.enabled)throw new k(x.InvalidParams,`Tool ${Q.params.name} disabled`);let W=!!Q.params.task,J=(Y=$.execution)===null||Y===void 0?void 0:Y.taskSupport,G="createTask"in $.handler;if((J==="required"||J==="optional")&&!G)throw new k(x.InternalError,`Tool ${Q.params.name} has taskSupport '${J}' but was not registered with registerToolTask`);if(J==="required"&&!W)throw new k(x.MethodNotFound,`Tool ${Q.params.name} requires task augmentation (taskSupport: 'required')`);if(J==="optional"&&!W&&G)return await this.handleAutomaticTaskPolling($,Q,X);let H=await this.validateToolInput($,Q.params.arguments,Q.params.name),B=await this.executeToolHandler($,H,X);if(W)return B;return await this.validateToolOutput($,B,Q.params.name),B}catch($){if($ instanceof k){if($.code===x.UrlElicitationRequired)throw $}return this.createToolError($ instanceof Error?$.message:String($))}}),this._toolHandlersInitialized=!0}createToolError(Q){return{content:[{type:"text",text:Q}],isError:!0}}async validateToolInput(Q,X,Y){if(!Q.inputSchema)return;let $=g6(Q.inputSchema),W=$!==null&&$!==void 0?$:Q.inputSchema,J=await d9(W,X);if(!J.success){let G="error"in J?J.error:"Unknown error",H=i9(G);throw new k(x.InvalidParams,`Input validation error: Invalid arguments for tool ${Y}: ${H}`)}return J.data}async validateToolOutput(Q,X,Y){if(!Q.outputSchema)return;if(!("content"in X))return;if(X.isError)return;if(!X.structuredContent)throw new k(x.InvalidParams,`Output validation error: Tool ${Y} has an output schema but no structured content was provided`);let $=g6(Q.outputSchema),W=await d9($,X.structuredContent);if(!W.success){let J="error"in W?W.error:"Unknown error",G=i9(J);throw new k(x.InvalidParams,`Output validation error: Invalid structured content for tool ${Y}: ${G}`)}}async executeToolHandler(Q,X,Y){let $=Q.handler;if("createTask"in $){if(!Y.taskStore)throw Error("No task store provided.");let J={...Y,taskStore:Y.taskStore};if(Q.inputSchema)return await Promise.resolve($.createTask(X,J));else return await Promise.resolve($.createTask(J))}if(Q.inputSchema)return await Promise.resolve($(X,Y));else return await Promise.resolve($(Y))}async handleAutomaticTaskPolling(Q,X,Y){var $;if(!Y.taskStore)throw Error("No task store provided for task-capable tool.");let W=await this.validateToolInput(Q,X.params.arguments,X.params.name),J=Q.handler,G={...Y,taskStore:Y.taskStore},H=W?await Promise.resolve(J.createTask(W,G)):await Promise.resolve(J.createTask(G)),B=H.task.taskId,z=H.task,K=($=z.pollInterval)!==null&&$!==void 0?$:5000;while(z.status!=="completed"&&z.status!=="failed"&&z.status!=="cancelled"){await new Promise((U)=>setTimeout(U,K));let q=await Y.taskStore.getTask(B);if(!q)throw new k(x.InternalError,`Task ${B} not found during polling`);z=q}return await Y.taskStore.getTaskResult(B)}setCompletionRequestHandler(){if(this._completionHandlerInitialized)return;this.server.assertCanSetRequestHandler(t1(N8)),this.server.registerCapabilities({completions:{}}),this.server.setRequestHandler(N8,async(Q)=>{switch(Q.params.ref.type){case"ref/prompt":return D5(Q),this.handlePromptCompletion(Q,Q.params.ref);case"ref/resource":return O5(Q),this.handleResourceCompletion(Q,Q.params.ref);default:throw new k(x.InvalidParams,`Invalid completion reference: ${Q.params.ref}`)}}),this._completionHandlerInitialized=!0}async handlePromptCompletion(Q,X){let Y=this._registeredPrompts[X.name];if(!Y)throw new k(x.InvalidParams,`Prompt ${X.name} not found`);if(!Y.enabled)throw new k(x.InvalidParams,`Prompt ${X.name} disabled`);if(!Y.argsSchema)return z9;let $=l1(Y.argsSchema),W=$===null||$===void 0?void 0:$[Q.params.argument.name];if(!mz(W))return z9;let J=cz(W);if(!J)return z9;let G=await J(Q.params.argument.value,Q.params.context);return dz(G)}async handleResourceCompletion(Q,X){let Y=Object.values(this._registeredResourceTemplates).find((J)=>J.resourceTemplate.uriTemplate.toString()===X.uri);if(!Y){if(this._registeredResources[X.uri])return z9;throw new k(x.InvalidParams,`Resource template ${Q.params.ref.uri} not found`)}let $=Y.resourceTemplate.completeCallback(Q.params.argument.name);if(!$)return z9;let W=await $(Q.params.argument.value,Q.params.context);return dz(W)}setResourceRequestHandlers(){if(this._resourceHandlersInitialized)return;this.server.assertCanSetRequestHandler(t1(B8)),this.server.assertCanSetRequestHandler(t1(z8)),this.server.assertCanSetRequestHandler(t1(K8)),this.server.registerCapabilities({resources:{listChanged:!0}}),this.server.setRequestHandler(B8,async(Q,X)=>{let Y=Object.entries(this._registeredResources).filter(([W,J])=>J.enabled).map(([W,J])=>({uri:W,name:J.name,...J.metadata})),$=[];for(let W of Object.values(this._registeredResourceTemplates)){if(!W.resourceTemplate.listCallback)continue;let J=await W.resourceTemplate.listCallback(X);for(let G of J.resources)$.push({...W.metadata,...G})}return{resources:[...Y,...$]}}),this.server.setRequestHandler(z8,async()=>{return{resourceTemplates:Object.entries(this._registeredResourceTemplates).map(([X,Y])=>({name:X,uriTemplate:Y.resourceTemplate.uriTemplate.toString(),...Y.metadata}))}}),this.server.setRequestHandler(K8,async(Q,X)=>{let Y=new URL(Q.params.uri),$=this._registeredResources[Y.toString()];if($){if(!$.enabled)throw new k(x.InvalidParams,`Resource ${Y} disabled`);return $.readCallback(Y,X)}for(let W of Object.values(this._registeredResourceTemplates)){let J=W.resourceTemplate.uriTemplate.match(Y.toString());if(J)return W.readCallback(Y,J,X)}throw new k(x.InvalidParams,`Resource ${Y} not found`)}),this.setCompletionRequestHandler(),this._resourceHandlersInitialized=!0}setPromptRequestHandlers(){if(this._promptHandlersInitialized)return;this.server.assertCanSetRequestHandler(t1(V8)),this.server.assertCanSetRequestHandler(t1(q8)),this.server.registerCapabilities({prompts:{listChanged:!0}}),this.server.setRequestHandler(V8,()=>({prompts:Object.entries(this._registeredPrompts).filter(([,Q])=>Q.enabled).map(([Q,X])=>{return{name:Q,title:X.title,description:X.description,arguments:X.argsSchema?_I(X.argsSchema):void 0}})})),this.server.setRequestHandler(q8,async(Q,X)=>{let Y=this._registeredPrompts[Q.params.name];if(!Y)throw new k(x.InvalidParams,`Prompt ${Q.params.name} not found`);if(!Y.enabled)throw new k(x.InvalidParams,`Prompt ${Q.params.name} disabled`);if(Y.argsSchema){let $=g6(Y.argsSchema),W=await d9($,Q.params.arguments);if(!W.success){let H="error"in W?W.error:"Unknown error",B=i9(H);throw new k(x.InvalidParams,`Invalid arguments for prompt ${Q.params.name}: ${B}`)}let J=W.data,G=Y.callback;return await Promise.resolve(G(J,X))}else{let $=Y.callback;return await Promise.resolve($(X))}}),this.setCompletionRequestHandler(),this._promptHandlersInitialized=!0}resource(Q,X,...Y){let $;if(typeof Y[0]==="object")$=Y.shift();let W=Y[0];if(typeof X==="string"){if(this._registeredResources[X])throw Error(`Resource ${X} is already registered`);let J=this._createRegisteredResource(Q,void 0,X,$,W);return this.setResourceRequestHandlers(),this.sendResourceListChanged(),J}else{if(this._registeredResourceTemplates[Q])throw Error(`Resource template ${Q} is already registered`);let J=this._createRegisteredResourceTemplate(Q,void 0,X,$,W);return this.setResourceRequestHandlers(),this.sendResourceListChanged(),J}}registerResource(Q,X,Y,$){if(typeof X==="string"){if(this._registeredResources[X])throw Error(`Resource ${X} is already registered`);let W=this._createRegisteredResource(Q,Y.title,X,Y,$);return this.setResourceRequestHandlers(),this.sendResourceListChanged(),W}else{if(this._registeredResourceTemplates[Q])throw Error(`Resource template ${Q} is already registered`);let W=this._createRegisteredResourceTemplate(Q,Y.title,X,Y,$);return this.setResourceRequestHandlers(),this.sendResourceListChanged(),W}}_createRegisteredResource(Q,X,Y,$,W){let J={name:Q,title:X,metadata:$,readCallback:W,enabled:!0,disable:()=>J.update({enabled:!1}),enable:()=>J.update({enabled:!0}),remove:()=>J.update({uri:null}),update:(G)=>{if(typeof G.uri<"u"&&G.uri!==Y){if(delete this._registeredResources[Y],G.uri)this._registeredResources[G.uri]=J}if(typeof G.name<"u")J.name=G.name;if(typeof G.title<"u")J.title=G.title;if(typeof G.metadata<"u")J.metadata=G.metadata;if(typeof G.callback<"u")J.readCallback=G.callback;if(typeof G.enabled<"u")J.enabled=G.enabled;this.sendResourceListChanged()}};return this._registeredResources[Y]=J,J}_createRegisteredResourceTemplate(Q,X,Y,$,W){let J={resourceTemplate:Y,title:X,metadata:$,readCallback:W,enabled:!0,disable:()=>J.update({enabled:!1}),enable:()=>J.update({enabled:!0}),remove:()=>J.update({name:null}),update:(G)=>{if(typeof G.name<"u"&&G.name!==Q){if(delete this._registeredResourceTemplates[Q],G.name)this._registeredResourceTemplates[G.name]=J}if(typeof G.title<"u")J.title=G.title;if(typeof G.template<"u")J.resourceTemplate=G.template;if(typeof G.metadata<"u")J.metadata=G.metadata;if(typeof G.callback<"u")J.readCallback=G.callback;if(typeof G.enabled<"u")J.enabled=G.enabled;this.sendResourceListChanged()}};return this._registeredResourceTemplates[Q]=J,J}_createRegisteredPrompt(Q,X,Y,$,W){let J={title:X,description:Y,argsSchema:$===void 0?void 0:y6($),callback:W,enabled:!0,disable:()=>J.update({enabled:!1}),enable:()=>J.update({enabled:!0}),remove:()=>J.update({name:null}),update:(G)=>{if(typeof G.name<"u"&&G.name!==Q){if(delete this._registeredPrompts[Q],G.name)this._registeredPrompts[G.name]=J}if(typeof G.title<"u")J.title=G.title;if(typeof G.description<"u")J.description=G.description;if(typeof G.argsSchema<"u")J.argsSchema=y6(G.argsSchema);if(typeof G.callback<"u")J.callback=G.callback;if(typeof G.enabled<"u")J.enabled=G.enabled;this.sendPromptListChanged()}};return this._registeredPrompts[Q]=J,J}_createRegisteredTool(Q,X,Y,$,W,J,G,H,B){$7(Q);let z={title:X,description:Y,inputSchema:pz($),outputSchema:pz(W),annotations:J,execution:G,_meta:H,handler:B,enabled:!0,disable:()=>z.update({enabled:!1}),enable:()=>z.update({enabled:!0}),remove:()=>z.update({name:null}),update:(K)=>{if(typeof K.name<"u"&&K.name!==Q){if(typeof K.name==="string")$7(K.name);if(delete this._registeredTools[Q],K.name)this._registeredTools[K.name]=z}if(typeof K.title<"u")z.title=K.title;if(typeof K.description<"u")z.description=K.description;if(typeof K.paramsSchema<"u")z.inputSchema=y6(K.paramsSchema);if(typeof K.callback<"u")z.handler=K.callback;if(typeof K.annotations<"u")z.annotations=K.annotations;if(typeof K._meta<"u")z._meta=K._meta;if(typeof K.enabled<"u")z.enabled=K.enabled;this.sendToolListChanged()}};return this._registeredTools[Q]=z,this.setToolRequestHandlers(),this.sendToolListChanged(),z}tool(Q,...X){if(this._registeredTools[Q])throw Error(`Tool ${Q} is already registered`);let Y,$,W,J;if(typeof X[0]==="string")Y=X.shift();if(X.length>1){let H=X[0];if(J7(H)){if($=X.shift(),X.length>1&&typeof X[0]==="object"&&X[0]!==null&&!J7(X[0]))J=X.shift()}else if(typeof H==="object"&&H!==null)J=X.shift()}let G=X[0];return this._createRegisteredTool(Q,void 0,Y,$,W,J,{taskSupport:"forbidden"},void 0,G)}registerTool(Q,X,Y){if(this._registeredTools[Q])throw Error(`Tool ${Q} is already registered`);let{title:$,description:W,inputSchema:J,outputSchema:G,annotations:H,_meta:B}=X;return this._createRegisteredTool(Q,$,W,J,G,H,{taskSupport:"forbidden"},B,Y)}prompt(Q,...X){if(this._registeredPrompts[Q])throw Error(`Prompt ${Q} is already registered`);let Y;if(typeof X[0]==="string")Y=X.shift();let $;if(X.length>1)$=X.shift();let W=X[0],J=this._createRegisteredPrompt(Q,void 0,Y,$,W);return this.setPromptRequestHandlers(),this.sendPromptListChanged(),J}registerPrompt(Q,X,Y){if(this._registeredPrompts[Q])throw Error(`Prompt ${Q} is already registered`);let{title:$,description:W,argsSchema:J}=X,G=this._createRegisteredPrompt(Q,$,W,J,Y);return this.setPromptRequestHandlers(),this.sendPromptListChanged(),G}isConnected(){return this.server.transport!==void 0}async sendLoggingMessage(Q,X){return this.server.sendLoggingMessage(Q,X)}sendResourceListChanged(){if(this.isConnected())this.server.sendResourceListChanged()}sendToolListChanged(){if(this.isConnected())this.server.sendToolListChanged()}sendPromptListChanged(){if(this.isConnected())this.server.sendPromptListChanged()}}var kI={type:"object",properties:{}};function iz(Q){return Q!==null&&typeof Q==="object"&&"parse"in Q&&typeof Q.parse==="function"&&"safeParse"in Q&&typeof Q.safeParse==="function"}function vI(Q){return"_def"in Q||"_zod"in Q||iz(Q)}function J7(Q){if(typeof Q!=="object"||Q===null)return!1;if(vI(Q))return!1;if(Object.keys(Q).length===0)return!0;return Object.values(Q).some(iz)}function pz(Q){if(!Q)return;if(J7(Q))return y6(Q);return Q}function _I(Q){let X=l1(Q);if(!X)return[];return Object.entries(X).map(([Y,$])=>{let W=kJ($),J=vJ($);return{name:Y,description:W,required:!J}})}function t1(Q){let X=l1(Q),Y=X===null||X===void 0?void 0:X.method;if(!Y)throw Error("Schema is missing a method literal");let $=n9(Y);if(typeof $==="string")return $;throw Error("Schema method literal must be a string")}function dz(Q){return{completion:{values:Q.slice(0,100),total:Q.length,hasMore:Q.length>100}}}var z9={completion:{values:[],hasMore:!1}};function TI(Q,X,Y,$,W){return{name:Q,description:X,inputSchema:Y,handler:$,annotations:W?.annotations}}function xI(Q){let X=new G7({name:Q.name,version:Q.version??"1.0.0"},{capabilities:{tools:Q.tools?{}:void 0}});if(Q.tools)Q.tools.forEach((Y)=>{X.registerTool(Y.name,{description:Y.description,inputSchema:Y.inputSchema,annotations:Y.annotations},Y.handler)});return{type:"sdk",name:Q.name,instance:X}}function oT({prompt:Q,options:X}){let{systemPrompt:Y,settingSources:$,sandbox:W,...J}=X??{},G,H;if(Y===void 0)G="";else if(typeof Y==="string")G=Y;else if(Y.type==="preset")H=Y.append;let B=J.pathToClaudeCodeExecutable;if(!B){let O6=yI(import.meta.url),w6=nz(O6,"..");B=nz(w6,"cli.js")}process.env.CLAUDE_AGENT_SDK_VERSION="0.2.49";let{abortController:z=M6(),additionalDirectories:K=[],agent:q,agents:U,allowedTools:V=[],betas:F,canUseTool:L,continue:N,cwd:w,debug:A,debugFile:R,disallowedTools:S=[],tools:C,env:U0,executable:L0=b6()?"bun":"node",executableArgs:s=[],extraArgs:M0={},fallbackModel:D0,enableFileCheckpointing:F1,forkSession:C1,hooks:a1,includePartialMessages:l,persistSession:WQ,thinking:s1,effort:e6,maxThinkingTokens:e1,maxTurns:K9,maxBudgetUsd:V9,mcpServers:P0,model:k1,outputFormat:N6,permissionMode:rz="default",allowDangerouslySkipPermissions:oz=!1,permissionPromptToolName:tz,plugins:az,resume:sz,resumeSessionAt:ez,sessionId:QK,stderr:XK,strictMcpConfig:YK}=J,H7=N6?.type==="json_schema"?N6.schema:void 0,D6=U0;if(!D6)D6={...process.env};if(!D6.CLAUDE_CODE_ENTRYPOINT)D6.CLAUDE_CODE_ENTRYPOINT="sdk-ts";if(F1)D6.CLAUDE_CODE_ENABLE_SDK_FILE_CHECKPOINTING="true";if(!B)throw Error("pathToClaudeCodeExecutable is required");let JQ={},B7=new Map;if(P0)for(let[O6,w6]of Object.entries(P0))if(w6.type==="sdk"&&"instance"in w6)B7.set(O6,w6.instance),JQ[O6]={type:"sdk",name:O6};else JQ[O6]=w6;let $K=typeof Q==="string",Q4;if(s1)switch(s1.type){case"adaptive":Q4={type:"adaptive"};break;case"enabled":Q4={type:"enabled",budgetTokens:s1.budgetTokens};break;case"disabled":Q4={type:"disabled"};break}else if(e1!==void 0)Q4=e1===0?{type:"disabled"}:{type:"enabled",budgetTokens:e1};let z7=new Y4({abortController:z,additionalDirectories:K,agent:q,betas:F,cwd:w,debug:A,debugFile:R,executable:L0,executableArgs:s,extraArgs:M0,pathToClaudeCodeExecutable:B,env:D6,forkSession:C1,stderr:XK,thinkingConfig:Q4,effort:e6,maxTurns:K9,maxBudgetUsd:V9,model:k1,fallbackModel:D0,jsonSchema:H7,permissionMode:rz,allowDangerouslySkipPermissions:oz,permissionPromptToolName:tz,continueConversation:N,resume:sz,resumeSessionAt:ez,sessionId:QK,settingSources:$??[],allowedTools:V,disallowedTools:S,tools:C,mcpServers:JQ,strictMcpConfig:YK,canUseTool:!!L,hooks:!!a1,includePartialMessages:l,persistSession:WQ,plugins:az,sandbox:W,spawnClaudeCodeProcess:J.spawnClaudeCodeProcess}),WK={systemPrompt:G,appendSystemPrompt:H,agents:U,promptSuggestions:J.promptSuggestions},K7=new W4(z7,$K,L,a1,z,B7,H7,WK);if(typeof Q==="string")z7.write(k0({type:"user",session_id:"",message:{role:"user",content:[{type:"text",text:Q}]},parent_tool_use_id:null})+`
`);else K7.streamInput(Q);return K7}function tT(Q){return UQ(Q)}function aT(Q,X){return BW(Q,X)}async function sT(Q,X){let $=[];try{const Y=$0($,UQ(X),1);await Y.send(Q);for await(let B of Y.stream())if(B.type==="result")return B;throw Error("Session ended without result message")}catch(W){var J=W,G=1}finally{var H=W0($,J,G);H&&await H}}export{aT as unstable_v2_resumeSession,sT as unstable_v2_prompt,tT as unstable_v2_createSession,TI as tool,oT as query,xI as createSdkMcpServer,tV as HOOK_EVENTS,aV as EXIT_REASONS,O1 as AbortError};
